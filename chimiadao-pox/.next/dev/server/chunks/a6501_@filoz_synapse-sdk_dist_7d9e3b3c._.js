module.exports = [
"[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/utils/constants.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "CHAIN_IDS",
    ()=>CHAIN_IDS,
    "CONTRACT_ABIS",
    ()=>CONTRACT_ABIS,
    "CONTRACT_ADDRESSES",
    ()=>CONTRACT_ADDRESSES,
    "EIP2612_PERMIT_TYPES",
    ()=>EIP2612_PERMIT_TYPES,
    "GENESIS_TIMESTAMPS",
    ()=>GENESIS_TIMESTAMPS,
    "METADATA_KEYS",
    ()=>METADATA_KEYS,
    "RPC_URLS",
    ()=>RPC_URLS,
    "SETTLEMENT_FEE",
    ()=>SETTLEMENT_FEE,
    "SIZE_CONSTANTS",
    ()=>SIZE_CONSTANTS,
    "TIME_CONSTANTS",
    ()=>TIME_CONSTANTS,
    "TIMING_CONSTANTS",
    ()=>TIMING_CONSTANTS,
    "TOKENS",
    ()=>TOKENS
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$core$2f$dist$2f$src$2f$abis$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-core/dist/src/abis/index.js [app-route] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$core$2f$dist$2f$src$2f$abis$2f$erc20$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-core/dist/src/abis/erc20.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$core$2f$dist$2f$src$2f$abis$2f$generated$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__filecoinPayV1Abi__as__payments$3e$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-core/dist/src/abis/generated.js [app-route] (ecmascript) <export filecoinPayV1Abi as payments>");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$core$2f$dist$2f$src$2f$abis$2f$generated$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__pdpVerifierAbi__as__pdp$3e$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-core/dist/src/abis/generated.js [app-route] (ecmascript) <export pdpVerifierAbi as pdp>");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$core$2f$dist$2f$src$2f$abis$2f$generated$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__filecoinWarmStorageServiceStateViewAbi__as__storageView$3e$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-core/dist/src/abis/generated.js [app-route] (ecmascript) <export filecoinWarmStorageServiceStateViewAbi as storageView>");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$core$2f$dist$2f$src$2f$abis$2f$generated$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__serviceProviderRegistryAbi__as__serviceProviderRegistry$3e$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-core/dist/src/abis/generated.js [app-route] (ecmascript) <export serviceProviderRegistryAbi as serviceProviderRegistry>");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$core$2f$dist$2f$src$2f$abis$2f$generated$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__sessionKeyRegistryAbi__as__sessionKeyRegistry$3e$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-core/dist/src/abis/generated.js [app-route] (ecmascript) <export sessionKeyRegistryAbi as sessionKeyRegistry>");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$core$2f$dist$2f$src$2f$piece$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-core/dist/src/piece.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f$viem$2f$_esm$2f$constants$2f$abis$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/viem/_esm/constants/abis.js [app-route] (ecmascript)");
;
;
;
const TOKENS = {
    USDFC: 'USDFC',
    FIL: 'FIL'
};
const CHAIN_IDS = {
    mainnet: 314,
    calibration: 314159
};
const CONTRACT_ABIS = {
    ERC20: __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f$viem$2f$_esm$2f$constants$2f$abis$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["erc20Abi"],
    ERC20_PERMIT: __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$core$2f$dist$2f$src$2f$abis$2f$erc20$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["erc20WithPermit"],
    PAYMENTS: __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$core$2f$dist$2f$src$2f$abis$2f$generated$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__filecoinPayV1Abi__as__payments$3e$__["payments"],
    PDP_VERIFIER: __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$core$2f$dist$2f$src$2f$abis$2f$generated$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__pdpVerifierAbi__as__pdp$3e$__["pdp"],
    WARM_STORAGE: __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$core$2f$dist$2f$src$2f$abis$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__["storage"],
    WARM_STORAGE_VIEW: __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$core$2f$dist$2f$src$2f$abis$2f$generated$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__filecoinWarmStorageServiceStateViewAbi__as__storageView$3e$__["storageView"],
    MULTICALL3: __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f$viem$2f$_esm$2f$constants$2f$abis$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["multicall3Abi"],
    SERVICE_PROVIDER_REGISTRY: __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$core$2f$dist$2f$src$2f$abis$2f$generated$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__serviceProviderRegistryAbi__as__serviceProviderRegistry$3e$__["serviceProviderRegistry"],
    SESSION_KEY_REGISTRY: __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$core$2f$dist$2f$src$2f$abis$2f$generated$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__sessionKeyRegistryAbi__as__sessionKeyRegistry$3e$__["sessionKeyRegistry"]
};
const EIP2612_PERMIT_TYPES = {
    Permit: [
        {
            name: 'owner',
            type: 'address'
        },
        {
            name: 'spender',
            type: 'address'
        },
        {
            name: 'value',
            type: 'uint256'
        },
        {
            name: 'nonce',
            type: 'uint256'
        },
        {
            name: 'deadline',
            type: 'uint256'
        }
    ]
};
const TIME_CONSTANTS = {
    EPOCH_DURATION: 30,
    EPOCHS_PER_DAY: 2880n,
    EPOCHS_PER_MONTH: 86400n,
    DAYS_PER_MONTH: 30n,
    DEFAULT_LOCKUP_DAYS: 30n
};
const GENESIS_TIMESTAMPS = {
    mainnet: 1598306400,
    calibration: 1667326380
};
const SIZE_CONSTANTS = {
    KiB: 1024n,
    MiB: 1n << 20n,
    GiB: 1n << 30n,
    TiB: 1n << 40n,
    PiB: 1n << 50n,
    MAX_UPLOAD_SIZE: __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$core$2f$dist$2f$src$2f$piece$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["MAX_UPLOAD_SIZE"],
    MIN_UPLOAD_SIZE: 127,
    DEFAULT_UPLOAD_BATCH_SIZE: 32
};
const METADATA_KEYS = {
    WITH_CDN: 'withCDN',
    WITH_IPFS_INDEXING: 'withIPFSIndexing',
    IPFS_ROOT_CID: 'ipfsRootCID'
};
const TIMING_CONSTANTS = {
    TRANSACTION_PROPAGATION_TIMEOUT_MS: 180000,
    TRANSACTION_PROPAGATION_POLL_INTERVAL_MS: 2000,
    DATA_SET_CREATION_TIMEOUT_MS: 7 * 60 * 1000,
    DATA_SET_CREATION_POLL_INTERVAL_MS: 2000,
    PIECE_PARKING_TIMEOUT_MS: 7 * 60 * 1000,
    PIECE_PARKING_POLL_INTERVAL_MS: 5000,
    TRANSACTION_CONFIRMATIONS: 1,
    PERMIT_DEADLINE_DURATION: 3600,
    PIECE_ADDITION_TIMEOUT_MS: 7 * 60 * 1000,
    PIECE_ADDITION_POLL_INTERVAL_MS: 1000
};
const SETTLEMENT_FEE = 1300000000000000n;
const RPC_URLS = {
    mainnet: {
        http: 'https://api.node.glif.io/rpc/v1',
        websocket: 'wss://wss.node.glif.io/apigw/lotus/rpc/v1'
    },
    calibration: {
        http: 'https://api.calibration.node.glif.io/rpc/v1',
        websocket: 'wss://wss.calibration.node.glif.io/apigw/lotus/rpc/v1'
    }
};
const CONTRACT_ADDRESSES = {
    WARM_STORAGE: {
        mainnet: '0x8408502033C418E1bbC97cE9ac48E5528F371A9f',
        calibration: '0x02925630df557F957f70E112bA06e50965417CA0'
    },
    MULTICALL3: {
        mainnet: '0xcA11bde05977b3631167028862bE2a173976CA11',
        calibration: '0xcA11bde05977b3631167028862bE2a173976CA11'
    },
    USDFC: {
        mainnet: '0x80B98d3aa09ffff255c3ba4A241111Ff1262F045',
        calibration: '0xb3042734b608a1B16e9e86B374A3f3e389B4cDf0'
    }
}; //# sourceMappingURL=constants.js.map
}),
"[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/utils/eip712.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "EIP712_ENCODED_TYPES",
    ()=>EIP712_ENCODED_TYPES,
    "EIP712_TYPES",
    ()=>EIP712_TYPES,
    "EIP712_TYPE_HASHES",
    ()=>EIP712_TYPE_HASHES
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f$ox$2f$_esm$2f$core$2f$TypedData$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__TypedData$3e$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/ox/_esm/core/TypedData.js [app-route] (ecmascript) <export * as TypedData>");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f$viem$2f$_esm$2f$utils$2f$hash$2f$keccak256$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/viem/_esm/utils/hash/keccak256.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f$viem$2f$_esm$2f$utils$2f$encoding$2f$toHex$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/viem/_esm/utils/encoding/toHex.js [app-route] (ecmascript)");
;
;
const EIP712_TYPES = {
    MetadataEntry: [
        {
            name: 'key',
            type: 'string'
        },
        {
            name: 'value',
            type: 'string'
        }
    ],
    CreateDataSet: [
        {
            name: 'clientDataSetId',
            type: 'uint256'
        },
        {
            name: 'payee',
            type: 'address'
        },
        {
            name: 'metadata',
            type: 'MetadataEntry[]'
        }
    ],
    Cid: [
        {
            name: 'data',
            type: 'bytes'
        }
    ],
    PieceMetadata: [
        {
            name: 'pieceIndex',
            type: 'uint256'
        },
        {
            name: 'metadata',
            type: 'MetadataEntry[]'
        }
    ],
    AddPieces: [
        {
            name: 'clientDataSetId',
            type: 'uint256'
        },
        {
            name: 'nonce',
            type: 'uint256'
        },
        {
            name: 'pieceData',
            type: 'Cid[]'
        },
        {
            name: 'pieceMetadata',
            type: 'PieceMetadata[]'
        }
    ],
    SchedulePieceRemovals: [
        {
            name: 'clientDataSetId',
            type: 'uint256'
        },
        {
            name: 'pieceIds',
            type: 'uint256[]'
        }
    ],
    DeleteDataSet: [
        {
            name: 'clientDataSetId',
            type: 'uint256'
        }
    ]
};
const EIP712_ENCODED_TYPES = {};
const EIP712_TYPE_HASHES = {};
for(const typeName in EIP712_TYPES){
    const encodedType = __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f$ox$2f$_esm$2f$core$2f$TypedData$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__TypedData$3e$__["TypedData"].encodeType({
        types: EIP712_TYPES,
        primaryType: typeName
    });
    EIP712_ENCODED_TYPES[typeName] = encodedType;
    EIP712_TYPE_HASHES[typeName] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f$viem$2f$_esm$2f$utils$2f$hash$2f$keccak256$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["keccak256"])((0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f$viem$2f$_esm$2f$utils$2f$encoding$2f$toHex$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["stringToHex"])(encodedType));
} //# sourceMappingURL=eip712.js.map
}),
"[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/package.json (json)", ((__turbopack_context__) => {

__turbopack_context__.v({"name":"@filoz/synapse-sdk","version":"0.36.0","description":"JavaScript SDK for Filecoin Onchain Cloud","repository":{"type":"git","url":"git+https://github.com/FilOzone/synapse-sdk.git"},"keywords":["filecoin","synapse","filecoin pay","filecoin onchain cloud","web3"],"author":"Rod Vagg <rod@vagg.org>","license":"Apache-2.0 OR MIT","bugs":{"url":"https://github.com/FilOzone/synapse-sdk/issues"},"homepage":"https://github.com/FilOzone/synapse-sdk/tree/main/packages/synapse-sdk","type":"module","main":"dist/src/index.js","types":"dist/src/index.d.ts","exports":{".":{"import":"./dist/src/index.js","types":"./dist/src/index.d.ts"},"./pdp":{"import":"./dist/src/pdp/index.js","types":"./dist/src/pdp/index.d.ts"},"./payments":{"import":"./dist/src/payments/index.js","types":"./dist/src/payments/index.d.ts"},"./warm-storage":{"import":"./dist/src/warm-storage/index.js","types":"./dist/src/warm-storage/index.d.ts"},"./subgraph":{"import":"./dist/src/subgraph/index.js","types":"./dist/src/subgraph/index.d.ts"},"./sp-registry":{"import":"./dist/src/sp-registry/index.js","types":"./dist/src/sp-registry/index.d.ts"}},"scripts":{"build":"wireit","lint":"wireit","lint:fix":"biome check --no-errors-on-unmatched --files-ignore-unknown=true --fix .","test":"wireit","test:node":"wireit","test:browser":"wireit","clean":"rm -rf dist","prepublishOnly":"pnpm run clean && pnpm run build"},"wireit":{"build":{"command":"tsc --build --pretty","clean":"if-file-deleted","files":["src/**/*.ts","tsconfig.json"],"output":["dist/**"],"dependencies":["../synapse-core:build"]},"lint":{"command":"biome check --no-errors-on-unmatched --files-ignore-unknown=true .","files":["src/**/*.ts","../../biome.json"],"output":[],"dependencies":["build"]},"test":{"command":"pnpm run test:node && pnpm run test:browser","files":["src/**/*.ts"],"output":[],"dependencies":["lint"]},"test:node":{"command":"playwright-test \"src/test/**/*.test.ts\" --mode node","files":["src/**/*.ts"],"output":[],"dependencies":["../synapse-core:build"]},"test:browser":{"command":"playwright-test \"src/test/**/*.test.ts\" --assets ./src/test/mocks","files":["src/**/*.ts"],"output":[],"dependencies":["../synapse-core:build"]}},"dependencies":{"@filoz/synapse-core":"workspace:^","@web3-storage/data-segment":"^5.3.0","ethers":"^6.15.0","multiformats":"^13.4.1","ox":"^0.9.12","viem":"^2.38.3"},"optionalDependencies":{"@sentry/browser":"^10.21.0","@sentry/node":"^10.21.0"},"devDependencies":{"@biomejs/biome":"2.3.5","@types/chai":"^5.2.3","@types/mocha":"^10.0.10","@types/node":"^24.9.1","@wagmi/cli":"^2.7.0","abitype":"^1.1.1","chai":"^6.2.0","iso-web":"^1.4.3","mocha":"^11.7.4","msw":"~2.10.5","p-defer":"^4.0.1","playwright-test":"^14.1.12","type-fest":"^5.1.0","typescript":"5.9.3"},"publishConfig":{"access":"public"},"msw":{"workerDirectory":["src/test/mocks"]},"browser":{"@sentry/node":"@sentry/browser"}});}),
"[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/utils/sdk-version.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "SDK_VERSION",
    ()=>SDK_VERSION
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$package$2e$json__$28$json$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/package.json (json)");
;
const SDK_VERSION = __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$package$2e$json__$28$json$29$__["default"].version; //# sourceMappingURL=sdk-version.js.map
}),
"[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/telemetry/utils.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "getSentry",
    ()=>getSentry,
    "isBrowser",
    ()=>isBrowser,
    "sanitizeUrlForSpan",
    ()=>sanitizeUrlForSpan
]);
const isBrowser = typeof globalThis.window !== 'undefined' && typeof globalThis.document !== 'undefined';
async function getSentry() {
    try {
        if (isBrowser) {
            return await __turbopack_context__.A("[project]/ETHGlobalBuenosAires/node_modules/@sentry/browser/build/npm/esm/dev/index.js [app-route] (ecmascript, async loader)");
        }
        return await __turbopack_context__.A("[project]/ETHGlobalBuenosAires/node_modules/@sentry/node/build/esm/index.js [app-route] (ecmascript, async loader)");
    } catch  {
        return null;
    }
}
const URL_SANITIZATION_PATTERNS = [
    [
        /\?.+/,
        ''
    ],
    [
        /\/[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}/gi,
        '/<UUID>'
    ],
    [
        /\/baf[a-z0-9]{50,}/g,
        '/<CID>'
    ],
    [
        /\/0x[a-f0-9]{16,}/gi,
        '/<txHash>'
    ],
    [
        /\/[0-9]+\b/g,
        '/<ID>'
    ]
];
function sanitizeUrlForSpan(urlOrPath) {
    let sanitized = urlOrPath;
    for (const [pattern, replacement] of URL_SANITIZATION_PATTERNS){
        sanitized = sanitized.replace(pattern, replacement);
    }
    return sanitized;
} //# sourceMappingURL=utils.js.map
}),
"[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/telemetry/service.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "TelemetryService",
    ()=>TelemetryService
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$sdk$2d$version$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/utils/sdk-version.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$telemetry$2f$utils$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/telemetry/utils.js [app-route] (ecmascript)");
;
;
class TelemetryService {
    eventBuffer = [];
    maxBufferSize = 15;
    sentry = null;
    async initSentry(config, context) {
        const Sentry = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$telemetry$2f$utils$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getSentry"])();
        if (!Sentry) {
            return;
        }
        this.sentry = Sentry;
        const integrations = [
            Sentry.dedupeIntegration()
        ];
        let runtime;
        if (__TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$telemetry$2f$utils$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["isBrowser"]) {
            runtime = 'browser';
            integrations.push(Sentry.globalHandlersIntegration({
                onerror: true,
                onunhandledrejection: true
            }));
        } else {
            runtime = 'node';
            integrations.push(Sentry.onUncaughtExceptionIntegration(), Sentry.onUnhandledRejectionIntegration());
        }
        const globalTags = {
            ...config.sentrySetTags,
            filecoinNetwork: context.filecoinNetwork,
            synapseSdkVersion: `@filoz/synapse-sdk@v${__TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$sdk$2d$version$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["SDK_VERSION"]}`
        };
        this.sentry.init({
            dsn: 'https://7a07cc9e3b5bf5a8fada2f25dc76cd49@o4510235322023936.ingest.us.sentry.io/4510308233445376',
            sendDefaultPii: false,
            tracesSampleRate: 1.0,
            integrations,
            defaultIntegrations: false,
            ...config.sentryInitOptions,
            beforeSend: this.createBeforeSend(config),
            beforeSendSpan: this.createBeforeSendSpan(config, globalTags),
            release: `@filoz/synapse-sdk@v${__TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$sdk$2d$version$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["SDK_VERSION"]}`
        });
        this.sentry.setContext('runtime', {
            type: runtime,
            userAgent: __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$telemetry$2f$utils$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["isBrowser"] && 'navigator' in globalThis ? globalThis.navigator.userAgent : undefined
        });
        this.sentry.setTags(globalTags);
    }
    createBeforeSend(config) {
        return async (event, hint)=>{
            this.addToEventBuffer(event);
            if (config.sentryInitOptions?.beforeSend != null) {
                return await config.sentryInitOptions.beforeSend(event, hint);
            }
            return event;
        };
    }
    createBeforeSendSpan(config, globalTags) {
        const httpVerbPattern = /^(GET|POST|PUT|PATCH|DELETE|HEAD|OPTIONS|TRACE|CONNECT)\s/i;
        return (span)=>{
            let modifiedSpan = span;
            if (config.sentryInitOptions?.beforeSendSpan != null) {
                const userModifiedSpan = config.sentryInitOptions.beforeSendSpan(span);
                if (userModifiedSpan != null) {
                    modifiedSpan = userModifiedSpan;
                }
            }
            if (modifiedSpan.description && httpVerbPattern.test(modifiedSpan.description)) {
                modifiedSpan.description = (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$telemetry$2f$utils$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["sanitizeUrlForSpan"])(modifiedSpan.description);
                if (modifiedSpan.op === 'http.client' || modifiedSpan.data['sentry.op'] === 'http.client') {
                    modifiedSpan.data = {
                        ...globalTags,
                        ...modifiedSpan.data,
                        'url.sanitizedPath': (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$telemetry$2f$utils$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["sanitizeUrlForSpan"])(modifiedSpan.data?.['url.path']?.toString() ?? '')
                    };
                }
            }
            return modifiedSpan;
        };
    }
    debugDump(limit = 50) {
        return {
            events: this.eventBuffer.slice(-limit)
        };
    }
    addToEventBuffer(event) {
        this.eventBuffer.push(event);
        if (this.eventBuffer.length > this.maxBufferSize) {
            this.eventBuffer.shift();
        }
    }
} //# sourceMappingURL=service.js.map
}),
"[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/telemetry/singleton.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "getGlobalTelemetry",
    ()=>getGlobalTelemetry,
    "initGlobalTelemetry",
    ()=>initGlobalTelemetry,
    "removeGlobalTelemetry",
    ()=>removeGlobalTelemetry
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$telemetry$2f$service$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/telemetry/service.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$telemetry$2f$utils$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/telemetry/utils.js [app-route] (ecmascript)");
;
;
let telemetryInstance = null;
function getGlobalTelemetry() {
    return telemetryInstance;
}
async function initGlobalTelemetry(telemetryConfig, telemetryContext) {
    if (!shouldEnableTelemetry(telemetryConfig, telemetryContext)) {
        return;
    }
    telemetryInstance = new __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$telemetry$2f$service$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["TelemetryService"]();
    await telemetryInstance.initSentry(telemetryConfig, telemetryContext);
    wrapFetch();
    setupShutdownHooks();
}
function removeGlobalTelemetry(flush = true) {
    if (telemetryInstance == null) {
        return;
    }
    if (flush) {
        void telemetryInstance?.sentry?.flush().catch(()=>{});
    }
    unwrapFetch();
    telemetryInstance = null;
}
function shouldEnableTelemetry(telemetryConfig, telemetryContext) {
    if (telemetryConfig?.sentryInitOptions?.enabled === false) {
        return false;
    }
    if (isTelemetryDisabledByEnv()) {
        return false;
    }
    if (telemetryConfig?.sentryInitOptions?.enabled === undefined) {
        if (globalThis.process?.env?.NODE_ENV === 'test' || globalThis.PW_TEST != null) {
            return false;
        }
    }
    if (telemetryConfig?.sentryInitOptions?.enabled === true) {
        return true;
    }
    return telemetryContext.filecoinNetwork === 'calibration';
}
function isTelemetryDisabledByEnv() {
    if (typeof globalThis !== 'undefined') {
        if (globalThis.SYNAPSE_TELEMETRY_DISABLED === true) {
            return true;
        }
        if ('process' in globalThis) {
            const process1 = globalThis.process;
            if (process1?.env) {
                const disabled = process1.env.SYNAPSE_TELEMETRY_DISABLED;
                if (typeof disabled === 'string' && disabled.trim().toLowerCase() === 'true') {
                    return true;
                }
            }
        }
    }
    return false;
}
function setupShutdownHooks(opts = {}) {
    const g = globalThis;
    const timeout = opts.timeoutMs ?? 2000;
    let shuttingDown = false;
    if (__TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$telemetry$2f$utils$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["isBrowser"]) {
        const flush = ()=>{
            void telemetryInstance?.sentry?.flush(timeout).catch(()=>{});
        };
        g.window.addEventListener('pagehide', flush, {
            capture: true
        });
        g.document.addEventListener('visibilitychange', ()=>{
            if (g.document.visibilityState === 'hidden') flush();
        }, {
            capture: true
        });
        g.window.addEventListener('beforeunload', flush, {
            capture: true
        });
        g.window.addEventListener('unload', flush, {
            capture: true
        });
    } else {
        const handleSignal = ()=>{
            if (shuttingDown) return;
            shuttingDown = true;
            void telemetryInstance?.sentry?.close(timeout).finally(()=>{
                shuttingDown = false;
                removeGlobalTelemetry(false);
            }).catch(()=>{});
        };
        process.on('exit', handleSignal);
        process.on('beforeExit', handleSignal);
        process.on('SIGINT', handleSignal);
        process.on('SIGTERM', handleSignal);
        process.on('SIGQUIT', handleSignal);
    }
}
const originalFetch = globalThis.fetch;
let isFetchWrapped = false;
function wrapFetch() {
    if (isFetchWrapped) {
        return;
    }
    isFetchWrapped = true;
    globalThis.fetch = async function wrappedFetch(input, init) {
        const sentry = getGlobalTelemetry()?.sentry;
        if (!sentry) {
            return originalFetch(input, init);
        }
        const url = input instanceof Request ? new URL(input.url) : new URL(input.toString());
        const method = input instanceof Request ? input.method : init?.method || 'GET';
        return await sentry.startSpan({
            op: 'http.client',
            name: `${method} ${url}`
        }, async (span)=>{
            span.setAttributes({
                'url.path': url.pathname,
                'url.full': url.toString(),
                'server.address': url.hostname,
                'http.request.method': method,
                'server.port': url.port || undefined,
                'location.origin': __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$telemetry$2f$utils$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["isBrowser"] ? globalThis.location?.origin : undefined
            });
            const response = await originalFetch(input, init);
            span.setAttributes({
                'http.response.status_code': response.status,
                'http.response_content_length': response.headers.get('content-length') ? Number(response.headers.get('content-length')) : undefined
            });
            return response;
        });
    };
}
function unwrapFetch() {
    if (!isFetchWrapped) {
        return;
    }
    ;
    globalThis.fetch = originalFetch;
    isFetchWrapped = false;
} //# sourceMappingURL=singleton.js.map
}),
"[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/utils/errors.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "createError",
    ()=>createError
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$telemetry$2f$singleton$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/telemetry/singleton.js [app-route] (ecmascript)");
;
function createError(prefix, operation, details, originalError) {
    let baseMessage = `${prefix} ${operation} failed: ${details}`;
    if (originalError != null && originalError instanceof Error) {
        baseMessage = `${baseMessage} - ${originalError.message}`;
    }
    let finalError;
    if (originalError != null) {
        finalError = new Error(baseMessage, {
            cause: originalError
        });
    } else {
        finalError = new Error(baseMessage);
    }
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$telemetry$2f$singleton$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getGlobalTelemetry"])()?.sentry?.captureException(finalError, {
        tags: {
            operation: `${prefix}.${operation}`
        },
        extra: {
            synapseErrorPrefix: prefix,
            synapseErrorOperation: operation,
            synapseErrorDetails: details,
            originalError
        }
    });
    return finalError;
} //# sourceMappingURL=errors.js.map
}),
"[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/utils/epoch.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "calculateLastProofDate",
    ()=>calculateLastProofDate,
    "dateToEpoch",
    ()=>dateToEpoch,
    "epochToDate",
    ()=>epochToDate,
    "getCurrentEpoch",
    ()=>getCurrentEpoch,
    "getGenesisTimestamp",
    ()=>getGenesisTimestamp,
    "timeUntilEpoch",
    ()=>timeUntilEpoch
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/utils/constants.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/utils/index.js [app-route] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/utils/errors.js [app-route] (ecmascript)");
;
;
function epochToDate(epoch, network) {
    const genesisTimestamp = __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["GENESIS_TIMESTAMPS"][network];
    const epochDuration = __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["TIME_CONSTANTS"].EPOCH_DURATION;
    const timestampSeconds = genesisTimestamp + epoch * epochDuration;
    return new Date(timestampSeconds * 1000);
}
function dateToEpoch(date, network) {
    const genesisTimestamp = __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["GENESIS_TIMESTAMPS"][network];
    const epochDuration = __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["TIME_CONSTANTS"].EPOCH_DURATION;
    const timestampSeconds = Math.floor(date.getTime() / 1000);
    const secondsSinceGenesis = timestampSeconds - genesisTimestamp;
    return Math.floor(secondsSinceGenesis / epochDuration);
}
function getGenesisTimestamp(network) {
    return __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["GENESIS_TIMESTAMPS"][network];
}
function timeUntilEpoch(futureEpoch, currentEpoch) {
    const epochDifference = futureEpoch - currentEpoch;
    const seconds = epochDifference * __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["TIME_CONSTANTS"].EPOCH_DURATION;
    return {
        epochs: epochDifference,
        seconds,
        minutes: seconds / 60,
        hours: seconds / 3600,
        days: seconds / 86400
    };
}
function calculateLastProofDate(nextChallengeEpoch, maxProvingPeriod, network) {
    if (nextChallengeEpoch === 0) {
        return null;
    }
    const lastProofEpoch = nextChallengeEpoch - maxProvingPeriod;
    if (lastProofEpoch <= 0) {
        return null;
    }
    return epochToDate(lastProofEpoch, network);
}
async function getCurrentEpoch(provider) {
    const blockNumber = await provider.getBlockNumber();
    if (blockNumber == null) {
        throw (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createError"])('epoch', 'getCurrentEpoch', 'Failed to get latest block number');
    }
    return BigInt(blockNumber);
} //# sourceMappingURL=epoch.js.map
}),
"[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/utils/metadata.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "METADATA_LIMITS",
    ()=>METADATA_LIMITS,
    "combineMetadata",
    ()=>combineMetadata,
    "entriesToObject",
    ()=>entriesToObject,
    "metadataMatches",
    ()=>metadataMatches,
    "objectToEntries",
    ()=>objectToEntries,
    "validateDataSetMetadata",
    ()=>validateDataSetMetadata,
    "validatePieceMetadata",
    ()=>validatePieceMetadata,
    "withCDNToMetadata",
    ()=>withCDNToMetadata
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/utils/constants.js [app-route] (ecmascript)");
;
const METADATA_LIMITS = {
    MAX_KEY_LENGTH: 32,
    MAX_VALUE_LENGTH: 128,
    MAX_KEYS_PER_DATASET: 10,
    MAX_KEYS_PER_PIECE: 5
};
function objectToEntries(metadata) {
    return Object.entries(metadata).sort(([a], [b])=>a.localeCompare(b)).map(([key, value])=>({
            key,
            value
        }));
}
function entriesToObject(entries) {
    const obj = Object.create(null);
    for (const { key, value } of entries){
        obj[key] = value;
    }
    return obj;
}
function validateDataSetMetadata(metadata) {
    const metadataArray = Array.isArray(metadata) ? metadata : objectToEntries(metadata);
    if (metadataArray.length > METADATA_LIMITS.MAX_KEYS_PER_DATASET) {
        throw new Error(`Too many metadata keys for data set: ${metadataArray.length} (max: ${METADATA_LIMITS.MAX_KEYS_PER_DATASET})`);
    }
    for (const { key, value } of metadataArray){
        if (key.length > METADATA_LIMITS.MAX_KEY_LENGTH) {
            throw new Error(`Metadata key "${key}" exceeds max length: ${key.length} bytes (max: ${METADATA_LIMITS.MAX_KEY_LENGTH})`);
        }
        if (value.length > METADATA_LIMITS.MAX_VALUE_LENGTH) {
            throw new Error(`Metadata value for key "${key}" exceeds max length: ${value.length} bytes (max: ${METADATA_LIMITS.MAX_VALUE_LENGTH})`);
        }
    }
}
function validatePieceMetadata(metadata) {
    const metadataArray = Array.isArray(metadata) ? metadata : objectToEntries(metadata);
    if (metadataArray.length > METADATA_LIMITS.MAX_KEYS_PER_PIECE) {
        throw new Error(`Too many metadata keys for piece: ${metadataArray.length} (max: ${METADATA_LIMITS.MAX_KEYS_PER_PIECE})`);
    }
    for (const { key, value } of metadataArray){
        if (key.length > METADATA_LIMITS.MAX_KEY_LENGTH) {
            throw new Error(`Metadata key "${key}" exceeds max length: ${key.length} bytes (max: ${METADATA_LIMITS.MAX_KEY_LENGTH})`);
        }
        if (value.length > METADATA_LIMITS.MAX_VALUE_LENGTH) {
            throw new Error(`Metadata value for key "${key}" exceeds max length: ${value.length} bytes (max: ${METADATA_LIMITS.MAX_VALUE_LENGTH})`);
        }
    }
}
function metadataMatches(dataSetMetadata, requestedMetadata) {
    const dataSetKeys = Object.keys(dataSetMetadata);
    const requestedKeys = Object.keys(requestedMetadata);
    if (dataSetKeys.length !== requestedKeys.length) {
        return false;
    }
    if (requestedKeys.length === 0) {
        return true;
    }
    for (const key of requestedKeys){
        if (dataSetMetadata[key] !== requestedMetadata[key]) {
            return false;
        }
    }
    return true;
}
function combineMetadata(metadata = {}, withCDN) {
    if (withCDN == null || __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["METADATA_KEYS"].WITH_CDN in metadata) {
        return metadata;
    }
    if (withCDN) {
        return {
            ...metadata,
            [__TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["METADATA_KEYS"].WITH_CDN]: ''
        };
    }
    return metadata;
}
function withCDNToMetadata(withCDN) {
    if (withCDN) {
        return [
            {
                key: __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["METADATA_KEYS"].WITH_CDN,
                value: ''
            }
        ];
    }
    return [];
} //# sourceMappingURL=metadata.js.map
}),
"[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/utils/network.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "getFilecoinNetworkType",
    ()=>getFilecoinNetworkType
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/utils/constants.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/utils/index.js [app-route] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/utils/errors.js [app-route] (ecmascript)");
;
;
async function getFilecoinNetworkType(provider) {
    try {
        const network = await provider.getNetwork();
        const chainId = Number(network.chainId);
        if (chainId === __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["CHAIN_IDS"].mainnet) {
            return 'mainnet';
        } else if (chainId === __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["CHAIN_IDS"].calibration) {
            return 'calibration';
        } else {
            throw (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createError"])('NetworkUtils', 'getFilecoinNetworkType', `Unsupported network: chain ID ${chainId}. Only Filecoin mainnet (${__TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["CHAIN_IDS"].mainnet}) and calibration (${__TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["CHAIN_IDS"].calibration}) are supported.`);
        }
    } catch (error) {
        if (error instanceof Error && error.message.includes('Unsupported network')) {
            throw error;
        }
        throw (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createError"])('NetworkUtils', 'getFilecoinNetworkType', `Failed to detect network: ${error instanceof Error ? error.message : String(error)}`);
    }
} //# sourceMappingURL=network.js.map
}),
"[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/utils/piece.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "constructFindPieceUrl",
    ()=>constructFindPieceUrl,
    "constructPieceUrl",
    ()=>constructPieceUrl
]);
function constructPieceUrl(retrievalEndpoint, pieceCid) {
    const endpoint = retrievalEndpoint.replace(/\/$/, '');
    return `${endpoint}/piece/${pieceCid.toString()}`;
}
function constructFindPieceUrl(apiEndpoint, pieceCid) {
    const endpoint = apiEndpoint.replace(/\/$/, '');
    const params = new URLSearchParams({
        pieceCid: pieceCid.toString()
    });
    return `${endpoint}/pdp/piece?${params.toString()}`;
} //# sourceMappingURL=piece.js.map
}),
"[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/utils/index.js [app-route] (ecmascript) <locals>", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([]);
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/utils/constants.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$eip712$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/utils/eip712.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$epoch$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/utils/epoch.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/utils/errors.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$metadata$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/utils/metadata.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$network$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/utils/network.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$piece$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/utils/piece.js [app-route] (ecmascript)"); //# sourceMappingURL=index.js.map
;
;
;
;
;
;
;
}),
"[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/payments/service.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "PaymentsService",
    ()=>PaymentsService
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f$ethers$2f$lib$2e$esm$2f$ethers$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__ethers$3e$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/ethers/lib.esm/ethers.js [app-route] (ecmascript) <export * as ethers>");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/utils/index.js [app-route] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/utils/constants.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/utils/errors.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$epoch$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/utils/epoch.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$network$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/utils/network.js [app-route] (ecmascript)");
;
;
class PaymentsService {
    _provider;
    _signer;
    _paymentsAddress;
    _usdfcAddress;
    _disableNonceManager;
    _usdfcContract = null;
    _paymentsContract = null;
    constructor(provider, signer, paymentsAddress, usdfcAddress, disableNonceManager){
        this._provider = provider;
        this._signer = signer;
        this._paymentsAddress = paymentsAddress;
        this._usdfcAddress = usdfcAddress;
        this._disableNonceManager = disableNonceManager;
    }
    _getUsdfcContract() {
        if (this._usdfcContract == null) {
            this._usdfcContract = new __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f$ethers$2f$lib$2e$esm$2f$ethers$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__ethers$3e$__["ethers"].Contract(this._usdfcAddress, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["CONTRACT_ABIS"].ERC20, this._signer);
        }
        return this._usdfcContract;
    }
    _getPaymentsContract() {
        if (this._paymentsContract == null) {
            this._paymentsContract = new __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f$ethers$2f$lib$2e$esm$2f$ethers$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__ethers$3e$__["ethers"].Contract(this._paymentsAddress, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["CONTRACT_ABIS"].PAYMENTS, this._signer);
        }
        return this._paymentsContract;
    }
    async _getPermitSignature(amount, deadline, contextName) {
        const signerAddress = await this._signer.getAddress();
        const networkType = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$network$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getFilecoinNetworkType"])(this._provider);
        const chainId = __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["CHAIN_IDS"][networkType];
        const multicall3Address = __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["CONTRACT_ADDRESSES"].MULTICALL3[networkType];
        const multicall = new __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f$ethers$2f$lib$2e$esm$2f$ethers$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__ethers$3e$__["ethers"].Contract(multicall3Address, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["CONTRACT_ABIS"].MULTICALL3, this._provider);
        const erc20Interface = new __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f$ethers$2f$lib$2e$esm$2f$ethers$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__ethers$3e$__["ethers"].Interface(__TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["CONTRACT_ABIS"].ERC20);
        const permitInterface = new __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f$ethers$2f$lib$2e$esm$2f$ethers$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__ethers$3e$__["ethers"].Interface(__TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["CONTRACT_ABIS"].ERC20_PERMIT);
        const calls = [
            {
                target: this._usdfcAddress,
                allowFailure: false,
                callData: erc20Interface.encodeFunctionData('balanceOf', [
                    signerAddress
                ])
            },
            {
                target: this._usdfcAddress,
                allowFailure: false,
                callData: erc20Interface.encodeFunctionData('name')
            },
            {
                target: this._usdfcAddress,
                allowFailure: true,
                callData: permitInterface.encodeFunctionData('version')
            },
            {
                target: this._usdfcAddress,
                allowFailure: false,
                callData: permitInterface.encodeFunctionData('nonces', [
                    signerAddress
                ])
            }
        ];
        let results;
        try {
            results = await multicall.aggregate3.staticCall(calls);
        } catch (error) {
            throw (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createError"])('PaymentsService', contextName, 'Failed to fetch token information for permit. Ensure token contract is reachable.', error);
        }
        let usdfcBalance;
        try {
            const decoded = erc20Interface.decodeFunctionResult('balanceOf', results[0].returnData);
            usdfcBalance = decoded[0];
        } catch (error) {
            throw (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createError"])('PaymentsService', contextName, 'Failed to decode token balance.', error);
        }
        if (usdfcBalance < amount) {
            throw (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createError"])('PaymentsService', contextName, `Insufficient USDFC: have ${usdfcBalance.toString()}, need ${amount.toString()}`);
        }
        let tokenName;
        try {
            const decoded = erc20Interface.decodeFunctionResult('name', results[1].returnData);
            tokenName = decoded[0];
        } catch (error) {
            throw (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createError"])('PaymentsService', contextName, 'Failed to read token name for permit domain. Ensure token contract is reachable.', error);
        }
        let domainVersion = '1';
        if (results[2].success) {
            try {
                const decoded = permitInterface.decodeFunctionResult('version', results[2].returnData);
                const maybeVersion = decoded[0];
                if (typeof maybeVersion === 'string' && maybeVersion.length > 0) {
                    domainVersion = maybeVersion;
                }
            } catch  {}
        }
        let nonce;
        try {
            const decoded = permitInterface.decodeFunctionResult('nonces', results[3].returnData);
            nonce = decoded[0];
        } catch (error) {
            throw (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createError"])('PaymentsService', contextName, 'Token does not appear to support EIP-2612 permit (nonces() unavailable).', error);
        }
        const domain = {
            name: tokenName,
            version: domainVersion,
            chainId,
            verifyingContract: this._usdfcAddress
        };
        const value = {
            owner: signerAddress,
            spender: this._paymentsAddress,
            value: amount,
            nonce,
            deadline
        };
        let signatureHex;
        try {
            signatureHex = await this._signer.signTypedData(domain, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["EIP2612_PERMIT_TYPES"], value);
        } catch (error) {
            throw (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createError"])('PaymentsService', contextName, 'Failed to sign EIP-2612 permit. Ensure your wallet supports typed data signing.', error);
        }
        return __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f$ethers$2f$lib$2e$esm$2f$ethers$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__ethers$3e$__["ethers"].Signature.from(signatureHex);
    }
    async balance(token = __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["TOKENS"].USDFC) {
        if (token !== __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["TOKENS"].USDFC) {
            throw (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createError"])('PaymentsService', 'payments contract balance check', `Token "${token}" is not supported. Currently only USDFC token is supported for payments contract balance queries.`);
        }
        const accountInfo = await this.accountInfo(token);
        return accountInfo.availableFunds;
    }
    async accountInfo(token = __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["TOKENS"].USDFC) {
        if (token !== __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["TOKENS"].USDFC) {
            throw (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createError"])('PaymentsService', 'account info', `Token "${token}" is not supported. Currently only USDFC token is supported.`);
        }
        const signerAddress = await this._signer.getAddress();
        const paymentsContract = this._getPaymentsContract();
        let accountData;
        try {
            accountData = await paymentsContract.accounts(this._usdfcAddress, signerAddress);
        } catch (contractCallError) {
            throw (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createError"])('PaymentsService', 'account info', 'Failed to read account information from payments contract. This could indicate the contract is not properly deployed, the ABI is incorrect, or there are network connectivity issues.', contractCallError);
        }
        const [funds, lockupCurrent, lockupRate, lockupLastSettledAt] = accountData;
        const currentEpoch = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$epoch$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getCurrentEpoch"])(this._provider);
        const epochsSinceSettlement = currentEpoch - BigInt(lockupLastSettledAt);
        const actualLockup = BigInt(lockupCurrent) + BigInt(lockupRate) * epochsSinceSettlement;
        const availableFunds = BigInt(funds) - actualLockup;
        return {
            funds: BigInt(funds),
            lockupCurrent: BigInt(lockupCurrent),
            lockupRate: BigInt(lockupRate),
            lockupLastSettledAt: BigInt(lockupLastSettledAt),
            availableFunds: availableFunds > 0n ? availableFunds : 0n
        };
    }
    async walletBalance(token) {
        if (token == null || token === __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["TOKENS"].FIL) {
            try {
                const address = await this._signer.getAddress();
                const balance = await this._provider.getBalance(address);
                return balance;
            } catch (error) {
                throw (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createError"])('PaymentsService', 'wallet FIL balance check', 'Unable to retrieve FIL balance from wallet. This could be due to network connectivity issues, RPC endpoint problems, or wallet connection issues.', error);
            }
        }
        if (token === __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["TOKENS"].USDFC) {
            try {
                const address = await this._signer.getAddress();
                const usdfcContract = this._getUsdfcContract();
                const balance = await usdfcContract.balanceOf(address);
                return balance;
            } catch (error) {
                throw (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createError"])('PaymentsService', 'wallet USDFC balance check', 'Unexpected error while checking USDFC token balance in wallet.', error);
            }
        }
        throw (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createError"])('PaymentsService', 'wallet balance', `Token "${token}" is not supported. Currently only FIL and USDFC tokens are supported.`);
    }
    decimals(_token = __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["TOKENS"].USDFC) {
        return 18;
    }
    async allowance(spender, token = __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["TOKENS"].USDFC) {
        if (token !== __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["TOKENS"].USDFC) {
            throw (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createError"])('PaymentsService', 'allowance', `Token "${token}" is not supported. Currently only USDFC token is supported.`);
        }
        const signerAddress = await this._signer.getAddress();
        const usdfcContract = this._getUsdfcContract();
        try {
            const currentAllowance = await usdfcContract.allowance(signerAddress, spender);
            return currentAllowance;
        } catch (error) {
            throw (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createError"])('PaymentsService', 'allowance check', 'Failed to check token allowance. This could indicate network connectivity issues or an invalid spender address.', error);
        }
    }
    async approve(spender, amount, token = __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["TOKENS"].USDFC) {
        if (token !== __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["TOKENS"].USDFC) {
            throw (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createError"])('PaymentsService', 'approve', `Token "${token}" is not supported. Currently only USDFC token is supported.`);
        }
        const approveAmount = typeof amount === 'bigint' ? amount : BigInt(amount);
        if (approveAmount < 0n) {
            throw (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createError"])('PaymentsService', 'approve', 'Approval amount cannot be negative');
        }
        const signerAddress = await this._signer.getAddress();
        const usdfcContract = this._getUsdfcContract();
        const txOptions = {};
        if (this._disableNonceManager) {
            const approvalNonce = await this._provider.getTransactionCount(signerAddress, 'pending');
            txOptions.nonce = approvalNonce;
        }
        try {
            const approveTx = await usdfcContract.approve(spender, approveAmount, txOptions);
            return approveTx;
        } catch (error) {
            throw (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createError"])('PaymentsService', 'approve', `Failed to approve ${spender} to spend ${approveAmount.toString()} ${token}`, error);
        }
    }
    async approveService(service, rateAllowance, lockupAllowance, maxLockupPeriod, token = __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["TOKENS"].USDFC) {
        if (token !== __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["TOKENS"].USDFC) {
            throw (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createError"])('PaymentsService', 'approveService', `Token "${token}" is not supported. Currently only USDFC token is supported.`);
        }
        const rateAllowanceBigint = typeof rateAllowance === 'bigint' ? rateAllowance : BigInt(rateAllowance);
        const lockupAllowanceBigint = typeof lockupAllowance === 'bigint' ? lockupAllowance : BigInt(lockupAllowance);
        const maxLockupPeriodBigint = typeof maxLockupPeriod === 'bigint' ? maxLockupPeriod : BigInt(maxLockupPeriod);
        if (rateAllowanceBigint < 0n || lockupAllowanceBigint < 0n || maxLockupPeriodBigint < 0n) {
            throw (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createError"])('PaymentsService', 'approveService', 'Allowance values cannot be negative');
        }
        const signerAddress = await this._signer.getAddress();
        const paymentsContract = this._getPaymentsContract();
        const txOptions = {};
        if (this._disableNonceManager) {
            const currentNonce = await this._provider.getTransactionCount(signerAddress, 'pending');
            txOptions.nonce = currentNonce;
        }
        try {
            const approveTx = await paymentsContract.setOperatorApproval(this._usdfcAddress, service, true, rateAllowanceBigint, lockupAllowanceBigint, maxLockupPeriodBigint, txOptions);
            return approveTx;
        } catch (error) {
            throw (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createError"])('PaymentsService', 'approveService', `Failed to approve service ${service} as operator for ${token}`, error);
        }
    }
    async revokeService(service, token = __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["TOKENS"].USDFC) {
        if (token !== __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["TOKENS"].USDFC) {
            throw (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createError"])('PaymentsService', 'revokeService', `Token "${token}" is not supported. Currently only USDFC token is supported.`);
        }
        const signerAddress = await this._signer.getAddress();
        const paymentsContract = this._getPaymentsContract();
        const txOptions = {};
        if (this._disableNonceManager) {
            const currentNonce = await this._provider.getTransactionCount(signerAddress, 'pending');
            txOptions.nonce = currentNonce;
        }
        try {
            const revokeTx = await paymentsContract.setOperatorApproval(this._usdfcAddress, service, false, 0n, 0n, 0n, txOptions);
            return revokeTx;
        } catch (error) {
            throw (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createError"])('PaymentsService', 'revokeService', `Failed to revoke service ${service} as operator for ${token}`, error);
        }
    }
    async serviceApproval(service, token = __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["TOKENS"].USDFC) {
        if (token !== __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["TOKENS"].USDFC) {
            throw (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createError"])('PaymentsService', 'serviceApproval', `Token "${token}" is not supported. Currently only USDFC token is supported.`);
        }
        const signerAddress = await this._signer.getAddress();
        const paymentsContract = this._getPaymentsContract();
        try {
            const approval = await paymentsContract.operatorApprovals(this._usdfcAddress, signerAddress, service);
            return {
                isApproved: approval[0],
                rateAllowance: approval[1],
                lockupAllowance: approval[2],
                rateUsed: approval[3],
                lockupUsed: approval[4],
                maxLockupPeriod: approval[5]
            };
        } catch (error) {
            throw (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createError"])('PaymentsService', 'serviceApproval', `Failed to check service approval status for ${service}`, error);
        }
    }
    async deposit(amount, token = __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["TOKENS"].USDFC, options) {
        if (token !== __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["TOKENS"].USDFC) {
            throw (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createError"])('PaymentsService', 'deposit', `Unsupported token: ${token}`);
        }
        const depositAmountBigint = typeof amount === 'bigint' ? amount : BigInt(amount);
        if (depositAmountBigint <= 0n) {
            throw (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createError"])('PaymentsService', 'deposit', 'Invalid amount');
        }
        const signerAddress = await this._signer.getAddress();
        const depositTo = options?.to ?? signerAddress;
        const usdfcContract = this._getUsdfcContract();
        const paymentsContract = this._getPaymentsContract();
        const usdfcBalance = await usdfcContract.balanceOf(signerAddress);
        if (usdfcBalance < depositAmountBigint) {
            throw (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createError"])('PaymentsService', 'deposit', `Insufficient USDFC: have ${BigInt(usdfcBalance).toString()}, need ${depositAmountBigint.toString()}`);
        }
        const currentAllowance = await this.allowance(this._paymentsAddress, token);
        options?.onAllowanceCheck?.(currentAllowance, depositAmountBigint);
        if (currentAllowance < depositAmountBigint) {
            const approveTx = await this.approve(this._paymentsAddress, depositAmountBigint, token);
            options?.onApprovalTransaction?.(approveTx);
            const approvalReceipt = await approveTx.wait(__TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["TIMING_CONSTANTS"].TRANSACTION_CONFIRMATIONS);
            if (approvalReceipt != null) {
                options?.onApprovalConfirmed?.(approvalReceipt);
            }
        }
        options?.onDepositStarting?.();
        const txOptions = {};
        if (this._disableNonceManager) {
            const currentNonce = await this._provider.getTransactionCount(signerAddress, 'pending');
            txOptions.nonce = currentNonce;
        }
        const depositTx = await paymentsContract.deposit(this._usdfcAddress, depositTo, depositAmountBigint, txOptions);
        return depositTx;
    }
    async depositWithPermit(amount, token = __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["TOKENS"].USDFC, deadline) {
        if (token !== __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["TOKENS"].USDFC) {
            throw (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createError"])('PaymentsService', 'depositWithPermit', `Unsupported token: ${token}`);
        }
        const depositAmountBigint = typeof amount === 'bigint' ? amount : BigInt(amount);
        if (depositAmountBigint <= 0n) {
            throw (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createError"])('PaymentsService', 'depositWithPermit', 'Invalid amount');
        }
        const signerAddress = await this._signer.getAddress();
        const paymentsContract = this._getPaymentsContract();
        const permitDeadline = deadline == null ? BigInt(Math.floor(Date.now() / 1000) + __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["TIMING_CONSTANTS"].PERMIT_DEADLINE_DURATION) : BigInt(deadline);
        const signature = await this._getPermitSignature(depositAmountBigint, permitDeadline, 'depositWithPermit');
        const txOptions = {};
        if (this._disableNonceManager) {
            const currentNonce = await this._provider.getTransactionCount(signerAddress, 'pending');
            txOptions.nonce = currentNonce;
        }
        try {
            const tx = await paymentsContract.depositWithPermit(this._usdfcAddress, signerAddress, depositAmountBigint, permitDeadline, signature.v, signature.r, signature.s, txOptions);
            return tx;
        } catch (error) {
            throw (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createError"])('PaymentsService', 'depositWithPermit', 'Failed to execute depositWithPermit on Payments contract.', error);
        }
    }
    async depositWithPermitAndApproveOperator(amount, operator, rateAllowance, lockupAllowance, maxLockupPeriod, token = __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["TOKENS"].USDFC, deadline) {
        if (token !== __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["TOKENS"].USDFC) {
            throw (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createError"])('PaymentsService', 'depositWithPermitAndApproveOperator', `Unsupported token: ${token}`);
        }
        const depositAmountBigint = typeof amount === 'bigint' ? amount : BigInt(amount);
        if (depositAmountBigint <= 0n) {
            throw (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createError"])('PaymentsService', 'depositWithPermitAndApproveOperator', 'Invalid amount');
        }
        const rateAllowanceBigint = typeof rateAllowance === 'bigint' ? rateAllowance : BigInt(rateAllowance);
        const lockupAllowanceBigint = typeof lockupAllowance === 'bigint' ? lockupAllowance : BigInt(lockupAllowance);
        const maxLockupPeriodBigint = typeof maxLockupPeriod === 'bigint' ? maxLockupPeriod : BigInt(maxLockupPeriod);
        if (rateAllowanceBigint < 0n || lockupAllowanceBigint < 0n || maxLockupPeriodBigint < 0n) {
            throw (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createError"])('PaymentsService', 'depositWithPermitAndApproveOperator', 'Allowance values cannot be negative');
        }
        const signerAddress = await this._signer.getAddress();
        const paymentsContract = this._getPaymentsContract();
        const permitDeadline = deadline == null ? BigInt(Math.floor(Date.now() / 1000) + __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["TIMING_CONSTANTS"].PERMIT_DEADLINE_DURATION) : BigInt(deadline);
        const signature = await this._getPermitSignature(depositAmountBigint, permitDeadline, 'depositWithPermitAndApproveOperator');
        const txOptions = {};
        if (this._disableNonceManager) {
            const currentNonce = await this._provider.getTransactionCount(signerAddress, 'pending');
            txOptions.nonce = currentNonce;
        }
        try {
            const tx = await paymentsContract.depositWithPermitAndApproveOperator(this._usdfcAddress, signerAddress, depositAmountBigint, permitDeadline, signature.v, signature.r, signature.s, operator, rateAllowanceBigint, lockupAllowanceBigint, maxLockupPeriodBigint, txOptions);
            return tx;
        } catch (error) {
            throw (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createError"])('PaymentsService', 'depositWithPermitAndApproveOperator', 'Failed to execute depositWithPermitAndApproveOperator on Payments contract.', error);
        }
    }
    async withdraw(amount, token = __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["TOKENS"].USDFC) {
        if (token !== __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["TOKENS"].USDFC) {
            throw (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createError"])('PaymentsService', 'withdraw', `Unsupported token: ${token}`);
        }
        const withdrawAmountBigint = typeof amount === 'bigint' ? amount : BigInt(amount);
        if (withdrawAmountBigint <= 0n) {
            throw (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createError"])('PaymentsService', 'withdraw', 'Invalid amount');
        }
        const signerAddress = await this._signer.getAddress();
        const paymentsContract = this._getPaymentsContract();
        const accountInfo = await this.accountInfo(token);
        if (accountInfo.availableFunds < withdrawAmountBigint) {
            throw (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createError"])('PaymentsService', 'withdraw', `Insufficient available balance: have ${accountInfo.availableFunds.toString()}, need ${withdrawAmountBigint.toString()}`);
        }
        const txOptions = {};
        if (this._disableNonceManager) {
            const currentNonce = await this._provider.getTransactionCount(signerAddress, 'pending');
            txOptions.nonce = currentNonce;
        }
        const tx = await paymentsContract.withdraw(this._usdfcAddress, withdrawAmountBigint, txOptions);
        return tx;
    }
    async settle(railId, untilEpoch) {
        const railIdBigint = typeof railId === 'bigint' ? railId : BigInt(railId);
        const [signerAddress, currentEpoch] = await Promise.all([
            this._signer.getAddress(),
            untilEpoch == null ? (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$epoch$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getCurrentEpoch"])(this._provider) : Promise.resolve(null)
        ]);
        const untilEpochBigint = untilEpoch == null ? currentEpoch : BigInt(untilEpoch);
        const paymentsContract = this._getPaymentsContract();
        const txOptions = {
            value: __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["SETTLEMENT_FEE"]
        };
        if (this._disableNonceManager) {
            const currentNonce = await this._provider.getTransactionCount(signerAddress, 'pending');
            txOptions.nonce = currentNonce;
        }
        try {
            const tx = await paymentsContract.settleRail(railIdBigint, untilEpochBigint, txOptions);
            return tx;
        } catch (error) {
            throw (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createError"])('PaymentsService', 'settle', `Failed to settle rail ${railIdBigint.toString()} up to epoch ${untilEpochBigint.toString()}`, error);
        }
    }
    async getSettlementAmounts(railId, untilEpoch) {
        const railIdBigint = typeof railId === 'bigint' ? railId : BigInt(railId);
        const currentEpoch = untilEpoch == null ? await (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$epoch$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getCurrentEpoch"])(this._provider) : null;
        const untilEpochBigint = untilEpoch == null ? currentEpoch : BigInt(untilEpoch);
        const paymentsContract = this._getPaymentsContract();
        try {
            const result = await paymentsContract.settleRail.staticCall(railIdBigint, untilEpochBigint);
            return {
                totalSettledAmount: result[0],
                totalNetPayeeAmount: result[1],
                totalOperatorCommission: result[2],
                totalNetworkFee: result[3],
                finalSettledEpoch: result[4],
                note: result[5]
            };
        } catch (error) {
            throw (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createError"])('PaymentsService', 'getSettlementAmounts', `Failed to get settlement amounts for rail ${railIdBigint.toString()} up to epoch ${untilEpochBigint.toString()}`, error);
        }
    }
    async settleTerminatedRail(railId) {
        const railIdBigint = typeof railId === 'bigint' ? railId : BigInt(railId);
        const signerAddress = await this._signer.getAddress();
        const paymentsContract = this._getPaymentsContract();
        const txOptions = {};
        if (this._disableNonceManager) {
            const currentNonce = await this._provider.getTransactionCount(signerAddress, 'pending');
            txOptions.nonce = currentNonce;
        }
        try {
            const tx = await paymentsContract.settleTerminatedRailWithoutValidation(railIdBigint, txOptions);
            return tx;
        } catch (error) {
            throw (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createError"])('PaymentsService', 'settleTerminatedRail', `Failed to settle terminated rail ${railIdBigint.toString()}`, error);
        }
    }
    async getRail(railId) {
        const railIdBigint = typeof railId === 'bigint' ? railId : BigInt(railId);
        const paymentsContract = this._getPaymentsContract();
        try {
            const rail = await paymentsContract.getRail(railIdBigint);
            return {
                token: rail.token,
                from: rail.from,
                to: rail.to,
                operator: rail.operator,
                validator: rail.validator,
                paymentRate: rail.paymentRate,
                lockupPeriod: rail.lockupPeriod,
                lockupFixed: rail.lockupFixed,
                settledUpTo: rail.settledUpTo,
                endEpoch: rail.endEpoch,
                commissionRateBps: rail.commissionRateBps,
                serviceFeeRecipient: rail.serviceFeeRecipient
            };
        } catch (error) {
            if (error.message?.includes('RailInactiveOrSettled')) {
                throw (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createError"])('PaymentsService', 'getRail', `Rail ${railIdBigint.toString()} does not exist or is inactive`);
            }
            throw (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createError"])('PaymentsService', 'getRail', `Failed to get rail ${railIdBigint.toString()}`, error);
        }
    }
    async settleAuto(railId, untilEpoch) {
        const railIdBigint = typeof railId === 'bigint' ? railId : BigInt(railId);
        const rail = await this.getRail(railIdBigint);
        if (rail.endEpoch > 0n) {
            return await this.settleTerminatedRail(railIdBigint);
        } else {
            return await this.settle(railIdBigint, untilEpoch);
        }
    }
    async getRailsAsPayer(token = __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["TOKENS"].USDFC) {
        if (token !== __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["TOKENS"].USDFC) {
            throw (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createError"])('PaymentsService', 'getRailsAsPayer', `Token "${token}" is not supported. Currently only USDFC token is supported.`);
        }
        const signerAddress = await this._signer.getAddress();
        const paymentsContract = this._getPaymentsContract();
        try {
            const [rails] = await paymentsContract.getRailsForPayerAndToken(signerAddress, this._usdfcAddress, 0n, 0n);
            return rails.map((rail)=>({
                    railId: Number(rail.railId),
                    isTerminated: rail.isTerminated,
                    endEpoch: Number(rail.endEpoch)
                }));
        } catch (error) {
            throw (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createError"])('PaymentsService', 'getRailsAsPayer', 'Failed to get rails where wallet is payer', error);
        }
    }
    async getRailsAsPayee(token = __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["TOKENS"].USDFC) {
        if (token !== __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["TOKENS"].USDFC) {
            throw (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createError"])('PaymentsService', 'getRailsAsPayee', `Token "${token}" is not supported. Currently only USDFC token is supported.`);
        }
        const signerAddress = await this._signer.getAddress();
        const paymentsContract = this._getPaymentsContract();
        try {
            const [rails] = await paymentsContract.getRailsForPayeeAndToken(signerAddress, this._usdfcAddress, 0n, 0n);
            return rails.map((rail)=>({
                    railId: Number(rail.railId),
                    isTerminated: rail.isTerminated,
                    endEpoch: Number(rail.endEpoch)
                }));
        } catch (error) {
            throw (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createError"])('PaymentsService', 'getRailsAsPayee', 'Failed to get rails where wallet is payee', error);
        }
    }
} //# sourceMappingURL=service.js.map
}),
"[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/payments/index.js [app-route] (ecmascript) <locals>", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([]);
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$payments$2f$service$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/payments/service.js [app-route] (ecmascript)"); //# sourceMappingURL=index.js.map
;
}),
"[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/pdp/auth.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "PDPAuthHelper",
    ()=>PDPAuthHelper
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$core$2f$dist$2f$src$2f$piece$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-core/dist/src/piece.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f$ethers$2f$lib$2e$esm$2f$ethers$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__ethers$3e$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/ethers/lib.esm/ethers.js [app-route] (ecmascript) <export * as ethers>");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/utils/constants.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$eip712$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/utils/eip712.js [app-route] (ecmascript)");
;
;
;
;
class PDPAuthHelper {
    signer;
    domain;
    WITH_CDN_METADATA = {
        key: __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["METADATA_KEYS"].WITH_CDN,
        value: ''
    };
    constructor(serviceContractAddress, signer, chainId){
        this.signer = signer;
        this.domain = {
            name: 'FilecoinWarmStorageService',
            version: '1',
            chainId: Number(chainId),
            verifyingContract: serviceContractAddress
        };
    }
    getUnderlyingSigner() {
        if ('signer' in this.signer && this.signer.constructor.name === 'NonceManager') {
            return this.signer.signer;
        }
        return this.signer;
    }
    async isMetaMaskSigner() {
        try {
            const actualSigner = this.getUnderlyingSigner();
            if (actualSigner.constructor.name === 'Wallet') {
                return false;
            }
            const provider = actualSigner.provider;
            if (provider == null) {
                return false;
            }
            if ('_eip1193Provider' in provider) {
                return true;
            }
            if (provider instanceof __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f$ethers$2f$lib$2e$esm$2f$ethers$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__ethers$3e$__["ethers"].JsonRpcProvider || provider instanceof __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f$ethers$2f$lib$2e$esm$2f$ethers$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__ethers$3e$__["ethers"].WebSocketProvider) {
                return false;
            }
            if ('request' in provider && typeof provider.request === 'function') {
                return true;
            }
        } catch  {}
        return false;
    }
    async signWithMetaMask(types, value) {
        const provider = this.signer.provider;
        if (provider == null) {
            throw new Error('No provider available');
        }
        const signerAddress = await this.signer.getAddress();
        let primaryType = '';
        for (const typeName of Object.keys(types)){
            if (typeName !== 'Cid' && typeName !== 'PieceData') {
                primaryType = typeName;
                break;
            }
        }
        const typedData = {
            types: {
                EIP712Domain: [
                    {
                        name: 'name',
                        type: 'string'
                    },
                    {
                        name: 'version',
                        type: 'string'
                    },
                    {
                        name: 'chainId',
                        type: 'uint256'
                    },
                    {
                        name: 'verifyingContract',
                        type: 'address'
                    }
                ],
                ...types
            },
            primaryType,
            domain: this.domain,
            message: value
        };
        let eip1193Provider;
        if ('_eip1193Provider' in provider) {
            eip1193Provider = provider._eip1193Provider;
        } else if ('request' in provider) {
            eip1193Provider = provider;
        } else {
            eip1193Provider = provider;
        }
        let signature;
        if (eip1193Provider != null && 'request' in eip1193Provider) {
            signature = await eip1193Provider.request({
                method: 'eth_signTypedData_v4',
                params: [
                    signerAddress,
                    JSON.stringify(typedData)
                ]
            });
        } else {
            signature = await provider.send('eth_signTypedData_v4', [
                signerAddress,
                JSON.stringify(typedData)
            ]);
        }
        return signature;
    }
    async signCreateDataSet(clientDataSetId, payee, metadata = []) {
        let signature;
        const types = {
            CreateDataSet: __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$eip712$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["EIP712_TYPES"].CreateDataSet,
            MetadataEntry: __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$eip712$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["EIP712_TYPES"].MetadataEntry
        };
        const useMetaMask = await this.isMetaMaskSigner();
        if (useMetaMask) {
            const value = {
                clientDataSetId: clientDataSetId.toString(),
                metadata,
                payee
            };
            signature = await this.signWithMetaMask(types, value);
        } else {
            const value = {
                clientDataSetId,
                metadata,
                payee
            };
            const actualSigner = this.getUnderlyingSigner();
            signature = await actualSigner.signTypedData(this.domain, types, value);
        }
        const sig = __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f$ethers$2f$lib$2e$esm$2f$ethers$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__ethers$3e$__["ethers"].Signature.from(signature);
        const signedData = __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f$ethers$2f$lib$2e$esm$2f$ethers$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__ethers$3e$__["ethers"].TypedDataEncoder.hash(this.domain, types, {
            clientDataSetId,
            metadata,
            payee
        });
        return {
            signature,
            v: sig.v,
            r: sig.r,
            s: sig.s,
            signedData
        };
    }
    async signAddPieces(clientDataSetId, nonce, pieceDataArray, metadata = []) {
        if (metadata.length === 0) {
            metadata = Array(pieceDataArray.length).fill([]);
        } else if (metadata.length !== pieceDataArray.length) {
            throw new Error('metadata length must match pieceDataArray length');
        }
        const pieceMetadata = [];
        const formattedPieceData = [];
        for(let i = 0; i < pieceDataArray.length; i++){
            const piece = pieceDataArray[i];
            const pieceCid = typeof piece === 'string' ? (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$core$2f$dist$2f$src$2f$piece$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["asPieceCID"])(piece) : piece;
            if (pieceCid == null) {
                throw new Error(`Invalid PieceCID: ${String(pieceCid)}`);
            }
            formattedPieceData.push({
                data: pieceCid.bytes
            });
            pieceMetadata.push({
                pieceIndex: i,
                metadata: metadata[i]
            });
        }
        const types = {
            AddPieces: __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$eip712$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["EIP712_TYPES"].AddPieces,
            Cid: __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$eip712$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["EIP712_TYPES"].Cid,
            PieceMetadata: __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$eip712$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["EIP712_TYPES"].PieceMetadata,
            MetadataEntry: __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$eip712$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["EIP712_TYPES"].MetadataEntry
        };
        let signature;
        const useMetaMask = await this.isMetaMaskSigner();
        if (useMetaMask) {
            const value = {
                clientDataSetId: clientDataSetId.toString(),
                nonce: nonce.toString(),
                pieceData: formattedPieceData.map((item)=>({
                        data: __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f$ethers$2f$lib$2e$esm$2f$ethers$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__ethers$3e$__["ethers"].hexlify(item.data)
                    })),
                pieceMetadata: pieceMetadata
            };
            signature = await this.signWithMetaMask(types, value);
        } else {
            const value = {
                clientDataSetId,
                nonce,
                pieceData: formattedPieceData,
                pieceMetadata: pieceMetadata
            };
            const actualSigner = this.getUnderlyingSigner();
            signature = await actualSigner.signTypedData(this.domain, types, value);
        }
        const sig = __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f$ethers$2f$lib$2e$esm$2f$ethers$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__ethers$3e$__["ethers"].Signature.from(signature);
        const signedData = __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f$ethers$2f$lib$2e$esm$2f$ethers$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__ethers$3e$__["ethers"].TypedDataEncoder.hash(this.domain, types, {
            clientDataSetId,
            nonce,
            pieceData: formattedPieceData,
            pieceMetadata: pieceMetadata
        });
        return {
            signature,
            v: sig.v,
            r: sig.r,
            s: sig.s,
            signedData
        };
    }
    async signSchedulePieceRemovals(clientDataSetId, pieceIds) {
        let signature;
        const useMetaMask = await this.isMetaMaskSigner();
        if (useMetaMask) {
            const value = {
                clientDataSetId: clientDataSetId.toString(),
                pieceIds: pieceIds.map((id)=>id.toString())
            };
            signature = await this.signWithMetaMask({
                SchedulePieceRemovals: __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$eip712$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["EIP712_TYPES"].SchedulePieceRemovals
            }, value);
        } else {
            const value = {
                clientDataSetId,
                pieceIds
            };
            const actualSigner = this.getUnderlyingSigner();
            signature = await actualSigner.signTypedData(this.domain, {
                SchedulePieceRemovals: __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$eip712$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["EIP712_TYPES"].SchedulePieceRemovals
            }, value);
        }
        const sig = __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f$ethers$2f$lib$2e$esm$2f$ethers$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__ethers$3e$__["ethers"].Signature.from(signature);
        const signedData = __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f$ethers$2f$lib$2e$esm$2f$ethers$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__ethers$3e$__["ethers"].TypedDataEncoder.hash(this.domain, {
            SchedulePieceRemovals: __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$eip712$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["EIP712_TYPES"].SchedulePieceRemovals
        }, {
            clientDataSetId,
            pieceIds
        });
        return {
            signature,
            v: sig.v,
            r: sig.r,
            s: sig.s,
            signedData
        };
    }
    async signDeleteDataSet(clientDataSetId) {
        let signature;
        const useMetaMask = await this.isMetaMaskSigner();
        if (useMetaMask) {
            const value = {
                clientDataSetId: clientDataSetId.toString()
            };
            signature = await this.signWithMetaMask({
                DeleteDataSet: __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$eip712$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["EIP712_TYPES"].DeleteDataSet
            }, value);
        } else {
            const value = {
                clientDataSetId
            };
            const actualSigner = this.getUnderlyingSigner();
            signature = await actualSigner.signTypedData(this.domain, {
                DeleteDataSet: __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$eip712$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["EIP712_TYPES"].DeleteDataSet
            }, value);
        }
        const sig = __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f$ethers$2f$lib$2e$esm$2f$ethers$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__ethers$3e$__["ethers"].Signature.from(signature);
        const signedData = __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f$ethers$2f$lib$2e$esm$2f$ethers$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__ethers$3e$__["ethers"].TypedDataEncoder.hash(this.domain, {
            DeleteDataSet: __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$eip712$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["EIP712_TYPES"].DeleteDataSet
        }, {
            clientDataSetId
        });
        return {
            signature,
            v: sig.v,
            r: sig.r,
            s: sig.s,
            signedData
        };
    }
    async getSignerAddress() {
        return await this.signer.getAddress();
    }
} //# sourceMappingURL=auth.js.map
}),
"[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/pdp/validation.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "asDataSetData",
    ()=>asDataSetData,
    "asDataSetPieceData",
    ()=>asDataSetPieceData,
    "isDataSetCreationStatusResponse",
    ()=>isDataSetCreationStatusResponse,
    "isFindPieceResponse",
    ()=>isFindPieceResponse,
    "isPieceAdditionStatusResponse",
    ()=>isPieceAdditionStatusResponse,
    "isPieceStatusResponse",
    ()=>isPieceStatusResponse,
    "validateDataSetCreationStatusResponse",
    ()=>validateDataSetCreationStatusResponse,
    "validateFindPieceResponse",
    ()=>validateFindPieceResponse,
    "validatePieceAdditionStatusResponse",
    ()=>validatePieceAdditionStatusResponse,
    "validatePieceDeleteResponse",
    ()=>validatePieceDeleteResponse,
    "validatePieceStatusResponse",
    ()=>validatePieceStatusResponse
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$core$2f$dist$2f$src$2f$piece$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-core/dist/src/piece.js [app-route] (ecmascript)");
;
function isDataSetCreationStatusResponse(value) {
    if (typeof value !== 'object' || value == null) {
        return false;
    }
    const obj = value;
    if (typeof obj.createMessageHash !== 'string') {
        return false;
    }
    if (typeof obj.dataSetCreated !== 'boolean') {
        return false;
    }
    if (typeof obj.service !== 'string') {
        return false;
    }
    if (typeof obj.txStatus !== 'string') {
        return false;
    }
    if (obj.ok !== null && typeof obj.ok !== 'boolean') {
        return false;
    }
    if (obj.dataSetId !== undefined && typeof obj.dataSetId !== 'number') {
        return false;
    }
    return true;
}
function isPieceAdditionStatusResponse(value) {
    if (typeof value !== 'object' || value == null) {
        return false;
    }
    const obj = value;
    if (typeof obj.txHash !== 'string') {
        return false;
    }
    if (typeof obj.txStatus !== 'string') {
        return false;
    }
    if (typeof obj.dataSetId !== 'number') {
        return false;
    }
    if (typeof obj.pieceCount !== 'number') {
        return false;
    }
    if (obj.addMessageOk !== null && typeof obj.addMessageOk !== 'boolean') {
        return false;
    }
    if (obj.confirmedPieceIds !== undefined) {
        if (!Array.isArray(obj.confirmedPieceIds)) {
            return false;
        }
        for (const id of obj.confirmedPieceIds){
            if (typeof id !== 'number') {
                return false;
            }
        }
    }
    return true;
}
function isFindPieceResponse(value) {
    if (typeof value !== 'object' || value == null) {
        return false;
    }
    const obj = value;
    if (typeof obj.pieceCid !== 'string') {
        return false;
    }
    if ((0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$core$2f$dist$2f$src$2f$piece$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["asPieceCID"])(obj.pieceCid) == null) {
        return false;
    }
    return true;
}
function validateDataSetCreationStatusResponse(value) {
    if (!isDataSetCreationStatusResponse(value)) {
        throw new Error('Invalid data set creation status response format');
    }
    return value;
}
function validatePieceDeleteResponse(value) {
    if (typeof value !== 'object' || value == null) {
        throw new Error('Invalid piece delete response format');
    }
    const obj = value;
    if (typeof obj.txHash !== 'string') {
        throw new Error('Invalid piece delete response format');
    }
    return {
        txHash: obj.txHash
    };
}
function validatePieceAdditionStatusResponse(value) {
    if (!isPieceAdditionStatusResponse(value)) {
        throw new Error('Invalid piece addition status response format');
    }
    return value;
}
function validateFindPieceResponse(value) {
    if (!isFindPieceResponse(value)) {
        if (typeof value === 'object' && value != null) {
            const obj = value;
            const cidStr = obj.pieceCid ?? obj.piece_cid;
            if (cidStr != null && (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$core$2f$dist$2f$src$2f$piece$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["asPieceCID"])(cidStr) == null) {
                throw new Error('Invalid find piece response: pieceCid is not a valid PieceCID');
            }
        }
        throw new Error('Invalid find piece response format');
    }
    const obj = value;
    const cidStr = obj.pieceCid ?? obj.piece_cid;
    const pieceCid = (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$core$2f$dist$2f$src$2f$piece$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["asPieceCID"])(cidStr);
    if (pieceCid == null) {
        throw new Error('Invalid find piece response: pieceCid is not a valid PieceCID');
    }
    return {
        pieceCid
    };
}
function isPieceStatusResponse(value) {
    if (typeof value !== 'object' || value == null) {
        return false;
    }
    const obj = value;
    if (typeof obj.pieceCid !== 'string') {
        return false;
    }
    if (typeof obj.status !== 'string') {
        return false;
    }
    if (typeof obj.indexed !== 'boolean') {
        return false;
    }
    if (typeof obj.advertised !== 'boolean') {
        return false;
    }
    if (typeof obj.retrieved !== 'boolean') {
        return false;
    }
    if (obj.retrievedAt !== undefined && typeof obj.retrievedAt !== 'string') {
        return false;
    }
    return true;
}
function validatePieceStatusResponse(value) {
    if (!isPieceStatusResponse(value)) {
        throw new Error('Invalid piece status response format');
    }
    return value;
}
function asDataSetPieceData(value) {
    if (typeof value !== 'object' || value == null) {
        return null;
    }
    const obj = value;
    if (typeof obj.pieceId !== 'number') {
        return null;
    }
    if (typeof obj.pieceCid !== 'string') {
        return null;
    }
    if (typeof obj.subPieceCid !== 'string') {
        return null;
    }
    if (typeof obj.subPieceOffset !== 'number') {
        return null;
    }
    const pieceCid = (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$core$2f$dist$2f$src$2f$piece$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["asPieceCID"])(obj.pieceCid);
    const subPieceCid = (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$core$2f$dist$2f$src$2f$piece$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["asPieceCID"])(obj.subPieceCid);
    if (pieceCid == null || subPieceCid == null) {
        return null;
    }
    return {
        pieceId: obj.pieceId,
        pieceCid,
        subPieceCid,
        subPieceOffset: obj.subPieceOffset
    };
}
function asDataSetData(value) {
    if (typeof value !== 'object' || value == null) {
        return null;
    }
    const obj = value;
    if (typeof obj.id !== 'number') {
        return null;
    }
    if (!Array.isArray(obj.pieces)) {
        return null;
    }
    const convertedPieces = [];
    for (const piece of obj.pieces){
        const convertedPiece = asDataSetPieceData(piece);
        if (convertedPiece == null) {
            return null;
        }
        convertedPieces.push(convertedPiece);
    }
    if (typeof obj.nextChallengeEpoch !== 'number') {
        return null;
    }
    return {
        id: obj.id,
        pieces: convertedPieces,
        nextChallengeEpoch: obj.nextChallengeEpoch
    };
} //# sourceMappingURL=validation.js.map
}),
"[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/pdp/server.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "PDPServer",
    ()=>PDPServer
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$core$2f$dist$2f$src$2f$piece$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-core/dist/src/piece.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$core$2f$dist$2f$src$2f$sp$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-core/dist/src/sp.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$core$2f$dist$2f$src$2f$utils$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-core/dist/src/utils/index.js [app-route] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$core$2f$dist$2f$src$2f$utils$2f$rand$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-core/dist/src/utils/rand.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f$ethers$2f$lib$2e$esm$2f$ethers$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__ethers$3e$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/ethers/lib.esm/ethers.js [app-route] (ecmascript) <export * as ethers>");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$metadata$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/utils/metadata.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$piece$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/utils/piece.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$pdp$2f$validation$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/pdp/validation.js [app-route] (ecmascript)");
;
;
;
;
;
;
;
;
class PDPServer {
    _serviceURL;
    _authHelper;
    constructor(authHelper, serviceURL){
        if (serviceURL.trim() === '') {
            throw new Error('PDP service URL is required');
        }
        this._serviceURL = serviceURL.replace(/\/$/, '');
        this._authHelper = authHelper;
    }
    async createDataSet(clientDataSetId, payee, payer, metadata, recordKeeper) {
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$metadata$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["validateDataSetMetadata"])(metadata);
        const authData = await this.getAuthHelper().signCreateDataSet(clientDataSetId, payee, metadata);
        const extraData = this._encodeDataSetCreateData({
            payer,
            clientDataSetId,
            metadata,
            signature: authData.signature
        });
        return __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$core$2f$dist$2f$src$2f$sp$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createDataSet"]({
            endpoint: this._serviceURL,
            recordKeeper: recordKeeper,
            extraData: `0x${extraData}`
        });
    }
    async createAndAddPieces(clientDataSetId, payee, payer, recordKeeper, pieceDataArray, metadata) {
        if (metadata.dataset == null) {
            metadata.dataset = [];
        }
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$metadata$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["validateDataSetMetadata"])(metadata.dataset);
        metadata.pieces = PDPServer._processAddPiecesInputs(pieceDataArray, metadata.pieces);
        const createAuthData = await this.getAuthHelper().signCreateDataSet(clientDataSetId, payee, metadata.dataset);
        const createExtraData = this._encodeDataSetCreateData({
            payer,
            clientDataSetId,
            metadata: metadata.dataset,
            signature: createAuthData.signature
        });
        const nonce = (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$core$2f$dist$2f$src$2f$utils$2f$rand$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["randU256"])();
        const addAuthData = await this.getAuthHelper().signAddPieces(clientDataSetId, nonce, pieceDataArray, metadata.pieces);
        const addExtraData = this._encodeAddPiecesExtraData({
            nonce,
            signature: addAuthData.signature,
            metadata: metadata.pieces
        });
        const abiCoder = __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f$ethers$2f$lib$2e$esm$2f$ethers$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__ethers$3e$__["ethers"].AbiCoder.defaultAbiCoder();
        const encoded = abiCoder.encode([
            'bytes',
            'bytes'
        ], [
            `0x${createExtraData}`,
            `0x${addExtraData}`
        ]);
        return __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$core$2f$dist$2f$src$2f$sp$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createDataSetAndAddPieces"]({
            endpoint: this._serviceURL,
            recordKeeper: recordKeeper,
            extraData: encoded,
            pieces: pieceDataArray.map(__TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$core$2f$dist$2f$src$2f$piece$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["asPieceCID"]).filter((t)=>t != null)
        });
    }
    static _processAddPiecesInputs(pieceDataArray, metadata) {
        if (pieceDataArray.length === 0) {
            throw new Error('At least one piece must be provided');
        }
        if (metadata != null) {
            if (metadata.length !== pieceDataArray.length) {
                throw new Error(`Metadata length (${metadata.length}) must match pieces length (${pieceDataArray.length})`);
            }
            for(let i = 0; i < metadata.length; i++){
                if (metadata[i] != null && metadata[i].length > 0) {
                    try {
                        (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$metadata$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["validatePieceMetadata"])(metadata[i]);
                    } catch (error) {
                        throw new Error(`Piece ${i} metadata validation failed: ${error.message}`);
                    }
                }
            }
        }
        for (const pieceData of pieceDataArray){
            const pieceCid = (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$core$2f$dist$2f$src$2f$piece$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["asPieceCID"])(pieceData);
            if (pieceCid == null) {
                throw new Error(`Invalid PieceCID: ${String(pieceData)}`);
            }
        }
        const finalMetadata = metadata ?? pieceDataArray.map(()=>[]);
        return finalMetadata;
    }
    async addPieces(dataSetId, clientDataSetId, pieceDataArray, metadata) {
        const finalMetadata = PDPServer._processAddPiecesInputs(pieceDataArray, metadata);
        const nonce = (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$core$2f$dist$2f$src$2f$utils$2f$rand$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["randU256"])();
        const authData = await this.getAuthHelper().signAddPieces(clientDataSetId, nonce, pieceDataArray, finalMetadata);
        const extraData = this._encodeAddPiecesExtraData({
            nonce,
            signature: authData.signature,
            metadata: finalMetadata
        });
        const { txHash, statusUrl } = await __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$core$2f$dist$2f$src$2f$sp$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["addPieces"]({
            endpoint: this._serviceURL,
            dataSetId: BigInt(dataSetId),
            pieces: pieceDataArray.map(__TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$core$2f$dist$2f$src$2f$piece$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["asPieceCID"]).filter((t)=>t != null),
            extraData: `0x${extraData}`
        });
        return {
            message: `Pieces added to data set ID ${dataSetId} successfully`,
            txHash,
            statusUrl
        };
    }
    async getDataSetCreationStatus(txHash) {
        const response = await fetch(`${this._serviceURL}/pdp/data-sets/created/${txHash}`, {
            method: 'GET',
            headers: {
                'Content-Type': 'application/json'
            }
        });
        if (response.status === 404) {
            throw new Error(`Data set creation not found for transaction hash: ${txHash}`);
        }
        if (response.status !== 200) {
            const errorText = await response.text();
            throw new Error(`Failed to get data set creation status: ${response.status} ${response.statusText} - ${errorText}`);
        }
        const data = await response.json();
        return (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$pdp$2f$validation$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["validateDataSetCreationStatusResponse"])(data);
    }
    async getPieceAdditionStatus(dataSetId, txHash) {
        const response = await fetch(`${this._serviceURL}/pdp/data-sets/${dataSetId}/pieces/added/${txHash}`, {
            method: 'GET',
            headers: {
                'Content-Type': 'application/json'
            }
        });
        if (response.status === 404) {
            throw new Error(`Piece addition not found for transaction: ${txHash}`);
        }
        if (response.status !== 200) {
            const errorText = await response.text();
            throw new Error(`Failed to get piece addition status: ${response.status} ${response.statusText} - ${errorText}`);
        }
        const data = await response.json();
        return (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$pdp$2f$validation$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["validatePieceAdditionStatusResponse"])(data);
    }
    async findPiece(pieceCid) {
        const parsedPieceCid = (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$core$2f$dist$2f$src$2f$piece$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["asPieceCID"])(pieceCid);
        if (parsedPieceCid == null) {
            throw new Error(`Invalid PieceCID: ${String(pieceCid)}`);
        }
        const piece = await __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$core$2f$dist$2f$src$2f$sp$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["findPiece"]({
            endpoint: this._serviceURL,
            pieceCid: parsedPieceCid
        });
        return {
            pieceCid: piece
        };
    }
    async getPieceStatus(pieceCid) {
        const parsedPieceCid = (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$core$2f$dist$2f$src$2f$piece$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["asPieceCID"])(pieceCid);
        if (parsedPieceCid == null) {
            throw new Error(`Invalid PieceCID: ${String(pieceCid)}`);
        }
        const response = await fetch(`${this._serviceURL}/pdp/piece/${parsedPieceCid.toString()}/status`, {
            method: 'GET',
            headers: {
                Accept: 'application/json'
            }
        });
        if (response.status === 404) {
            const errorText = await response.text();
            throw new Error(`Piece not found or does not belong to service: ${errorText}`);
        }
        if (!response.ok) {
            const errorText = await response.text();
            throw new Error(`Failed to get piece status: ${response.status} ${response.statusText} - ${errorText}`);
        }
        const data = await response.json();
        return (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$pdp$2f$validation$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["validatePieceStatusResponse"])(data);
    }
    async uploadPiece(data, options) {
        if (data instanceof Uint8Array) {
            if (data.length > __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$core$2f$dist$2f$src$2f$piece$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["MAX_UPLOAD_SIZE"]) {
                throw new Error(`Upload size ${data.length} exceeds maximum ${__TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$core$2f$dist$2f$src$2f$piece$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["MAX_UPLOAD_SIZE"]} bytes (1 GiB with fr32 expansion)`);
            }
            const iterable = __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$core$2f$dist$2f$src$2f$piece$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["uint8ArrayToAsyncIterable"](data);
            return __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$core$2f$dist$2f$src$2f$sp$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["uploadPieceStreaming"]({
                endpoint: this._serviceURL,
                data: iterable,
                size: data.length,
                onProgress: options?.onProgress,
                pieceCid: options?.pieceCid,
                signal: options?.signal
            });
        } else {
            return __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$core$2f$dist$2f$src$2f$sp$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["uploadPieceStreaming"]({
                endpoint: this._serviceURL,
                data,
                onProgress: options?.onProgress,
                pieceCid: options?.pieceCid,
                signal: options?.signal
            });
        }
    }
    async downloadPiece(pieceCid) {
        const parsedPieceCid = (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$core$2f$dist$2f$src$2f$piece$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["asPieceCID"])(pieceCid);
        if (parsedPieceCid == null) {
            throw new Error(`Invalid PieceCID: ${String(pieceCid)}`);
        }
        const downloadUrl = (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$piece$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["constructPieceUrl"])(this._serviceURL, parsedPieceCid);
        const response = await fetch(downloadUrl);
        return await (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$core$2f$dist$2f$src$2f$piece$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["downloadAndValidate"])(response, parsedPieceCid);
    }
    async getDataSet(dataSetId) {
        const data = await __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$core$2f$dist$2f$src$2f$sp$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getDataSet"]({
            endpoint: this._serviceURL,
            dataSetId: BigInt(dataSetId)
        });
        return {
            id: data.id,
            pieces: data.pieces.map((piece)=>{
                const pieceCid = __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$core$2f$dist$2f$src$2f$piece$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["parse"](piece.pieceCid);
                return {
                    pieceId: piece.pieceId,
                    pieceCid: pieceCid,
                    subPieceCid: pieceCid,
                    subPieceOffset: piece.subPieceOffset
                };
            }),
            nextChallengeEpoch: data.nextChallengeEpoch
        };
    }
    async deletePiece(dataSetId, clientDataSetId, pieceID) {
        const authData = await this.getAuthHelper().signSchedulePieceRemovals(clientDataSetId, [
            BigInt(pieceID)
        ]);
        const { txHash } = await __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$core$2f$dist$2f$src$2f$sp$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["deletePiece"]({
            endpoint: this._serviceURL,
            dataSetId: BigInt(dataSetId),
            pieceId: BigInt(pieceID),
            extraData: __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f$ethers$2f$lib$2e$esm$2f$ethers$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__ethers$3e$__["ethers"].AbiCoder.defaultAbiCoder().encode([
                'bytes'
            ], [
                authData.signature
            ])
        });
        return txHash;
    }
    _encodeDataSetCreateData(data) {
        const signature = data.signature.startsWith('0x') ? data.signature : `0x${data.signature}`;
        const keys = data.metadata.map((item)=>item.key);
        const values = data.metadata.map((item)=>item.value);
        const abiCoder = __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f$ethers$2f$lib$2e$esm$2f$ethers$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__ethers$3e$__["ethers"].AbiCoder.defaultAbiCoder();
        const encoded = abiCoder.encode([
            'address',
            'uint256',
            'string[]',
            'string[]',
            'bytes'
        ], [
            data.payer,
            data.clientDataSetId,
            keys,
            values,
            signature
        ]);
        return encoded.slice(2);
    }
    _encodeAddPiecesExtraData(data) {
        const signature = data.signature.startsWith('0x') ? data.signature : `0x${data.signature}`;
        const keys = data.metadata.map((item)=>item.map((item)=>item.key));
        const values = data.metadata.map((item)=>item.map((item)=>item.value));
        const abiCoder = __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f$ethers$2f$lib$2e$esm$2f$ethers$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__ethers$3e$__["ethers"].AbiCoder.defaultAbiCoder();
        const encoded = abiCoder.encode([
            'uint256',
            'string[][]',
            'string[][]',
            'bytes'
        ], [
            data.nonce,
            keys,
            values,
            signature
        ]);
        return encoded.slice(2);
    }
    async ping() {
        const url = `${this._serviceURL}/pdp/ping`;
        const response = await fetch(url, {
            method: 'GET',
            headers: {}
        });
        if (response.status !== 200) {
            const errorText = await response.text().catch(()=>'Unknown error');
            throw new Error(`Provider ping failed: ${response.status} ${response.statusText} - ${errorText}`);
        }
    }
    getServiceURL() {
        return this._serviceURL;
    }
    getAuthHelper() {
        if (this._authHelper == null) {
            throw new Error('AuthHelper is not available for an operation that requires signing');
        }
        return this._authHelper;
    }
} //# sourceMappingURL=server.js.map
}),
"[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/pdp/verifier.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "PDPVerifier",
    ()=>PDPVerifier
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$core$2f$dist$2f$src$2f$piece$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-core/dist/src/piece.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f$ethers$2f$lib$2e$esm$2f$ethers$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__ethers$3e$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/ethers/lib.esm/ethers.js [app-route] (ecmascript) <export * as ethers>");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/utils/index.js [app-route] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/utils/constants.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/utils/errors.js [app-route] (ecmascript)");
;
;
;
class PDPVerifier {
    _provider;
    _contractAddress;
    _contract;
    constructor(provider, contractAddress){
        this._provider = provider;
        this._contractAddress = contractAddress;
        this._contract = new __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f$ethers$2f$lib$2e$esm$2f$ethers$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__ethers$3e$__["ethers"].Contract(this._contractAddress, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["CONTRACT_ABIS"].PDP_VERIFIER, this._provider);
    }
    async dataSetLive(dataSetId) {
        return await this._contract.dataSetLive(dataSetId);
    }
    async getNextPieceId(dataSetId) {
        const nextPieceId = await this._contract.getNextPieceId(dataSetId);
        return Number(nextPieceId);
    }
    async getDataSetListener(dataSetId) {
        return await this._contract.getDataSetListener(dataSetId);
    }
    async getDataSetStorageProvider(dataSetId) {
        const [storageProvider, proposedStorageProvider] = await this._contract.getDataSetStorageProvider(dataSetId);
        return {
            storageProvider,
            proposedStorageProvider
        };
    }
    async getDataSetLeafCount(dataSetId) {
        const leafCount = await this._contract.getDataSetLeafCount(dataSetId);
        return Number(leafCount);
    }
    extractDataSetIdFromReceipt(receipt) {
        try {
            for (const log of receipt.logs){
                try {
                    const parsedLog = this._contract.interface.parseLog({
                        topics: log.topics,
                        data: log.data
                    });
                    if (parsedLog != null && parsedLog.name === 'DataSetCreated') {
                        return Number(parsedLog.args.setId);
                    }
                } catch  {}
            }
            return null;
        } catch (error) {
            throw new Error(`Failed to extract data set ID from receipt: ${error instanceof Error ? error.message : String(error)}`);
        }
    }
    async getActivePieces(dataSetId, options) {
        const offset = options?.offset ?? 0;
        const limit = options?.limit ?? 100;
        const signal = options?.signal;
        if (signal?.aborted) {
            throw new Error('Operation aborted');
        }
        const result = await this._contract.getActivePieces(dataSetId, offset, limit);
        return {
            pieces: result[0].map((piece, index)=>{
                try {
                    return {
                        pieceCid: (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$core$2f$dist$2f$src$2f$piece$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["hexToPieceCID"])(piece.data),
                        pieceId: Number(result[1][index])
                    };
                } catch (error) {
                    throw (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createError"])('PDPVerifier', 'getActivePieces', `Failed to convert piece data to PieceCID: ${error instanceof Error ? error.message : String(error)}`, error);
                }
            }),
            hasMore: Boolean(result[2])
        };
    }
    getContractAddress() {
        return this._contract.target;
    }
} //# sourceMappingURL=verifier.js.map
}),
"[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/pdp/index.js [app-route] (ecmascript) <locals>", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([]);
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$pdp$2f$auth$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/pdp/auth.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$pdp$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/pdp/server.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$pdp$2f$validation$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/pdp/validation.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$pdp$2f$verifier$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/pdp/verifier.js [app-route] (ecmascript)"); //# sourceMappingURL=index.js.map
;
;
;
;
}),
"[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/session/key.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "ADD_PIECES_TYPEHASH",
    ()=>ADD_PIECES_TYPEHASH,
    "CREATE_DATA_SET_TYPEHASH",
    ()=>CREATE_DATA_SET_TYPEHASH,
    "DELETE_DATA_SET_TYPEHASH",
    ()=>DELETE_DATA_SET_TYPEHASH,
    "PDP_PERMISSIONS",
    ()=>PDP_PERMISSIONS,
    "PDP_PERMISSION_NAMES",
    ()=>PDP_PERMISSION_NAMES,
    "SCHEDULE_PIECE_REMOVALS_TYPEHASH",
    ()=>SCHEDULE_PIECE_REMOVALS_TYPEHASH,
    "SessionKey",
    ()=>SessionKey
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f$ethers$2f$lib$2e$esm$2f$ethers$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__ethers$3e$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/ethers/lib.esm/ethers.js [app-route] (ecmascript) <export * as ethers>");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$eip712$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/utils/eip712.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/utils/index.js [app-route] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/utils/constants.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$network$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/utils/network.js [app-route] (ecmascript)");
;
;
;
const CREATE_DATA_SET_TYPEHASH = __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$eip712$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["EIP712_TYPE_HASHES"].CreateDataSet;
const ADD_PIECES_TYPEHASH = __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$eip712$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["EIP712_TYPE_HASHES"].AddPieces;
const SCHEDULE_PIECE_REMOVALS_TYPEHASH = __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$eip712$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["EIP712_TYPE_HASHES"].SchedulePieceRemovals;
const DELETE_DATA_SET_TYPEHASH = __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$eip712$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["EIP712_TYPE_HASHES"].DeleteDataSet;
const PDP_PERMISSIONS = [
    CREATE_DATA_SET_TYPEHASH,
    ADD_PIECES_TYPEHASH,
    SCHEDULE_PIECE_REMOVALS_TYPEHASH,
    DELETE_DATA_SET_TYPEHASH
];
const PDP_PERMISSION_NAMES = {
    [CREATE_DATA_SET_TYPEHASH]: 'CreateDataSet',
    [ADD_PIECES_TYPEHASH]: 'AddPieces',
    [SCHEDULE_PIECE_REMOVALS_TYPEHASH]: 'SchedulePieceRemovals',
    [DELETE_DATA_SET_TYPEHASH]: 'DeleteDataSet'
};
const DEFAULT_ORIGIN = globalThis.location?.hostname || 'unknown';
class SessionKey {
    _provider;
    _registry;
    _signer;
    _owner;
    constructor(provider, sessionKeyRegistryAddress, signer, owner){
        this._provider = provider;
        this._registry = new __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f$ethers$2f$lib$2e$esm$2f$ethers$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__ethers$3e$__["ethers"].Contract(sessionKeyRegistryAddress, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["CONTRACT_ABIS"].SESSION_KEY_REGISTRY, owner);
        this._signer = signer;
        this._owner = owner;
    }
    getSigner() {
        return this._signer;
    }
    async fetchExpiries(permissions = PDP_PERMISSIONS) {
        const network = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$network$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getFilecoinNetworkType"])(this._provider);
        const multicall = new __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f$ethers$2f$lib$2e$esm$2f$ethers$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__ethers$3e$__["ethers"].Contract(__TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["CONTRACT_ADDRESSES"].MULTICALL3[network], __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["CONTRACT_ABIS"].MULTICALL3, this._provider);
        const registryInterface = new __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f$ethers$2f$lib$2e$esm$2f$ethers$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__ethers$3e$__["ethers"].Interface(__TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["CONTRACT_ABIS"].SESSION_KEY_REGISTRY);
        const [ownerAddress, signerAddress, registryAddress] = await Promise.all([
            this._owner.getAddress(),
            this._signer.getAddress(),
            this._registry.getAddress()
        ]);
        const calls = [];
        for (const permission of permissions){
            calls.push({
                target: registryAddress,
                allowFailure: true,
                callData: registryInterface.encodeFunctionData('authorizationExpiry', [
                    ownerAddress,
                    signerAddress,
                    permission
                ])
            });
        }
        const results = await multicall.aggregate3.staticCall(calls);
        const expiries = {};
        for(let i = 0; i < permissions.length; i++){
            expiries[PDP_PERMISSIONS[i]] = registryInterface.decodeFunctionResult('authorizationExpiry', results[i].returnData)[0];
        }
        return expiries;
    }
    async login(expiry, permissions = PDP_PERMISSIONS, origin = DEFAULT_ORIGIN) {
        return await this._registry.login(await this._signer.getAddress(), expiry, permissions, origin);
    }
    async revoke(permissions = PDP_PERMISSIONS) {
        return await this._registry.revoke(await this._signer.getAddress(), permissions);
    }
} //# sourceMappingURL=key.js.map
}),
"[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/session/index.js [app-route] (ecmascript) <locals>", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([]);
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$session$2f$key$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/session/key.js [app-route] (ecmascript)"); //# sourceMappingURL=index.js.map
;
}),
"[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/sp-registry/service.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "SPRegistryService",
    ()=>SPRegistryService
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$core$2f$dist$2f$src$2f$utils$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-core/dist/src/utils/index.js [app-route] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$core$2f$dist$2f$src$2f$utils$2f$capabilities$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-core/dist/src/utils/capabilities.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$core$2f$dist$2f$src$2f$utils$2f$pdp$2d$capabilities$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-core/dist/src/utils/pdp-capabilities.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f$ethers$2f$lib$2e$esm$2f$ethers$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__ethers$3e$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/ethers/lib.esm/ethers.js [app-route] (ecmascript) <export * as ethers>");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/utils/constants.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/utils/index.js [app-route] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$network$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/utils/network.js [app-route] (ecmascript)");
;
;
;
;
class SPRegistryService {
    _provider;
    _registryAddress;
    _registryContract = null;
    constructor(provider, registryAddress){
        this._provider = provider;
        this._registryAddress = registryAddress;
    }
    static async create(provider, registryAddress) {
        return new SPRegistryService(provider, registryAddress);
    }
    _getRegistryContract() {
        if (this._registryContract == null) {
            this._registryContract = new __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f$ethers$2f$lib$2e$esm$2f$ethers$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__ethers$3e$__["ethers"].Contract(this._registryAddress, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["CONTRACT_ABIS"].SERVICE_PROVIDER_REGISTRY, this._provider);
        }
        return this._registryContract;
    }
    async registerProvider(signer, info) {
        const contract = this._getRegistryContract().connect(signer);
        const registrationFee = await contract.REGISTRATION_FEE();
        const productType = 0;
        const [capabilityKeys, capabilityValues] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$core$2f$dist$2f$src$2f$utils$2f$pdp$2d$capabilities$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["encodePDPCapabilities"])(info.pdpOffering, info.capabilities);
        const tx = await contract.registerProvider(info.payee, info.name, info.description, productType, capabilityKeys, capabilityValues, {
            value: registrationFee
        });
        return tx;
    }
    async updateProviderInfo(signer, name, description) {
        const contract = this._getRegistryContract().connect(signer);
        return await contract.updateProviderInfo(name, description);
    }
    async removeProvider(signer) {
        const contract = this._getRegistryContract().connect(signer);
        return await contract.removeProvider();
    }
    async getProvider(providerId) {
        try {
            const contract = this._getRegistryContract();
            const rawProvider = await contract.getProvider(providerId);
            if (rawProvider.info.serviceProvider === __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f$ethers$2f$lib$2e$esm$2f$ethers$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__ethers$3e$__["ethers"].ZeroAddress) {
                return null;
            }
            const products = await this._getProviderProducts(providerId);
            return this._convertToProviderInfo(providerId, rawProvider.info, products);
        } catch (error) {
            if (error instanceof Error && error.message.includes('Provider not found')) {
                return null;
            }
            throw error;
        }
    }
    async getProviderByAddress(address) {
        try {
            const contract = this._getRegistryContract();
            const provider = await contract.getProviderByAddress(address);
            if (provider.info.serviceProvider === __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f$ethers$2f$lib$2e$esm$2f$ethers$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__ethers$3e$__["ethers"].ZeroAddress) {
                return null;
            }
            const products = await this._getProviderProducts(Number(provider.providerId));
            return this._convertToProviderInfo(Number(provider.providerId), provider.info, products);
        } catch (error) {
            console.warn('Error fetching provider by address:', error);
            return null;
        }
    }
    async getProviderIdByAddress(address) {
        const contract = this._getRegistryContract();
        const id = await contract.getProviderIdByAddress(address);
        return Number(id);
    }
    async getAllActiveProviders() {
        const contract = this._getRegistryContract();
        const providerPromises = [];
        const pageSize = 50;
        let offset = 0;
        let hasMore = true;
        while(hasMore){
            const result = await contract.getAllActiveProviders(offset, pageSize);
            const providerIds = result[0];
            hasMore = result[1];
            if (providerIds.length > 0) {
                const ids = providerIds.map((id)=>Number(id));
                providerPromises.push(this.getProviders(ids));
            }
            offset += pageSize;
        }
        const providerBatches = await Promise.all(providerPromises);
        return providerBatches.flat();
    }
    async getActiveProvidersByProductType(productType) {
        const contract = this._getRegistryContract();
        const providerPromises = [];
        let offset = 0;
        const limit = 50;
        let hasMore = true;
        while(hasMore){
            const result = await contract.getProvidersByProductType(productType, true, offset, limit);
            if (result.providerIds.length > 0) {
                const ids = result.providerIds.map((id)=>Number(id));
                providerPromises.push(this.getProviders(ids));
            }
            hasMore = result.hasMore;
            offset += limit;
        }
        const providerBatches = await Promise.all(providerPromises);
        const allProviders = providerBatches.flat();
        return allProviders;
    }
    async isProviderActive(providerId) {
        const contract = this._getRegistryContract();
        return await contract.isProviderActive(providerId);
    }
    async isRegisteredProvider(address) {
        const contract = this._getRegistryContract();
        return await contract.isRegisteredProvider(address);
    }
    async getProviderCount() {
        const contract = this._getRegistryContract();
        const count = await contract.getProviderCount();
        return Number(count);
    }
    async activeProviderCount() {
        const contract = this._getRegistryContract();
        const count = await contract.activeProviderCount();
        return Number(count);
    }
    async addPDPProduct(signer, pdpOffering, capabilities = {}) {
        const contract = this._getRegistryContract().connect(signer);
        const [capabilityKeys, capabilityValues] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$core$2f$dist$2f$src$2f$utils$2f$pdp$2d$capabilities$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["encodePDPCapabilities"])(pdpOffering, capabilities);
        return await contract.addProduct(0, capabilityKeys, capabilityValues);
    }
    async updatePDPProduct(signer, pdpOffering, capabilities = {}) {
        const contract = this._getRegistryContract().connect(signer);
        const [capabilityKeys, capabilityValues] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$core$2f$dist$2f$src$2f$utils$2f$pdp$2d$capabilities$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["encodePDPCapabilities"])(pdpOffering, capabilities);
        return await contract.updateProduct(0, capabilityKeys, capabilityValues);
    }
    async removeProduct(signer, productType) {
        const contract = this._getRegistryContract().connect(signer);
        return await contract.removeProduct(productType);
    }
    async getPDPService(providerId) {
        try {
            const contract = this._getRegistryContract();
            const result = await contract.getProviderWithProduct(providerId, 0);
            if (!result.product.isActive) {
                return null;
            }
            const capabilities = (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$core$2f$dist$2f$src$2f$utils$2f$capabilities$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["capabilitiesListToObject"])(result.product.capabilityKeys, result.productCapabilityValues);
            return {
                offering: (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$core$2f$dist$2f$src$2f$utils$2f$pdp$2d$capabilities$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["decodePDPCapabilities"])(capabilities),
                capabilities,
                isActive: result.product.isActive
            };
        } catch  {
            return null;
        }
    }
    async providerHasProduct(providerId, productType) {
        const contract = this._getRegistryContract();
        return await contract.providerHasProduct(providerId, productType);
    }
    async getProviders(providerIds) {
        if (providerIds.length === 0) {
            return [];
        }
        try {
            const result = await this._getProvidersWithMulticall(providerIds);
            return result;
        } catch (_error) {
            const result = await this._getProvidersIndividually(providerIds);
            return result;
        }
    }
    async _getProvidersWithMulticall(providerIds) {
        const network = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$network$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getFilecoinNetworkType"])(this._provider);
        const multicall3Address = __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["CONTRACT_ADDRESSES"].MULTICALL3[network];
        const multicall = new __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f$ethers$2f$lib$2e$esm$2f$ethers$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__ethers$3e$__["ethers"].Contract(multicall3Address, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["CONTRACT_ABIS"].MULTICALL3, this._provider);
        const iface = new __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f$ethers$2f$lib$2e$esm$2f$ethers$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__ethers$3e$__["ethers"].Interface(__TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["CONTRACT_ABIS"].SERVICE_PROVIDER_REGISTRY);
        const calls = this._prepareMulticallCalls(providerIds, iface);
        const results = await multicall.aggregate3.staticCall(calls);
        return this._processMulticallResults(providerIds, results, iface);
    }
    _prepareMulticallCalls(providerIds, iface) {
        const calls = [];
        for (const id of providerIds){
            calls.push({
                target: this._registryAddress,
                allowFailure: true,
                callData: iface.encodeFunctionData('getProviderWithProduct', [
                    id,
                    0
                ])
            });
        }
        return calls;
    }
    _processMulticallResults(providerIds, results, iface) {
        const providers = [];
        for(let i = 0; i < providerIds.length; i++){
            if (!results[i].success) {
                continue;
            }
            try {
                const [, rawProvider, product, productCapabilityValues] = iface.decodeFunctionResult('getProviderWithProduct', results[i].returnData)[0];
                const capabilities = (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$core$2f$dist$2f$src$2f$utils$2f$capabilities$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["capabilitiesListToObject"])(product.capabilityKeys, productCapabilityValues);
                const providerInfo = this._convertToProviderInfo(providerIds[i], rawProvider, [
                    {
                        type: 'PDP',
                        isActive: product.isActive,
                        capabilities,
                        data: (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$core$2f$dist$2f$src$2f$utils$2f$pdp$2d$capabilities$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["decodePDPCapabilities"])(capabilities)
                    }
                ]);
                if (providerInfo.serviceProvider === __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f$ethers$2f$lib$2e$esm$2f$ethers$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__ethers$3e$__["ethers"].ZeroAddress) {
                    continue;
                }
                providers.push(providerInfo);
            } catch  {}
        }
        return providers;
    }
    async _getProvidersIndividually(providerIds) {
        const providers = [];
        const promises = providerIds.map((id)=>this.getProvider(id));
        const results = await Promise.all(promises);
        for (const provider of results){
            if (provider != null) {
                providers.push(provider);
            }
        }
        return providers;
    }
    async _getProviderProducts(providerId) {
        const products = [];
        const pdpService = await this.getPDPService(providerId);
        if (pdpService != null) {
            products.push({
                type: 'PDP',
                isActive: pdpService.isActive,
                capabilities: pdpService.capabilities,
                data: pdpService.offering
            });
        }
        return products;
    }
    _convertToProviderInfo(providerId, providerInfo, productsArray) {
        const products = {};
        for (const product of productsArray){
            if (product.type === 'PDP') {
                products.PDP = product;
            }
        }
        return {
            id: providerId,
            serviceProvider: providerInfo.serviceProvider,
            payee: providerInfo.payee,
            name: providerInfo.name,
            description: providerInfo.description,
            active: providerInfo.isActive,
            products
        };
    }
} //# sourceMappingURL=service.js.map
}),
"[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/sp-registry/index.js [app-route] (ecmascript) <locals>", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([]);
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$sp$2d$registry$2f$service$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/sp-registry/service.js [app-route] (ecmascript)"); //# sourceMappingURL=index.js.map
;
}),
"[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/storage/context.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "StorageContext",
    ()=>StorageContext
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$core$2f$dist$2f$src$2f$piece$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-core/dist/src/piece.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$core$2f$dist$2f$src$2f$sp$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-core/dist/src/sp.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$core$2f$dist$2f$src$2f$utils$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-core/dist/src/utils/index.js [app-route] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$core$2f$dist$2f$src$2f$utils$2f$rand$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-core/dist/src/utils/rand.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$pdp$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/pdp/index.js [app-route] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$pdp$2f$auth$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/pdp/auth.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$pdp$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/pdp/server.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$pdp$2f$verifier$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/pdp/verifier.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$sp$2d$registry$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/sp-registry/index.js [app-route] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$sp$2d$registry$2f$service$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/sp-registry/service.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/utils/index.js [app-route] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$epoch$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/utils/epoch.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/utils/errors.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/utils/constants.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$metadata$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/utils/metadata.js [app-route] (ecmascript)");
;
;
;
;
;
;
;
;
const NO_REMAINING_PROVIDERS_ERROR_MESSAGE = 'No approved service providers available';
class StorageContext {
    _synapse;
    _provider;
    _pdpServer;
    _warmStorageService;
    _warmStorageAddress;
    _withCDN;
    _signer;
    _uploadBatchSize;
    _dataSetId;
    _dataSetMetadata;
    _pendingPieces = [];
    _isProcessing = false;
    _activeUploads = new Set();
    _uploadBatchWaitTimeout = 15000;
    serviceProvider;
    get withCDN() {
        return this._withCDN;
    }
    get provider() {
        return this._provider;
    }
    get dataSetMetadata() {
        return this._dataSetMetadata;
    }
    get dataSetId() {
        return this._dataSetId;
    }
    static validateRawSize(sizeBytes, context) {
        if (sizeBytes < __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["SIZE_CONSTANTS"].MIN_UPLOAD_SIZE) {
            throw (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createError"])('StorageContext', context, `Data size ${sizeBytes} bytes is below minimum allowed size of ${__TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["SIZE_CONSTANTS"].MIN_UPLOAD_SIZE} bytes`);
        }
        if (sizeBytes > __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["SIZE_CONSTANTS"].MAX_UPLOAD_SIZE) {
            throw (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createError"])('StorageContext', context, `Data size ${sizeBytes} bytes exceeds maximum allowed size of ${__TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["SIZE_CONSTANTS"].MAX_UPLOAD_SIZE} bytes (${Math.floor(__TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["SIZE_CONSTANTS"].MAX_UPLOAD_SIZE / 1024 / 1024)} MiB)`);
        }
    }
    constructor(synapse, warmStorageService, provider, dataSetId, options, dataSetMetadata){
        this._synapse = synapse;
        this._provider = provider;
        this._withCDN = options.withCDN ?? false;
        this._signer = synapse.getSigner();
        this._warmStorageService = warmStorageService;
        this._uploadBatchSize = Math.max(1, options.uploadBatchSize ?? __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["SIZE_CONSTANTS"].DEFAULT_UPLOAD_BATCH_SIZE);
        this._dataSetMetadata = dataSetMetadata;
        this._dataSetId = dataSetId;
        this.serviceProvider = provider.serviceProvider;
        this._warmStorageAddress = synapse.getWarmStorageAddress();
        const authHelper = new __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$pdp$2f$auth$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["PDPAuthHelper"](this._warmStorageAddress, this._signer, BigInt(synapse.getChainId()));
        if (!provider.products.PDP?.data.serviceURL) {
            throw new Error(`Provider ${provider.id} does not have a PDP product with serviceURL`);
        }
        this._pdpServer = new __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$pdp$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["PDPServer"](authHelper, provider.products.PDP.data.serviceURL);
    }
    static async createContexts(synapse, warmStorageService, options) {
        const count = options?.count ?? 2;
        const resolutions = [];
        const clientAddress = await synapse.getClient().getAddress();
        const registryAddress = warmStorageService.getServiceProviderRegistryAddress();
        const spRegistry = new __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$sp$2d$registry$2f$service$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["SPRegistryService"](synapse.getProvider(), registryAddress);
        if (options.dataSetIds) {
            const selections = [];
            for (const dataSetId of new Set(options.dataSetIds)){
                selections.push(StorageContext.resolveByDataSetId(dataSetId, warmStorageService, spRegistry, clientAddress, {
                    withCDN: options.withCDN,
                    withIpni: options.withIpni,
                    dev: options.dev,
                    metadata: options.metadata
                }));
                if (selections.length >= count) {
                    break;
                }
            }
            resolutions.push(...await Promise.all(selections));
        }
        const resolvedProviderIds = resolutions.map((resolution)=>resolution.provider.id);
        if (resolutions.length < count) {
            if (options.providerIds) {
                const selections = [];
                for (const providerId of [
                    ...new Set(options.providerIds)
                ].filter((providerId)=>!resolvedProviderIds.includes(providerId))){
                    selections.push(StorageContext.resolveByProviderId(clientAddress, providerId, options.metadata ?? {}, warmStorageService, spRegistry, options.forceCreateDataSets));
                    resolvedProviderIds.push(providerId);
                    if (selections.length + resolutions.length >= count) {
                        break;
                    }
                }
                resolutions.push(...await Promise.all(selections));
            }
        }
        if (resolutions.length < count) {
            const excludeProviderIds = [
                ...options.excludeProviderIds ?? [],
                ...resolvedProviderIds
            ];
            for(let i = resolutions.length; i < count; i++){
                try {
                    const resolution = await StorageContext.smartSelectProvider(clientAddress, options.metadata ?? {}, warmStorageService, spRegistry, excludeProviderIds, options.forceCreateDataSets ?? false, options.withIpni ?? false, options.dev ?? false);
                    excludeProviderIds.push(resolution.provider.id);
                    resolutions.push(resolution);
                } catch (error) {
                    if (error instanceof Error && error.message.includes(NO_REMAINING_PROVIDERS_ERROR_MESSAGE)) {
                        break;
                    }
                    throw error;
                }
            }
        }
        return await Promise.all(resolutions.map(async (resolution)=>await StorageContext.createWithSelectedProvider(resolution, synapse, warmStorageService, options)));
    }
    static async create(synapse, warmStorageService, options = {}) {
        const registryAddress = warmStorageService.getServiceProviderRegistryAddress();
        const spRegistry = new __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$sp$2d$registry$2f$service$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["SPRegistryService"](synapse.getProvider(), registryAddress);
        const resolution = await StorageContext.resolveProviderAndDataSet(synapse, warmStorageService, spRegistry, options);
        return await StorageContext.createWithSelectedProvider(resolution, synapse, warmStorageService, options);
    }
    static async createWithSelectedProvider(resolution, synapse, warmStorageService, options = {}) {
        try {
            options.callbacks?.onProviderSelected?.(resolution.provider);
        } catch (error) {
            console.error('Error in onProviderSelected callback:', error);
        }
        if (resolution.dataSetId !== -1) {
            options.callbacks?.onDataSetResolved?.({
                isExisting: resolution.dataSetId !== -1,
                dataSetId: resolution.dataSetId,
                provider: resolution.provider
            });
        }
        return new StorageContext(synapse, warmStorageService, resolution.provider, resolution.dataSetId === -1 ? undefined : resolution.dataSetId, options, resolution.dataSetMetadata);
    }
    static async resolveProviderAndDataSet(synapse, warmStorageService, spRegistry, options) {
        const clientAddress = await synapse.getClient().getAddress();
        if (options.dataSetId != null && options.forceCreateDataSet !== true) {
            return await StorageContext.resolveByDataSetId(options.dataSetId, warmStorageService, spRegistry, clientAddress, options);
        }
        const requestedMetadata = (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$metadata$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["combineMetadata"])(options.metadata, options.withCDN);
        if (options.providerId != null) {
            return await StorageContext.resolveByProviderId(clientAddress, options.providerId, requestedMetadata, warmStorageService, spRegistry, options.forceCreateDataSet);
        }
        if (options.providerAddress != null) {
            return await StorageContext.resolveByProviderAddress(options.providerAddress, warmStorageService, spRegistry, clientAddress, requestedMetadata, options.forceCreateDataSet);
        }
        return await StorageContext.smartSelectProvider(clientAddress, requestedMetadata, warmStorageService, spRegistry, options.excludeProviderIds ?? [], options.forceCreateDataSet ?? false, options.withIpni ?? false, options.dev ?? false);
    }
    static async resolveByDataSetId(dataSetId, warmStorageService, spRegistry, signerAddress, options) {
        const dataSets = await warmStorageService.getClientDataSetsWithDetails(signerAddress);
        const dataSet = dataSets.find((ds)=>ds.pdpVerifierDataSetId === dataSetId);
        if (dataSet == null || !dataSet.isLive || !dataSet.isManaged) {
            throw (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createError"])('StorageContext', 'resolveByDataSetId', `Data set ${dataSetId} not found, not owned by ${signerAddress}, ` + 'or not managed by the current WarmStorage contract');
        }
        if (options.providerId != null || options.providerAddress != null) {
            await StorageContext.validateDataSetConsistency(dataSet, options, spRegistry);
        }
        const provider = await spRegistry.getProvider(dataSet.providerId);
        if (provider == null) {
            throw (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createError"])('StorageContext', 'resolveByDataSetId', `Provider ID ${dataSet.providerId} for data set ${dataSetId} not found in registry`);
        }
        if (options.withCDN != null && dataSet.withCDN !== options.withCDN) {
            throw (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createError"])('StorageContext', 'resolveByDataSetId', `Data set ${dataSetId} has CDN ${dataSet.withCDN ? 'enabled' : 'disabled'}, ` + `but requested ${options.withCDN ? 'enabled' : 'disabled'}`);
        }
        const dataSetMetadata = await warmStorageService.getDataSetMetadata(dataSetId);
        return {
            provider,
            dataSetId,
            isExisting: true,
            dataSetMetadata
        };
    }
    static async validateDataSetConsistency(dataSet, options, spRegistry) {
        if (options.providerId != null) {
            if (dataSet.providerId !== options.providerId) {
                throw (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createError"])('StorageContext', 'validateDataSetConsistency', `Data set ${dataSet.pdpVerifierDataSetId} belongs to provider ID ${dataSet.providerId}, ` + `but provider ID ${options.providerId} was requested`);
            }
        }
        if (options.providerAddress != null) {
            const actualProvider = await spRegistry.getProvider(dataSet.providerId);
            if (actualProvider == null || actualProvider.serviceProvider.toLowerCase() !== options.providerAddress.toLowerCase()) {
                throw (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createError"])('StorageContext', 'validateDataSetConsistency', `Data set ${dataSet.pdpVerifierDataSetId} belongs to provider ${actualProvider?.serviceProvider ?? 'unknown'}, ` + `but provider ${options.providerAddress} was requested`);
            }
        }
    }
    static async resolveByProviderId(signerAddress, providerId, requestedMetadata, warmStorageService, spRegistry, forceCreateDataSet) {
        const [provider, dataSets] = await Promise.all([
            spRegistry.getProvider(providerId),
            forceCreateDataSet ? Promise.resolve(null) : warmStorageService.getClientDataSetsWithDetails(signerAddress)
        ]);
        if (provider == null) {
            throw (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createError"])('StorageContext', 'resolveByProviderId', `Provider ID ${providerId} not found in registry`);
        }
        if (forceCreateDataSet === true) {
            return {
                provider,
                dataSetId: -1,
                isExisting: false,
                dataSetMetadata: requestedMetadata
            };
        }
        const providerDataSets = dataSets.filter((ps)=>{
            if (ps.providerId !== provider.id || !ps.isLive || !ps.isManaged || ps.pdpEndEpoch !== 0) {
                return false;
            }
            return (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$metadata$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["metadataMatches"])(ps.metadata, requestedMetadata);
        });
        if (providerDataSets.length > 0) {
            const sorted = providerDataSets.sort((a, b)=>{
                if (a.currentPieceCount > 0 && b.currentPieceCount === 0) return -1;
                if (b.currentPieceCount > 0 && a.currentPieceCount === 0) return 1;
                return a.pdpVerifierDataSetId - b.pdpVerifierDataSetId;
            });
            const dataSetMetadata = await warmStorageService.getDataSetMetadata(sorted[0].pdpVerifierDataSetId);
            return {
                provider,
                dataSetId: sorted[0].pdpVerifierDataSetId,
                isExisting: true,
                dataSetMetadata
            };
        }
        return {
            provider,
            dataSetId: -1,
            isExisting: false,
            dataSetMetadata: requestedMetadata
        };
    }
    static async resolveByProviderAddress(providerAddress, warmStorageService, spRegistry, signerAddress, requestedMetadata, forceCreateDataSet) {
        const provider = await spRegistry.getProviderByAddress(providerAddress);
        if (provider == null) {
            throw (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createError"])('StorageContext', 'resolveByProviderAddress', `Provider ${providerAddress} not found in registry`);
        }
        return await StorageContext.resolveByProviderId(signerAddress, provider.id, requestedMetadata, warmStorageService, spRegistry, forceCreateDataSet);
    }
    static async smartSelectProvider(signerAddress, requestedMetadata, warmStorageService, spRegistry, excludeProviderIds, forceCreateDataSet, withIpni, dev) {
        const dataSets = await warmStorageService.getClientDataSetsWithDetails(signerAddress);
        const skipProviderIds = new Set(excludeProviderIds);
        const managedDataSets = dataSets.filter((ps)=>ps.isLive && ps.isManaged && ps.pdpEndEpoch === 0 && (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$metadata$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["metadataMatches"])(ps.metadata, requestedMetadata) && !skipProviderIds.has(ps.providerId));
        if (managedDataSets.length > 0 && !forceCreateDataSet) {
            const sorted = managedDataSets.sort((a, b)=>{
                if (a.currentPieceCount > 0 && b.currentPieceCount === 0) return -1;
                if (b.currentPieceCount > 0 && a.currentPieceCount === 0) return 1;
                return a.pdpVerifierDataSetId - b.pdpVerifierDataSetId;
            });
            async function* generateProviders() {
                for (const dataSet of sorted){
                    if (skipProviderIds.has(dataSet.providerId)) {
                        continue;
                    }
                    skipProviderIds.add(dataSet.providerId);
                    const provider = await spRegistry.getProvider(dataSet.providerId);
                    if (provider == null) {
                        console.warn(`Provider ID ${dataSet.providerId} for data set ${dataSet.pdpVerifierDataSetId} is not currently approved`);
                        continue;
                    }
                    if (withIpni && provider.products.PDP?.data.ipniIpfs === false) {
                        continue;
                    }
                    const serviceStatus = provider.products.PDP?.capabilities?.serviceStatus;
                    if (!dev && serviceStatus === '0x646576') {
                        continue;
                    }
                    yield provider;
                }
            }
            try {
                const selectedProvider = await StorageContext.selectProviderWithPing(generateProviders());
                const matchingDataSet = sorted.find((ps)=>ps.providerId === selectedProvider.id);
                if (matchingDataSet == null) {
                    console.warn(`Could not match selected provider ${selectedProvider.serviceProvider} (ID: ${selectedProvider.id}) ` + `to existing data sets. Falling back to selecting from all providers.`);
                } else {
                    const dataSetMetadata = await warmStorageService.getDataSetMetadata(matchingDataSet.pdpVerifierDataSetId);
                    return {
                        provider: selectedProvider,
                        dataSetId: matchingDataSet.pdpVerifierDataSetId,
                        isExisting: true,
                        dataSetMetadata
                    };
                }
            } catch (_error) {
                console.warn('All providers from existing data sets failed health check. Falling back to all providers.');
            }
        }
        const approvedIds = await warmStorageService.getApprovedProviderIds();
        const approvedProviders = await spRegistry.getProviders(approvedIds);
        const allProviders = approvedProviders.filter((provider)=>(!withIpni || provider.products.PDP?.data.ipniIpfs === true) && (dev || provider.products.PDP?.capabilities?.serviceStatus !== '0x646576') && !excludeProviderIds.includes(provider.id));
        if (allProviders.length === 0) {
            throw (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createError"])('StorageContext', 'smartSelectProvider', NO_REMAINING_PROVIDERS_ERROR_MESSAGE);
        }
        const provider = await StorageContext.selectRandomProvider(allProviders);
        return {
            provider,
            dataSetId: -1,
            isExisting: false,
            dataSetMetadata: requestedMetadata
        };
    }
    static async selectRandomProvider(providers) {
        if (providers.length === 0) {
            throw (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createError"])('StorageContext', 'selectRandomProvider', 'No providers available');
        }
        async function* generateRandomProviders() {
            const remaining = [
                ...providers
            ];
            while(remaining.length > 0){
                const selected = remaining.splice((0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$core$2f$dist$2f$src$2f$utils$2f$rand$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["randIndex"])(remaining.length), 1)[0];
                yield selected;
            }
        }
        return await StorageContext.selectProviderWithPing(generateRandomProviders());
    }
    static async selectProviderWithPing(providers) {
        let providerCount = 0;
        for await (const provider of providers){
            providerCount++;
            try {
                if (!provider.products.PDP?.data.serviceURL) {
                    continue;
                }
                const providerPdpServer = new __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$pdp$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["PDPServer"](null, provider.products.PDP.data.serviceURL);
                await providerPdpServer.ping();
                return provider;
            } catch (error) {
                console.warn(`Provider ${provider.serviceProvider} failed ping test:`, error instanceof Error ? error.message : String(error));
            }
        }
        if (providerCount === 0) {
            throw (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createError"])('StorageContext', 'selectProviderWithPing', 'No providers available to select from');
        }
        throw (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createError"])('StorageContext', 'selectProviderWithPing', `All ${providerCount} providers failed health check. Storage may be temporarily unavailable.`);
    }
    static async performPreflightCheck(warmStorageService, paymentsService, size, withCDN) {
        StorageContext.validateRawSize(size, 'preflightUpload');
        const allowanceCheck = await warmStorageService.checkAllowanceForStorage(size, withCDN, paymentsService);
        return {
            estimatedCost: {
                perEpoch: allowanceCheck.costs.perEpoch,
                perDay: allowanceCheck.costs.perDay,
                perMonth: allowanceCheck.costs.perMonth
            },
            allowanceCheck: {
                sufficient: allowanceCheck.sufficient,
                message: allowanceCheck.message
            },
            selectedProvider: null,
            selectedDataSetId: null
        };
    }
    async preflightUpload(size) {
        const preflightResult = await StorageContext.performPreflightCheck(this._warmStorageService, this._synapse.payments, size, this._withCDN);
        return preflightResult;
    }
    async upload(data, options) {
        performance.mark('synapse:upload-start');
        let size;
        const pieceCid = options?.pieceCid;
        if (data instanceof Uint8Array) {
            size = data.length;
            StorageContext.validateRawSize(size, 'upload');
        }
        const uploadId = Symbol('upload');
        this._activeUploads.add(uploadId);
        try {
            let uploadResult;
            try {
                performance.mark('synapse:pdpServer.uploadPiece-start');
                uploadResult = await this._pdpServer.uploadPiece(data, {
                    ...options,
                    pieceCid
                });
                performance.mark('synapse:pdpServer.uploadPiece-end');
                performance.measure('synapse:pdpServer.uploadPiece', 'synapse:pdpServer.uploadPiece-start', 'synapse:pdpServer.uploadPiece-end');
            } catch (error) {
                performance.mark('synapse:pdpServer.uploadPiece-end');
                performance.measure('synapse:pdpServer.uploadPiece', 'synapse:pdpServer.uploadPiece-start', 'synapse:pdpServer.uploadPiece-end');
                throw (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createError"])('StorageContext', 'uploadPiece', 'Failed to upload piece to service provider', error);
            }
            performance.mark('synapse:findPiece-start');
            await this._pdpServer.findPiece(uploadResult.pieceCid);
            performance.mark('synapse:findPiece-end');
            performance.measure('synapse:findPiece', 'synapse:findPiece-start', 'synapse:findPiece-end');
            this._activeUploads.delete(uploadId);
            if (options?.onUploadComplete != null) {
                options.onUploadComplete(uploadResult.pieceCid);
            }
            if (options?.metadata != null) {
                (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$metadata$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["validatePieceMetadata"])(options.metadata);
            }
            const finalPieceId = await new Promise((resolve, reject)=>{
                this._pendingPieces.push({
                    pieceCid: uploadResult.pieceCid,
                    resolve,
                    reject,
                    callbacks: options,
                    metadata: options?.metadata ? (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$metadata$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["objectToEntries"])(options.metadata) : undefined
                });
                setTimeout(()=>{
                    void this._processPendingPieces().catch((error)=>{
                        console.error('Failed to process pending pieces batch:', error);
                    });
                }, 0);
            });
            performance.mark('synapse:upload-end');
            performance.measure('synapse:upload', 'synapse:upload-start', 'synapse:upload-end');
            return {
                pieceCid: uploadResult.pieceCid,
                size: uploadResult.size,
                pieceId: finalPieceId
            };
        } finally{
            this._activeUploads.delete(uploadId);
        }
    }
    async _processPendingPieces() {
        if (this._isProcessing || this._pendingPieces.length === 0) {
            return;
        }
        this._isProcessing = true;
        const uploadsToWaitFor = new Set(this._activeUploads);
        if (uploadsToWaitFor.size > 0 && this._pendingPieces.length < this._uploadBatchSize) {
            const waitStart = Date.now();
            const pollInterval = 200;
            while(uploadsToWaitFor.size > 0 && Date.now() - waitStart < this._uploadBatchWaitTimeout){
                for (const uploadId of uploadsToWaitFor){
                    if (!this._activeUploads.has(uploadId)) {
                        uploadsToWaitFor.delete(uploadId);
                    }
                }
                if (uploadsToWaitFor.size > 0) {
                    await new Promise((resolve)=>setTimeout(resolve, pollInterval));
                }
            }
            const waited = Date.now() - waitStart;
            if (waited > pollInterval) {
                console.debug(`Waited ${waited}ms for ${uploadsToWaitFor.size} active upload(s) to complete`);
            }
        }
        const batch = this._pendingPieces.splice(0, this._uploadBatchSize);
        try {
            const pieceCids = batch.map((item)=>item.pieceCid);
            const metadataArray = batch.map((item)=>item.metadata ?? []);
            const confirmedPieceIds = [];
            if (this.dataSetId) {
                const [, dataSetInfo] = await Promise.all([
                    this._warmStorageService.validateDataSet(this.dataSetId),
                    this._warmStorageService.getDataSet(this.dataSetId)
                ]);
                const addPiecesResult = await this._pdpServer.addPieces(this.dataSetId, dataSetInfo.clientDataSetId, pieceCids, metadataArray);
                batch.forEach((item)=>{
                    item.callbacks?.onPieceAdded?.(addPiecesResult.txHash);
                });
                const addPiecesResponse = await __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$core$2f$dist$2f$src$2f$sp$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["pollForAddPiecesStatus"](addPiecesResult);
                confirmedPieceIds.push(...addPiecesResponse.confirmedPieceIds ?? []);
                batch.forEach((item)=>{
                    item.callbacks?.onPieceConfirmed?.(confirmedPieceIds);
                });
            } else {
                const payer = await this._synapse.getClient().getAddress();
                const baseMetadataObj = this._dataSetMetadata ?? {};
                const metadataObj = this._withCDN && !(__TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["METADATA_KEYS"].WITH_CDN in baseMetadataObj) ? {
                    ...baseMetadataObj,
                    [__TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["METADATA_KEYS"].WITH_CDN]: ''
                } : baseMetadataObj;
                const finalMetadata = (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$metadata$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["objectToEntries"])(metadataObj);
                const createAndAddPiecesResult = await this._pdpServer.createAndAddPieces((0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$core$2f$dist$2f$src$2f$utils$2f$rand$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["randU256"])(), this._provider.payee, payer, this._synapse.getWarmStorageAddress(), pieceCids, {
                    dataset: finalMetadata,
                    pieces: metadataArray
                });
                batch.forEach((item)=>{
                    item.callbacks?.onPieceAdded?.(createAndAddPiecesResult.txHash);
                });
                const confirmedDataset = await __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$core$2f$dist$2f$src$2f$sp$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["pollForDataSetCreationStatus"](createAndAddPiecesResult);
                this._dataSetId = confirmedDataset.dataSetId;
                const confirmedPieces = await __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$core$2f$dist$2f$src$2f$sp$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["pollForAddPiecesStatus"]({
                    statusUrl: new URL(`/pdp/data-sets/${confirmedDataset.dataSetId}/pieces/added/${confirmedDataset.createMessageHash}`, this._pdpServer.getServiceURL()).toString()
                });
                confirmedPieceIds.push(...confirmedPieces.confirmedPieceIds ?? []);
                batch.forEach((item)=>{
                    item.callbacks?.onPieceConfirmed?.(confirmedPieceIds);
                });
            }
            batch.forEach((item, index)=>{
                const pieceId = confirmedPieceIds[index];
                if (pieceId == null) {
                    throw (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createError"])('StorageContext', 'addPieces', `Server did not return piece ID for piece at index ${index}`);
                }
                item.resolve(pieceId);
            });
        } catch (error) {
            const finalError = (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createError"])('StorageContext', 'addPieces', 'Failed to add piece to data set', error);
            batch.forEach((item)=>{
                item.reject(finalError);
            });
        } finally{
            this._isProcessing = false;
            if (this._pendingPieces.length > 0) {
                void this._processPendingPieces().catch((error)=>{
                    console.error('Failed to process pending pieces batch:', error);
                });
            }
        }
    }
    async download(pieceCid, options) {
        const downloadFn = this._synapse.storage?.download ?? this._synapse.download;
        return await downloadFn.call(this._synapse.storage ?? this._synapse, pieceCid, {
            providerAddress: this._provider.serviceProvider,
            withCDN: options?.withCDN ?? this._withCDN
        });
    }
    async providerDownload(pieceCid, options) {
        console.warn('providerDownload() is deprecated. Use download() instead.');
        return await this.download(pieceCid, options);
    }
    async getProviderInfo() {
        return await this._synapse.getProviderInfo(this.serviceProvider);
    }
    async getDataSetPieces() {
        if (this.dataSetId == null) {
            return [];
        }
        const pieces = [];
        for await (const { pieceCid } of this.getPieces()){
            pieces.push(pieceCid);
        }
        return pieces;
    }
    async *getPieces(options) {
        if (this._dataSetId == null) {
            return;
        }
        const pdpVerifierAddress = this._warmStorageService.getPDPVerifierAddress();
        const pdpVerifier = new __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$pdp$2f$verifier$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["PDPVerifier"](this._synapse.getProvider(), pdpVerifierAddress);
        const batchSize = options?.batchSize ?? 100;
        const signal = options?.signal;
        let offset = 0;
        let hasMore = true;
        while(hasMore){
            if (signal?.aborted) {
                throw (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createError"])('StorageContext', 'getPieces', 'Operation aborted');
            }
            const result = await pdpVerifier.getActivePieces(this._dataSetId, {
                offset,
                limit: batchSize,
                signal
            });
            for(let i = 0; i < result.pieces.length; i++){
                if (signal?.aborted) {
                    throw (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createError"])('StorageContext', 'getPieces', 'Operation aborted');
                }
                yield {
                    pieceCid: result.pieces[i].pieceCid,
                    pieceId: result.pieces[i].pieceId
                };
            }
            hasMore = result.hasMore;
            offset += batchSize;
        }
    }
    async _getPieceIdByCID(pieceCid) {
        if (this.dataSetId == null) {
            throw (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createError"])('StorageContext', 'getPieceIdByCID', 'Data set not found');
        }
        const parsedPieceCID = (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$core$2f$dist$2f$src$2f$piece$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["asPieceCID"])(pieceCid);
        if (parsedPieceCID == null) {
            throw (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createError"])('StorageContext', 'deletePiece', 'Invalid PieceCID provided');
        }
        const dataSetData = await this._pdpServer.getDataSet(this.dataSetId);
        const pieceData = dataSetData.pieces.find((piece)=>piece.pieceCid.toString() === parsedPieceCID.toString());
        if (pieceData == null) {
            throw (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createError"])('StorageContext', 'deletePiece', 'Piece not found in data set');
        }
        return pieceData.pieceId;
    }
    async deletePiece(piece) {
        if (this.dataSetId == null) {
            throw (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createError"])('StorageContext', 'deletePiece', 'Data set not found');
        }
        const pieceId = typeof piece === 'number' ? piece : await this._getPieceIdByCID(piece);
        const dataSetInfo = await this._warmStorageService.getDataSet(this.dataSetId);
        return this._pdpServer.deletePiece(this.dataSetId, dataSetInfo.clientDataSetId, pieceId);
    }
    async hasPiece(pieceCid) {
        const parsedPieceCID = (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$core$2f$dist$2f$src$2f$piece$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["asPieceCID"])(pieceCid);
        if (parsedPieceCID == null) {
            return false;
        }
        try {
            await this._pdpServer.findPiece(parsedPieceCID);
            return true;
        } catch  {
            return false;
        }
    }
    async pieceStatus(pieceCid) {
        if (this.dataSetId == null) {
            throw (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createError"])('StorageContext', 'pieceStatus', 'Data set not found');
        }
        const parsedPieceCID = (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$core$2f$dist$2f$src$2f$piece$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["asPieceCID"])(pieceCid);
        if (parsedPieceCID == null) {
            throw (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createError"])('StorageContext', 'pieceStatus', 'Invalid PieceCID provided');
        }
        const [exists, dataSetData, currentEpoch] = await Promise.all([
            this.hasPiece(parsedPieceCID),
            this._pdpServer.getDataSet(this.dataSetId).catch((error)=>{
                console.debug('Failed to get data set data:', error);
                return null;
            }),
            (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$epoch$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getCurrentEpoch"])(this._synapse.getProvider())
        ]);
        const network = this._synapse.getNetwork();
        let retrievalUrl = null;
        let pieceId;
        let lastProven = null;
        let nextProofDue = null;
        let inChallengeWindow = false;
        let hoursUntilChallengeWindow = 0;
        let isProofOverdue = false;
        if (exists) {
            const [providerInfo, provingParams] = await Promise.all([
                this.getProviderInfo().catch(()=>null),
                dataSetData != null ? Promise.all([
                    this._warmStorageService.getMaxProvingPeriod(),
                    this._warmStorageService.getChallengeWindow()
                ]).then(([maxProvingPeriod, challengeWindow])=>({
                        maxProvingPeriod,
                        challengeWindow
                    })).catch(()=>null) : Promise.resolve(null)
            ]);
            if (providerInfo != null) {
                if (!providerInfo.products.PDP?.data.serviceURL) {
                    throw new Error(`Provider ${providerInfo.id} does not have a PDP product with serviceURL`);
                }
                retrievalUrl = `${providerInfo.products.PDP.data.serviceURL.replace(/\/$/, '')}/piece/${parsedPieceCID.toString()}`;
            }
            if (dataSetData != null && provingParams != null) {
                const pieceData = dataSetData.pieces.find((piece)=>piece.pieceCid.toString() === parsedPieceCID.toString());
                if (pieceData != null) {
                    pieceId = pieceData.pieceId;
                    if (dataSetData.nextChallengeEpoch > 0) {
                        const challengeWindowStart = dataSetData.nextChallengeEpoch;
                        const provingDeadline = challengeWindowStart + provingParams.challengeWindow;
                        nextProofDue = (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$epoch$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["epochToDate"])(provingDeadline, network);
                        const lastProvenDate = (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$epoch$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["calculateLastProofDate"])(dataSetData.nextChallengeEpoch, provingParams.maxProvingPeriod, network);
                        if (lastProvenDate != null) {
                            lastProven = lastProvenDate;
                        }
                        inChallengeWindow = Number(currentEpoch) >= challengeWindowStart && Number(currentEpoch) < provingDeadline;
                        isProofOverdue = Number(currentEpoch) >= provingDeadline;
                        if (Number(currentEpoch) < challengeWindowStart) {
                            const timeUntil = (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$epoch$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["timeUntilEpoch"])(challengeWindowStart, Number(currentEpoch));
                            hoursUntilChallengeWindow = timeUntil.hours;
                        }
                    } else {
                        console.debug('Data set has nextChallengeEpoch=0, may have just been proven');
                    }
                }
            }
        }
        return {
            exists,
            dataSetLastProven: lastProven,
            dataSetNextProofDue: nextProofDue,
            retrievalUrl,
            pieceId,
            inChallengeWindow,
            hoursUntilChallengeWindow,
            isProofOverdue
        };
    }
    async terminate() {
        if (this.dataSetId == null) {
            throw (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createError"])('StorageContext', 'terminate', 'Data set not found');
        }
        return this._synapse.storage.terminateDataSet(this.dataSetId);
    }
} //# sourceMappingURL=context.js.map
}),
"[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/storage/manager.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "StorageManager",
    ()=>StorageManager
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$core$2f$dist$2f$src$2f$piece$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-core/dist/src/piece.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$core$2f$dist$2f$src$2f$utils$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-core/dist/src/utils/index.js [app-route] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$core$2f$dist$2f$src$2f$utils$2f$rand$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-core/dist/src/utils/rand.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f$ethers$2f$lib$2e$esm$2f$ethers$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__ethers$3e$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/ethers/lib.esm/ethers.js [app-route] (ecmascript) <export * as ethers>");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$sp$2d$registry$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/sp-registry/index.js [app-route] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$sp$2d$registry$2f$service$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/sp-registry/service.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/utils/index.js [app-route] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$metadata$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/utils/metadata.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/utils/errors.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/utils/constants.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$storage$2f$context$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/storage/context.js [app-route] (ecmascript)");
;
;
;
;
;
;
;
class StorageManager {
    _synapse;
    _warmStorageService;
    _pieceRetriever;
    _withCDN;
    _dev;
    _withIpni;
    _defaultContexts;
    constructor(synapse, warmStorageService, pieceRetriever, withCDN, dev, withIpni){
        this._synapse = synapse;
        this._warmStorageService = warmStorageService;
        this._pieceRetriever = pieceRetriever;
        this._withCDN = withCDN;
        this._dev = dev;
        this._withIpni = withIpni;
    }
    async upload(data, options) {
        if (options?.context != null || options?.contexts != null) {
            const invalidOptions = [];
            if (options.providerId !== undefined) invalidOptions.push('providerId');
            if (options.providerAddress !== undefined) invalidOptions.push('providerAddress');
            if (options.dataSetId !== undefined) invalidOptions.push('dataSetId');
            if (options.withCDN !== undefined) invalidOptions.push('withCDN');
            if (options.forceCreateDataSet !== undefined) invalidOptions.push('forceCreateDataSet');
            if (options.uploadBatchSize !== undefined) invalidOptions.push('uploadBatchSize');
            if (invalidOptions.length > 0) {
                throw (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createError"])('StorageManager', 'upload', `Cannot specify both 'context' and other options: ${invalidOptions.join(', ')}`);
            }
        }
        if (options?.contexts != null && options.contexts.length > 0) {
            if (options?.context != null) {
                throw (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createError"])('StorageManager', 'upload', "Cannot specify both 'context' and 'contexts'");
            }
        }
        const contexts = options?.contexts ?? (options?.context ? [
            options.context
        ] : await this.createContexts({
            withCDN: options?.withCDN,
            withIpni: options?.withIpni,
            count: 1,
            dev: options?.dev,
            uploadBatchSize: options?.uploadBatchSize,
            forceCreateDataSets: options?.forceCreateDataSet,
            metadata: options?.metadata,
            excludeProviderIds: options?.excludeProviderIds,
            providerIds: options?.providerId ? [
                options.providerId
            ] : undefined,
            dataSetIds: options?.dataSetId ? [
                options.dataSetId
            ] : undefined,
            callbacks: options?.callbacks
        }));
        if (contexts.length > 1) {
            if (!(data instanceof Uint8Array)) {
                throw (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createError"])('StorageManager', 'upload', 'Multi-context uploads currently only support Uint8Array. ' + 'For streaming uploads to multiple providers, convert your stream to Uint8Array first.');
            }
            const pieceCid = __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$core$2f$dist$2f$src$2f$piece$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["calculate"](data);
            return Promise.all(contexts.map((context)=>context.upload(data, {
                    ...options?.callbacks,
                    metadata: options?.metadata,
                    pieceCid,
                    signal: options?.signal
                }))).then((results)=>results[0]);
        } else {
            const context = contexts[0];
            return context.upload(data, {
                ...options?.callbacks,
                metadata: options?.metadata,
                signal: options?.signal
            });
        }
    }
    async download(pieceCid, options) {
        if (options?.context != null) {
            const invalidOptions = [];
            if (options.providerAddress !== undefined) invalidOptions.push('providerAddress');
            if (options.withCDN !== undefined) invalidOptions.push('withCDN');
            if (invalidOptions.length > 0) {
                throw (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createError"])('StorageManager', 'download', `Cannot specify both 'context' and other options: ${invalidOptions.join(', ')}`);
            }
            return await options.context.download(pieceCid, options);
        }
        const parsedPieceCID = (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$core$2f$dist$2f$src$2f$piece$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["asPieceCID"])(pieceCid);
        if (parsedPieceCID == null) {
            throw (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createError"])('StorageManager', 'download', `Invalid PieceCID: ${String(pieceCid)}`);
        }
        const withCDN = options?.withCDN ?? this._withCDN;
        if (this._defaultContexts != null && !withCDN && options?.providerAddress == null) {
            const contextsWithoutCDN = this._defaultContexts.filter((context)=>context.withCDN === false);
            const contextsHavePiece = await Promise.all(contextsWithoutCDN.map((context)=>context.hasPiece(parsedPieceCID)));
            const defaultContextsWithPiece = contextsWithoutCDN.filter((_context, i)=>contextsHavePiece[i]);
            if (defaultContextsWithPiece.length > 0) {
                options = {
                    ...options,
                    providerAddress: defaultContextsWithPiece[(0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$core$2f$dist$2f$src$2f$utils$2f$rand$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["randIndex"])(defaultContextsWithPiece.length)].provider.serviceProvider
                };
            }
        }
        const clientAddress = await this._synapse.getClient().getAddress();
        const response = await this._pieceRetriever.fetchPiece(parsedPieceCID, clientAddress, {
            providerAddress: options?.providerAddress,
            withCDN
        });
        return await (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$core$2f$dist$2f$src$2f$piece$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["downloadAndValidate"])(response, parsedPieceCID);
    }
    async preflightUpload(size, options) {
        let withCDN = options?.withCDN ?? this._withCDN;
        if (options?.metadata != null && __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["METADATA_KEYS"].WITH_CDN in options.metadata) {
            const value = options.metadata[__TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["METADATA_KEYS"].WITH_CDN];
            if (value !== '') {
                console.warn(`Warning: withCDN metadata entry has unexpected value "${value}". Expected empty string.`);
            }
            withCDN = true;
        }
        return await __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$storage$2f$context$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["StorageContext"].performPreflightCheck(this._warmStorageService, this._synapse.payments, size, withCDN);
    }
    async createContexts(options) {
        const withCDN = options?.withCDN ?? this._withCDN;
        const canUseDefault = options == null || options.providerIds == null && options.dataSetIds == null && options.forceCreateDataSets !== true && options.uploadBatchSize == null;
        if (this._defaultContexts != null) {
            const expectedSize = options?.count ?? 2;
            if (this._defaultContexts.length === expectedSize && this._defaultContexts.every((context)=>options?.excludeProviderIds?.includes(context.provider.id) !== true)) {
                const requestedMetadata = (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$metadata$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["combineMetadata"])(options?.metadata, withCDN);
                if (this._defaultContexts.every((defaultContext)=>(0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$metadata$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["metadataMatches"])(defaultContext.dataSetMetadata, requestedMetadata))) {
                    if (options?.callbacks != null) {
                        for (const defaultContext of this._defaultContexts){
                            try {
                                options.callbacks.onProviderSelected?.(defaultContext.provider);
                            } catch (error) {
                                console.error('Error in onProviderSelected callback:', error);
                            }
                            if (defaultContext.dataSetId != null) {
                                try {
                                    options.callbacks.onDataSetResolved?.({
                                        isExisting: true,
                                        dataSetId: defaultContext.dataSetId,
                                        provider: defaultContext.provider
                                    });
                                } catch (error) {
                                    console.error('Error in onDataSetResolved callback:', error);
                                }
                            }
                        }
                    }
                    return this._defaultContexts;
                }
            }
        }
        const contexts = await __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$storage$2f$context$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["StorageContext"].createContexts(this._synapse, this._warmStorageService, {
            ...options,
            withCDN,
            withIpni: options?.withIpni ?? this._withIpni,
            dev: options?.dev ?? this._dev
        });
        if (canUseDefault) {
            this._defaultContexts = contexts;
        }
        return contexts;
    }
    async createContext(options) {
        const effectiveWithCDN = options?.withCDN ?? this._withCDN;
        const canUseDefault = options == null || options.providerId == null && options.providerAddress == null && options.dataSetId == null && options.forceCreateDataSet !== true && options.uploadBatchSize == null;
        if (canUseDefault && this._defaultContexts != null) {
            const requestedMetadata = (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$metadata$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["combineMetadata"])(options?.metadata, effectiveWithCDN);
            for (const defaultContext of this._defaultContexts){
                if (options?.excludeProviderIds?.includes(defaultContext.provider.id)) {
                    continue;
                }
                if (!(0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$metadata$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["metadataMatches"])(defaultContext.dataSetMetadata, requestedMetadata)) {
                    continue;
                }
                if (options?.callbacks != null) {
                    try {
                        options.callbacks.onProviderSelected?.(defaultContext.provider);
                    } catch (error) {
                        console.error('Error in onProviderSelected callback:', error);
                    }
                    if (defaultContext.dataSetId != null) {
                        try {
                            options.callbacks.onDataSetResolved?.({
                                isExisting: true,
                                dataSetId: defaultContext.dataSetId,
                                provider: defaultContext.provider
                            });
                        } catch (error) {
                            console.error('Error in onDataSetResolved callback:', error);
                        }
                    }
                }
                return defaultContext;
            }
        }
        const context = await __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$storage$2f$context$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["StorageContext"].create(this._synapse, this._warmStorageService, {
            ...options,
            withCDN: effectiveWithCDN,
            withIpni: options?.withIpni ?? this._withIpni,
            dev: options?.dev ?? this._dev
        });
        if (canUseDefault) {
            this._defaultContexts = [
                context
            ];
        }
        return context;
    }
    async getDefaultContext() {
        return await this.createContext();
    }
    async findDataSets(clientAddress) {
        const address = clientAddress ?? await this._synapse.getClient().getAddress();
        return await this._warmStorageService.getClientDataSetsWithDetails(address);
    }
    async terminateDataSet(dataSetId) {
        return this._warmStorageService.terminateDataSet(this._synapse.getSigner(), dataSetId);
    }
    async getStorageInfo() {
        try {
            const getOptionalAllowances = async ()=>{
                try {
                    const warmStorageAddress = this._synapse.getWarmStorageAddress();
                    const approval = await this._synapse.payments.serviceApproval(warmStorageAddress, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["TOKENS"].USDFC);
                    return {
                        service: warmStorageAddress,
                        isApproved: approval.isApproved,
                        rateAllowance: approval.rateAllowance,
                        lockupAllowance: approval.lockupAllowance,
                        rateUsed: approval.rateUsed,
                        lockupUsed: approval.lockupUsed
                    };
                } catch  {
                    return null;
                }
            };
            const registryAddress = this._warmStorageService.getServiceProviderRegistryAddress();
            const spRegistry = new __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$sp$2d$registry$2f$service$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["SPRegistryService"](this._synapse.getProvider(), registryAddress);
            const [pricingData, approvedIds, allowances] = await Promise.all([
                this._warmStorageService.getServicePrice(),
                this._warmStorageService.getApprovedProviderIds(),
                getOptionalAllowances()
            ]);
            const providers = await spRegistry.getProviders(approvedIds);
            const epochsPerMonth = BigInt(pricingData.epochsPerMonth);
            const noCDNPerEpoch = BigInt(pricingData.pricePerTiBPerMonthNoCDN) / epochsPerMonth;
            const withCDNPerEpoch = BigInt(pricingData.pricePerTiBPerMonthNoCDN) / epochsPerMonth;
            const noCDNPerDay = BigInt(pricingData.pricePerTiBPerMonthNoCDN) / __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["TIME_CONSTANTS"].DAYS_PER_MONTH;
            const withCDNPerDay = BigInt(pricingData.pricePerTiBPerMonthNoCDN) / __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["TIME_CONSTANTS"].DAYS_PER_MONTH;
            const validProviders = providers.filter((p)=>p.serviceProvider !== __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f$ethers$2f$lib$2e$esm$2f$ethers$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__ethers$3e$__["ethers"].ZeroAddress);
            const network = this._synapse.getNetwork();
            return {
                pricing: {
                    noCDN: {
                        perTiBPerMonth: BigInt(pricingData.pricePerTiBPerMonthNoCDN),
                        perTiBPerDay: noCDNPerDay,
                        perTiBPerEpoch: noCDNPerEpoch
                    },
                    withCDN: {
                        perTiBPerMonth: BigInt(pricingData.pricePerTiBPerMonthNoCDN),
                        perTiBPerDay: withCDNPerDay,
                        perTiBPerEpoch: withCDNPerEpoch
                    },
                    tokenAddress: pricingData.tokenAddress,
                    tokenSymbol: 'USDFC'
                },
                providers: validProviders,
                serviceParameters: {
                    network,
                    epochsPerMonth,
                    epochsPerDay: __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["TIME_CONSTANTS"].EPOCHS_PER_DAY,
                    epochDuration: __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["TIME_CONSTANTS"].EPOCH_DURATION,
                    minUploadSize: __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["SIZE_CONSTANTS"].MIN_UPLOAD_SIZE,
                    maxUploadSize: __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["SIZE_CONSTANTS"].MAX_UPLOAD_SIZE,
                    warmStorageAddress: this._synapse.getWarmStorageAddress(),
                    paymentsAddress: this._warmStorageService.getPaymentsAddress(),
                    pdpVerifierAddress: this._warmStorageService.getPDPVerifierAddress()
                },
                allowances
            };
        } catch (error) {
            throw new Error(`Failed to get storage service information: ${error instanceof Error ? error.message : String(error)}`);
        }
    }
} //# sourceMappingURL=manager.js.map
}),
"[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/storage/service.js [app-route] (ecmascript) <locals>", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([]);
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$storage$2f$context$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/storage/context.js [app-route] (ecmascript)"); //# sourceMappingURL=service.js.map
;
}),
"[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/storage/index.js [app-route] (ecmascript) <locals>", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([]);
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$storage$2f$context$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/storage/context.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$storage$2f$manager$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/storage/manager.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$storage$2f$service$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/storage/service.js [app-route] (ecmascript) <locals>"); //# sourceMappingURL=index.js.map
;
;
;
}),
"[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/sp-registry/types.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "PRODUCTS",
    ()=>PRODUCTS
]);
const PRODUCTS = {
    PDP: 0
}; //# sourceMappingURL=types.js.map
}),
"[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/subgraph/queries.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "QUERIES",
    ()=>QUERIES
]);
const QUERIES = {
    GET_APPROVED_PROVIDERS_FOR_PIECE_LINK: `
    query GetApprovedProvidersForCommP($cid: Bytes!) {
      pieces(where: { cid: $cid }) {
        id
        dataSet {
          setId
          serviceProvider {
            id
            providerId
            serviceProvider
            payee
            name
            description
            registeredAt
            status
            approvedAt
            products {
              decodedProductData
              productType
              isActive
              capabilityValues
              capabilityKeys
            }
          }
        }
      }
    }
  `,
    GET_PROVIDER_BY_ADDRESS: `
    query Provider($serviceProvider: ID!) {
      provider (id: $serviceProvider) {
        id
        providerId
        serviceProvider
        payee
        name
        description
        registeredAt
        status
        approvedAt
        products {
          decodedProductData
          productType
          isActive
          capabilityValues
          capabilityKeys
        }
      }
    }
  `,
    GET_PROVIDERS_FLEXIBLE: `
    query ProvidersFlexible($where: Provider_filter, $first: Int, $skip: Int, $orderBy: Provider_orderBy, $orderDirection: OrderDirection) {
      providers(
        where: $where
        first: $first
        skip: $skip
        orderBy: $orderBy
        orderDirection: $orderDirection
      ) {
        id
        providerId
        serviceProvider
        payee
        registeredAt
        approvedAt
        status
        totalFaultedPeriods
        totalFaultedPieces
        totalDataSets
        totalPieces
        totalDataSize
        createdAt
        updatedAt
        products {
          decodedProductData
          productType
          isActive
          capabilityValues
          capabilityKeys
        }
      }
    }
  `,
    GET_DATA_SETS_FLEXIBLE: `
    query DataSetsFlexible($where: DataSet_filter, $first: Int, $skip: Int, $orderBy: DataSet_orderBy, $orderDirection: OrderDirection) {
      dataSets(
        where: $where
        first: $first
        skip: $skip
        orderBy: $orderBy
        orderDirection: $orderDirection
      ) {
        id
        setId
        listener
        payer
        withCDN
        isActive
        leafCount
        challengeRange
        lastProvenEpoch
        nextChallengeEpoch
        totalPieces
        totalDataSize
        totalProofs
        totalProvedPieces
        totalFaultedPeriods
        totalFaultedPieces
        metadataKeys
        metadataValues
        createdAt
        updatedAt
        serviceProvider {
          id
          providerId
          serviceProvider
          payee
          name
          description
          registeredAt
          status
          approvedAt
          products {
            decodedProductData
            productType
            isActive
            capabilityValues
            capabilityKeys
          }
        }
        rails {
          id
          type
          railId
          token
          paymentRate
          settledUpto
          endEpoch
        }
      }
    }
  `,
    GET_PIECES_FLEXIBLE: `
    query PiecesFlexible($where: Piece_filter, $first: Int, $skip: Int, $orderBy: Piece_orderBy, $orderDirection: OrderDirection) {
      pieces(
        where: $where
        first: $first
        skip: $skip
        orderBy: $orderBy
        orderDirection: $orderDirection
      ) {
        id
        setId
        pieceId
        rawSize
        leafCount
        cid
        removed
        totalProofsSubmitted
        totalPeriodsFaulted
        lastProvenEpoch
        lastProvenAt
        lastFaultedEpoch
        lastFaultedAt
        createdAt
        metadataKeys
        metadataValues
        dataSet {
          id
          setId
          isActive
          serviceProvider {
            id
            providerId
            serviceProvider
            payee
            name
            description
            registeredAt
            status
            approvedAt
            products {
              decodedProductData
              productType
              isActive
              capabilityValues
              capabilityKeys
            }
          }
        }
      }
    }
  `,
    GET_FAULT_RECORDS_FLEXIBLE: `
    query FaultRecordsFlexible($where: FaultRecord_filter, $first: Int, $skip: Int, $orderBy: FaultRecord_orderBy, $orderDirection: OrderDirection) {
      faultRecords(
        where: $where
        first: $first
        skip: $skip
        orderBy: $orderBy
        orderDirection: $orderDirection
      ) {
        id
        dataSetId
        pieceIds
        currentChallengeEpoch
        nextChallengeEpoch
        periodsFaulted
        deadline
        createdAt
        dataSet {
          id
          setId
          serviceProvider {
            id
            providerId
            serviceProvider
            payee
            name
            description
            registeredAt
            status
            approvedAt
            products {
              decodedProductData
              productType
              isActive
              capabilityValues
              capabilityKeys
            }
          }
        }
      }
    }
  `
}; //# sourceMappingURL=queries.js.map
}),
"[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/subgraph/service.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "SubgraphService",
    ()=>SubgraphService
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$core$2f$dist$2f$src$2f$piece$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-core/dist/src/piece.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$bytes$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/multiformats/dist/src/bytes.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$cid$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/multiformats/dist/src/cid.js [app-route] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$sp$2d$registry$2f$types$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/sp-registry/types.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/utils/errors.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$subgraph$2f$queries$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/subgraph/queries.js [app-route] (ecmascript)");
;
;
;
;
;
;
class SubgraphService {
    endpoint;
    headers;
    constructor(subgraphConfig){
        this.endpoint = this.resolveEndpoint(subgraphConfig);
        this.headers = this.buildHeaders(subgraphConfig.apiKey);
    }
    resolveEndpoint(config) {
        if (config.endpoint != null && config.endpoint.trim() !== '') {
            return config.endpoint.trim();
        }
        if (config.goldsky != null) {
            return this.buildGoldskyEndpoint(config.goldsky);
        }
        throw (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createError"])('SubgraphService', 'constructor', 'Invalid configuration: provide either endpoint or complete goldsky config');
    }
    buildGoldskyEndpoint(goldsky) {
        const { projectId, subgraphName, version } = goldsky;
        if (projectId?.trim() == null || projectId?.trim() === '' || subgraphName?.trim() == null || subgraphName?.trim() === '' || version?.trim() == null || version?.trim() === '') {
            throw (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createError"])('SubgraphService', 'constructor', 'Incomplete Goldsky config: projectId, subgraphName, and version required');
        }
        return `https://api.goldsky.com/api/public/${projectId}/subgraphs/${subgraphName}/${version}/gn`;
    }
    buildHeaders(apiKey) {
        const headers = {
            'Content-Type': 'application/json'
        };
        if (apiKey != null && apiKey !== '') {
            return {
                ...headers,
                Authorization: `Bearer ${apiKey}`
            };
        }
        return headers;
    }
    normalizeQueryOptions(options = {}) {
        return {
            where: {},
            first: 10,
            skip: 0,
            orderBy: 'createdAt',
            orderDirection: 'desc',
            ...options
        };
    }
    async executeQuery(query, variables, operation) {
        try {
            const response = await fetch(this.endpoint, {
                method: 'POST',
                headers: this.headers,
                body: JSON.stringify({
                    query,
                    variables
                })
            });
            if (!response.ok) {
                const errorText = await response.text();
                throw (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createError"])('SubgraphService', operation, `HTTP ${response.status}: ${errorText}`);
            }
            const result = await response.json();
            if (result.errors != null && result.errors.length > 0) {
                const errorMsg = result.errors.map((e)=>e.message).join('; ');
                throw (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createError"])('SubgraphService', operation, `GraphQL errors: ${errorMsg}`);
            }
            return result.data;
        } catch (error) {
            if (error instanceof Error && error.name === 'SynapseError') {
                throw error;
            }
            throw (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createError"])('SubgraphService', operation, `Query execution failed: ${error.message}`, {
                cause: error
            });
        }
    }
    getProductType(productType) {
        const entry = Object.entries(__TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$sp$2d$registry$2f$types$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["PRODUCTS"]).find(([, value])=>value === productType);
        return entry != null ? entry[0] : 'PDP';
    }
    transformProviderData(data) {
        const safeData = {
            providerId: data?.providerId ?? 0,
            serviceProvider: data?.serviceProvider ?? '',
            payee: data?.payee ?? '',
            name: data?.name ?? '',
            description: data?.description ?? '',
            status: data?.status ?? 'UNKNOWN',
            products: Array.isArray(data?.products) ? data.products : []
        };
        return {
            id: safeData.providerId,
            serviceProvider: safeData.serviceProvider,
            payee: safeData.payee,
            name: safeData.name,
            description: safeData.description,
            active: safeData.status === 'APPROVED',
            products: this.transformProducts(safeData.products)
        };
    }
    transformProducts(products) {
        return products.reduce((productAcc, product)=>{
            const productType = this.getProductType(product?.productType);
            const serviceProduct = this.createServiceProduct(product, productType);
            if (serviceProduct != null) {
                productAcc[productType] = serviceProduct;
            }
            return productAcc;
        }, {});
    }
    createServiceProduct(product, productType) {
        try {
            return {
                type: productType,
                isActive: product?.isActive ?? false,
                capabilities: this.transformCapabilities(product?.capabilityValues),
                data: this.parseProductData(product?.decodedProductData)
            };
        } catch (error) {
            console.warn(`SubgraphService: Failed to create service product for type ${productType}:`, error instanceof Error ? error.message : 'Unknown error');
            return null;
        }
    }
    transformCapabilities(capabilityValues) {
        if (!Array.isArray(capabilityValues)) {
            return {};
        }
        return capabilityValues.reduce((capabilityAcc, capability)=>{
            if (capability?.key != null && capability?.value != null) {
                capabilityAcc[capability.key] = String(capability.value);
            }
            return capabilityAcc;
        }, {});
    }
    parseProductData(decodedProductData) {
        try {
            if (decodedProductData == null || decodedProductData.trim() === '') {
                throw new Error('Empty or null product data');
            }
            const parsed = JSON.parse(decodedProductData);
            if (parsed?.serviceURL == null) {
                throw new Error('Missing required serviceURL field');
            }
            return parsed;
        } catch (error) {
            console.warn(`SubgraphService: Failed to parse product data, using defaults:`, error instanceof Error ? error.message : 'Unknown error');
            return {
                serviceURL: '',
                minPieceSizeInBytes: 0n,
                maxPieceSizeInBytes: 0n,
                ipniPiece: false,
                ipniIpfs: false,
                storagePricePerTibPerDay: 0n,
                minProvingPeriodInEpochs: 0n,
                location: '',
                paymentTokenAddress: '0x0000000000000000000000000000000000000000'
            };
        }
    }
    parseTimestamp(value) {
        if (value == null) return 0;
        const parsed = Number(value);
        return Number.isNaN(parsed) ? 0 : parsed;
    }
    safeConvertHexToCid(hexCid) {
        try {
            const cleanHex = hexCid.startsWith('0x') ? hexCid.slice(2) : hexCid;
            const cidBytes = (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$bytes$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["fromHex"])(cleanHex);
            const cid = __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$cid$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__["CID"].decode(cidBytes);
            const pieceCid = (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$core$2f$dist$2f$src$2f$piece$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["asPieceCID"])(cid);
            if (pieceCid == null) {
                throw new Error(`Failed to convert CID to PieceCID format: ${hexCid}`);
            }
            return pieceCid;
        } catch (error) {
            console.warn(`SubgraphService: queryProviders: Failed to convert CID to PieceCID format: ${error instanceof Error ? error.message : 'Unknown error'}`);
            return null;
        }
    }
    isValidProviderData(data) {
        return data?.id != null && data.id.trim() !== '' && data?.products != null && data.products.length > 0;
    }
    async getApprovedProvidersForPieceCID(pieceCid) {
        const pieceCidParsed = (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$core$2f$dist$2f$src$2f$piece$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["asPieceCID"])(pieceCid);
        if (pieceCidParsed == null) {
            throw (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createError"])('SubgraphService', 'getApprovedProvidersForPieceCID', 'Invalid PieceCID');
        }
        const hexPieceCid = (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f$multiformats$2f$dist$2f$src$2f$bytes$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["toHex"])(pieceCidParsed.bytes);
        const data = await this.executeQuery(__TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$subgraph$2f$queries$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["QUERIES"].GET_APPROVED_PROVIDERS_FOR_PIECE_LINK, {
            cid: hexPieceCid
        }, 'getApprovedProvidersForPieceCID');
        if (data?.pieces == null || data.pieces.length === 0) {
            console.log(`SubgraphService: No providers found for PieceCID: ${pieceCidParsed.toString()}`);
            return [];
        }
        const uniqueProviderMap = data.pieces.reduce((acc, piece)=>{
            const provider = piece.dataSet.serviceProvider;
            const address = provider?.serviceProvider?.toLowerCase();
            if (address == null || address === '' || acc.has(address)) {
                return acc;
            }
            if (!this.isValidProviderData(provider)) {
                console.warn('SubgraphService: Skipping incomplete provider data for approved provider:', provider);
                return acc;
            }
            acc.set(address, provider);
            return acc;
        }, new Map());
        return Array.from(uniqueProviderMap.values()).map((provider)=>this.transformProviderData(provider));
    }
    async getProviderByAddress(address) {
        const data = await this.executeQuery(__TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$subgraph$2f$queries$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["QUERIES"].GET_PROVIDER_BY_ADDRESS, {
            serviceProvider: address
        }, 'getProviderByAddress');
        if (data?.provider == null) {
            console.log(`SubgraphService: No provider found for address: ${address}`);
            return null;
        }
        return this.transformProviderData(data.provider);
    }
    async queryProviders(options = {}) {
        const data = await this.executeQuery(__TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$subgraph$2f$queries$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["QUERIES"].GET_PROVIDERS_FLEXIBLE, this.normalizeQueryOptions(options), 'queryProviders');
        if (data?.providers == null || data?.providers?.length === 0) {
            console.log('SubgraphService: No providers found for the given criteria');
            return [];
        }
        return data.providers.filter((provider)=>this.isValidProviderData(provider)).map((provider)=>this.transformProviderData(provider));
    }
    async queryDataSets(options = {}) {
        const data = await this.executeQuery(__TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$subgraph$2f$queries$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["QUERIES"].GET_DATA_SETS_FLEXIBLE, this.normalizeQueryOptions(options), 'queryDataSets');
        if (data?.dataSets == null || data?.dataSets?.length === 0) {
            console.log('SubgraphService: No data sets found for the given criteria');
            return [];
        }
        return data.dataSets.map((dataSet)=>({
                id: dataSet.id,
                setId: this.parseTimestamp(dataSet.setId),
                listener: dataSet.listener ?? '',
                payer: dataSet.payer ?? '',
                withCDN: dataSet.withCDN ?? false,
                isActive: dataSet.isActive,
                leafCount: this.parseTimestamp(dataSet.leafCount),
                challengeRange: this.parseTimestamp(dataSet.challengeRange),
                lastProvenEpoch: this.parseTimestamp(dataSet.lastProvenEpoch),
                nextChallengeEpoch: this.parseTimestamp(dataSet.nextChallengeEpoch),
                totalPieces: this.parseTimestamp(dataSet.totalPieces),
                totalDataSize: this.parseTimestamp(dataSet.totalDataSize),
                totalProofs: this.parseTimestamp(dataSet.totalProofs),
                totalProvedPieces: this.parseTimestamp(dataSet.totalProvedPieces),
                totalFaultedPeriods: this.parseTimestamp(dataSet.totalFaultedPeriods),
                totalFaultedPieces: this.parseTimestamp(dataSet.totalFaultedPieces),
                metadataKeys: dataSet.metadataKeys ?? [],
                metadataValues: dataSet.metadataValues ?? [],
                createdAt: this.parseTimestamp(dataSet.createdAt),
                updatedAt: this.parseTimestamp(dataSet.updatedAt),
                serviceProvider: dataSet.serviceProvider != null ? this.transformProviderData(dataSet.serviceProvider) : this.transformProviderData({}),
                rails: dataSet.rails != null ? dataSet.rails.map((rail)=>({
                        id: rail.id,
                        type: rail.type,
                        railId: this.parseTimestamp(rail.railId),
                        token: rail.token,
                        paymentRate: this.parseTimestamp(rail.paymentRate),
                        settledUpto: this.parseTimestamp(rail.settledUpto),
                        endEpoch: this.parseTimestamp(rail.endEpoch)
                    })) : undefined
            }));
    }
    async queryPieces(options = {}) {
        const data = await this.executeQuery(__TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$subgraph$2f$queries$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["QUERIES"].GET_PIECES_FLEXIBLE, this.normalizeQueryOptions(options), 'queryPieces');
        if (data?.pieces == null || data?.pieces?.length === 0) {
            console.log('SubgraphService: No pieces found for the given criteria');
            return [];
        }
        return data.pieces.map((piece)=>({
                id: piece.id,
                setId: this.parseTimestamp(piece.setId),
                pieceId: this.parseTimestamp(piece.pieceId),
                rawSize: this.parseTimestamp(piece.rawSize),
                leafCount: this.parseTimestamp(piece.leafCount),
                cid: this.safeConvertHexToCid(piece.cid),
                removed: piece.removed,
                totalProofsSubmitted: this.parseTimestamp(piece.totalProofsSubmitted),
                totalPeriodsFaulted: this.parseTimestamp(piece.totalPeriodsFaulted),
                lastProvenEpoch: this.parseTimestamp(piece.lastProvenEpoch),
                lastProvenAt: this.parseTimestamp(piece.lastProvenAt),
                lastFaultedEpoch: this.parseTimestamp(piece.lastFaultedEpoch),
                lastFaultedAt: this.parseTimestamp(piece.lastFaultedAt),
                createdAt: this.parseTimestamp(piece.createdAt),
                metadataKeys: piece.metadataKeys ?? [],
                metadataValues: piece.metadataValues ?? [],
                dataSet: {
                    id: piece.dataSet.id,
                    setId: this.parseTimestamp(piece.dataSet.setId),
                    isActive: piece.dataSet.isActive,
                    serviceProvider: this.transformProviderData(piece.dataSet.serviceProvider)
                }
            }));
    }
    async queryFaultRecords(options = {}) {
        const data = await this.executeQuery(__TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$subgraph$2f$queries$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["QUERIES"].GET_FAULT_RECORDS_FLEXIBLE, this.normalizeQueryOptions(options), 'queryFaultRecords');
        if (data?.faultRecords == null || data?.faultRecords?.length === 0) {
            console.log('SubgraphService: No fault records found for the given criteria');
            return [];
        }
        return data.faultRecords.map((fault)=>({
                id: fault.id,
                dataSetId: this.parseTimestamp(fault.dataSetId),
                pieceIds: fault.pieceIds.map((id)=>this.parseTimestamp(id)),
                currentChallengeEpoch: this.parseTimestamp(fault.currentChallengeEpoch),
                nextChallengeEpoch: this.parseTimestamp(fault.nextChallengeEpoch),
                periodsFaulted: this.parseTimestamp(fault.periodsFaulted),
                deadline: this.parseTimestamp(fault.deadline),
                createdAt: this.parseTimestamp(fault.createdAt),
                dataSet: {
                    id: fault.dataSet.id,
                    setId: this.parseTimestamp(fault.dataSet.setId),
                    serviceProvider: this.transformProviderData(fault.dataSet.serviceProvider)
                }
            }));
    }
} //# sourceMappingURL=service.js.map
}),
"[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/subgraph/index.js [app-route] (ecmascript) <locals>", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([]);
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$subgraph$2f$service$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/subgraph/service.js [app-route] (ecmascript)"); //# sourceMappingURL=index.js.map
;
}),
"[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/retriever/utils.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "fetchPiecesFromProviders",
    ()=>fetchPiecesFromProviders
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/utils/errors.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$piece$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/utils/piece.js [app-route] (ecmascript)");
;
;
async function fetchPiecesFromProviders(providers, pieceCid, retrieverName, signal) {
    const failures = [];
    const abortControllers = [];
    const providerAttempts = providers.map(async (provider, index)=>{
        const controller = new AbortController();
        abortControllers[index] = controller;
        if (signal != null) {
            signal.addEventListener('abort', ()=>{
                controller.abort(signal.reason);
            }, {
                once: true
            });
            if (signal.aborted) {
                controller.abort(signal.reason);
            }
        }
        try {
            if (!provider.products.PDP?.data.serviceURL) {
                throw new Error(`Provider ${provider.id} does not have PDP product with serviceURL`);
            }
            const findUrl = (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$piece$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["constructFindPieceUrl"])(provider.products.PDP.data.serviceURL, pieceCid);
            const findResponse = await fetch(findUrl, {
                signal: controller.signal
            });
            if (!findResponse.ok) {
                failures.push({
                    provider: provider.serviceProvider,
                    error: `findPiece returned ${findResponse.status}`
                });
                throw new Error('Provider does not have piece');
            }
            const downloadUrl = (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$piece$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["constructPieceUrl"])(provider.products.PDP.data.serviceURL, pieceCid);
            const response = await fetch(downloadUrl, {
                signal: controller.signal
            });
            if (response.ok) {
                return {
                    response,
                    index
                };
            }
            failures.push({
                provider: provider.serviceProvider,
                error: `download returned ${response.status}`
            });
            throw new Error(`Download failed with status ${response.status}`);
        } catch (error) {
            const errorMsg = error.message ?? 'Unknown error';
            if (!failures.some((f)=>f.provider === provider.serviceProvider)) {
                failures.push({
                    provider: provider.serviceProvider,
                    error: errorMsg
                });
            }
            if (errorMsg !== 'This operation was aborted') {
                console.warn(`Failed to fetch from provider ${provider.serviceProvider}:`, errorMsg);
            }
            throw error;
        }
    });
    try {
        const { response, index: winnerIndex } = await Promise.any(providerAttempts);
        abortControllers.forEach((ctrl, i)=>{
            if (i !== winnerIndex) {
                ctrl.abort();
            }
        });
        return response;
    } catch (error) {
        if (error instanceof AggregateError) {
            const failureDetails = failures.map((f)=>`${f.provider}: ${f.error}`).join('; ');
            throw (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createError"])(retrieverName, 'fetchPiecesFromProviders', `All providers failed to serve piece ${pieceCid.toString()}. Details: ${failureDetails}`);
        }
        throw error;
    }
} //# sourceMappingURL=utils.js.map
}),
"[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/retriever/chain.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "ChainRetriever",
    ()=>ChainRetriever
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/utils/index.js [app-route] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/utils/errors.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$retriever$2f$utils$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/retriever/utils.js [app-route] (ecmascript)");
;
;
class ChainRetriever {
    warmStorageService;
    childRetriever;
    spRegistry;
    constructor(warmStorageService, spRegistry, childRetriever){
        this.warmStorageService = warmStorageService;
        this.spRegistry = spRegistry;
        this.childRetriever = childRetriever;
    }
    async findProviders(client, providerAddress) {
        if (providerAddress != null) {
            const provider = await this.spRegistry.getProviderByAddress(providerAddress);
            if (provider == null) {
                throw (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createError"])('ChainRetriever', 'findProviders', `Provider ${providerAddress} not found in registry`);
            }
            return [
                provider
            ];
        }
        const dataSets = await this.warmStorageService.getClientDataSetsWithDetails(client);
        const validDataSets = dataSets.filter((ds)=>ds.isLive && ds.currentPieceCount > 0);
        if (validDataSets.length === 0) {
            throw (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createError"])('ChainRetriever', 'findProviders', `No active data sets with data found for client ${client}`);
        }
        const uniqueProviderIds = [
            ...new Set(validDataSets.map((ds)=>ds.providerId))
        ];
        const providerInfos = await this.spRegistry.getProviders(uniqueProviderIds);
        const validProviderInfos = providerInfos.filter((info)=>info != null);
        if (validProviderInfos.length === 0) {
            throw (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createError"])('ChainRetriever', 'findProviders', 'No valid providers found (all providers may have been removed from registry or are inactive)');
        }
        return validProviderInfos;
    }
    async fetchPiece(pieceCid, client, options) {
        const tryChildOrThrow = async (reason)=>{
            if (this.childRetriever !== undefined) {
                return await this.childRetriever.fetchPiece(pieceCid, client, options);
            }
            throw (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createError"])('ChainRetriever', 'fetchPiece', `Failed to retrieve piece ${pieceCid.toString()}: ${reason}`);
        };
        let providersToTry = [];
        try {
            providersToTry = await this.findProviders(client, options?.providerAddress);
        } catch (error) {
            const message = error instanceof Error ? error.message : 'Provider discovery failed';
            return await tryChildOrThrow(message);
        }
        if (providersToTry.length === 0) {
            return await tryChildOrThrow('No providers found and no additional retriever method was configured');
        }
        try {
            return await (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$retriever$2f$utils$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["fetchPiecesFromProviders"])(providersToTry, pieceCid, 'ChainRetriever', options?.signal);
        } catch  {
            return await tryChildOrThrow('All provider retrieval attempts failed and no additional retriever method was configured');
        }
    }
} //# sourceMappingURL=chain.js.map
}),
"[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/retriever/filbeam.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "FilBeamRetriever",
    ()=>FilBeamRetriever
]);
class FilBeamRetriever {
    baseRetriever;
    network;
    constructor(baseRetriever, network){
        this.baseRetriever = baseRetriever;
        this.network = network;
    }
    hostname() {
        return this.network === 'mainnet' ? 'filbeam.io' : 'calibration.filbeam.io';
    }
    async fetchPiece(pieceCid, client, options) {
        if (options?.withCDN === true) {
            const cdnUrl = `https://${client}.${this.hostname()}/${pieceCid.toString()}`;
            try {
                const cdnResponse = await fetch(cdnUrl, {
                    signal: options?.signal
                });
                if (cdnResponse.ok) {
                    return cdnResponse;
                } else if (cdnResponse.status === 402) {
                    console.warn('CDN requires payment. Please initialise Synapse SDK with the option `withCDN: true` and re-upload your files.');
                } else {
                    console.warn('CDN fetch failed with status:', cdnResponse.status);
                }
            } catch (error) {
                console.warn('CDN fetch failed:', error);
            }
            console.log('Falling back to direct retrieval');
        }
        return await this.baseRetriever.fetchPiece(pieceCid, client, options);
    }
} //# sourceMappingURL=filbeam.js.map
}),
"[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/retriever/subgraph.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "SubgraphRetriever",
    ()=>SubgraphRetriever
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/utils/errors.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$retriever$2f$utils$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/retriever/utils.js [app-route] (ecmascript)");
;
;
class SubgraphRetriever {
    subgraphService;
    childRetriever;
    constructor(subgraphService, childRetriever){
        this.subgraphService = subgraphService;
        this.childRetriever = childRetriever;
    }
    async findProviders(pieceCid, providerAddress) {
        if (providerAddress != null) {
            const provider = await this.subgraphService.getProviderByAddress(providerAddress);
            return provider !== null ? [
                provider
            ] : [];
        }
        return await this.subgraphService.getApprovedProvidersForPieceCID(pieceCid);
    }
    async fetchPiece(pieceCid, client, options) {
        const tryChildOrThrow = async (reason)=>{
            if (this.childRetriever !== undefined) {
                return await this.childRetriever.fetchPiece(pieceCid, client, options);
            }
            throw (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createError"])('SubgraphRetriever', 'fetchPiece', `Failed to retrieve piece ${pieceCid.toString()}: ${reason}`);
        };
        let providersToTry = [];
        try {
            providersToTry = await this.findProviders(pieceCid, options?.providerAddress);
        } catch  {
            return await tryChildOrThrow('Provider discovery failed and no additional retriever method was configured');
        }
        if (providersToTry.length === 0) {
            return await tryChildOrThrow('No providers found and no additional retriever method was configured');
        }
        try {
            return await (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$retriever$2f$utils$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["fetchPiecesFromProviders"])(providersToTry, pieceCid, 'SubgraphRetriever', options?.signal);
        } catch  {
            return await tryChildOrThrow('All provider retrieval attempts failed and no additional retriever method was configured');
        }
    }
} //# sourceMappingURL=subgraph.js.map
}),
"[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/retriever/index.js [app-route] (ecmascript) <locals>", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([]);
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$retriever$2f$chain$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/retriever/chain.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$retriever$2f$filbeam$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/retriever/filbeam.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$retriever$2f$subgraph$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/retriever/subgraph.js [app-route] (ecmascript)"); //# sourceMappingURL=index.js.map
;
;
;
}),
"[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/warm-storage/service.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "WarmStorageService",
    ()=>WarmStorageService
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f$ethers$2f$lib$2e$esm$2f$ethers$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__ethers$3e$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/ethers/lib.esm/ethers.js [app-route] (ecmascript) <export * as ethers>");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$pdp$2f$verifier$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/pdp/verifier.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/utils/constants.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/utils/index.js [app-route] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/utils/errors.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$network$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/utils/network.js [app-route] (ecmascript)");
;
;
;
;
class WarmStorageService {
    _provider;
    _warmStorageAddress;
    _warmStorageContract = null;
    _warmStorageViewContract = null;
    _pdpVerifier = null;
    _addresses;
    constructor(provider, warmStorageAddress, addresses){
        this._provider = provider;
        this._warmStorageAddress = warmStorageAddress;
        this._addresses = addresses;
    }
    static async create(provider, warmStorageAddress) {
        const networkName = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$network$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getFilecoinNetworkType"])(provider);
        const multicall = new __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f$ethers$2f$lib$2e$esm$2f$ethers$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__ethers$3e$__["ethers"].Contract(__TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["CONTRACT_ADDRESSES"].MULTICALL3[networkName], __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["CONTRACT_ABIS"].MULTICALL3, provider);
        const iface = new __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f$ethers$2f$lib$2e$esm$2f$ethers$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__ethers$3e$__["ethers"].Interface(__TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["CONTRACT_ABIS"].WARM_STORAGE);
        const calls = [
            {
                target: warmStorageAddress,
                allowFailure: false,
                callData: iface.encodeFunctionData('pdpVerifierAddress')
            },
            {
                target: warmStorageAddress,
                allowFailure: false,
                callData: iface.encodeFunctionData('paymentsContractAddress')
            },
            {
                target: warmStorageAddress,
                allowFailure: false,
                callData: iface.encodeFunctionData('usdfcTokenAddress')
            },
            {
                target: warmStorageAddress,
                allowFailure: false,
                callData: iface.encodeFunctionData('filBeamBeneficiaryAddress')
            },
            {
                target: warmStorageAddress,
                allowFailure: false,
                callData: iface.encodeFunctionData('viewContractAddress')
            },
            {
                target: warmStorageAddress,
                allowFailure: false,
                callData: iface.encodeFunctionData('serviceProviderRegistry')
            },
            {
                target: warmStorageAddress,
                allowFailure: false,
                callData: iface.encodeFunctionData('sessionKeyRegistry')
            }
        ];
        const results = await multicall.aggregate3.staticCall(calls);
        const addresses = {
            pdpVerifier: iface.decodeFunctionResult('pdpVerifierAddress', results[0].returnData)[0],
            payments: iface.decodeFunctionResult('paymentsContractAddress', results[1].returnData)[0],
            usdfcToken: iface.decodeFunctionResult('usdfcTokenAddress', results[2].returnData)[0],
            filBeamBeneficiary: iface.decodeFunctionResult('filBeamBeneficiaryAddress', results[3].returnData)[0],
            viewContract: iface.decodeFunctionResult('viewContractAddress', results[4].returnData)[0],
            serviceProviderRegistry: iface.decodeFunctionResult('serviceProviderRegistry', results[5].returnData)[0],
            sessionKeyRegistry: iface.decodeFunctionResult('sessionKeyRegistry', results[6].returnData)[0]
        };
        return new WarmStorageService(provider, warmStorageAddress, addresses);
    }
    getPDPVerifierAddress() {
        return this._addresses.pdpVerifier;
    }
    getPaymentsAddress() {
        return this._addresses.payments;
    }
    getUSDFCTokenAddress() {
        return this._addresses.usdfcToken;
    }
    getViewContractAddress() {
        return this._addresses.viewContract;
    }
    getServiceProviderRegistryAddress() {
        return this._addresses.serviceProviderRegistry;
    }
    getSessionKeyRegistryAddress() {
        return this._addresses.sessionKeyRegistry;
    }
    getProvider() {
        return this._provider;
    }
    _getWarmStorageContract() {
        if (this._warmStorageContract == null) {
            this._warmStorageContract = new __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f$ethers$2f$lib$2e$esm$2f$ethers$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__ethers$3e$__["ethers"].Contract(this._warmStorageAddress, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["CONTRACT_ABIS"].WARM_STORAGE, this._provider);
        }
        return this._warmStorageContract;
    }
    _getWarmStorageViewContract() {
        if (this._warmStorageViewContract == null) {
            const viewAddress = this.getViewContractAddress();
            this._warmStorageViewContract = new __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f$ethers$2f$lib$2e$esm$2f$ethers$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__ethers$3e$__["ethers"].Contract(viewAddress, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["CONTRACT_ABIS"].WARM_STORAGE_VIEW, this._provider);
        }
        return this._warmStorageViewContract;
    }
    _getPDPVerifier() {
        if (this._pdpVerifier == null) {
            const address = this.getPDPVerifierAddress();
            this._pdpVerifier = new __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$pdp$2f$verifier$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["PDPVerifier"](this._provider, address);
        }
        return this._pdpVerifier;
    }
    async getDataSet(dataSetId) {
        const viewContract = this._getWarmStorageViewContract();
        const ds = await viewContract.getDataSet(dataSetId);
        if (Number(ds.pdpRailId) === 0) {
            throw (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$errors$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["createError"])('WarmStorageService', 'getDataSet', `Data set ${dataSetId} does not exist`);
        }
        return {
            pdpRailId: Number(ds.pdpRailId),
            cacheMissRailId: Number(ds.cacheMissRailId),
            cdnRailId: Number(ds.cdnRailId),
            payer: ds.payer,
            payee: ds.payee,
            serviceProvider: ds.serviceProvider,
            commissionBps: Number(ds.commissionBps),
            clientDataSetId: ds.clientDataSetId,
            pdpEndEpoch: Number(ds.pdpEndEpoch),
            providerId: Number(ds.providerId),
            dataSetId
        };
    }
    async getClientDataSets(clientAddress) {
        try {
            const viewContract = this._getWarmStorageViewContract();
            const dataSetData = await viewContract.getClientDataSets(clientAddress);
            return dataSetData.map((ds)=>({
                    pdpRailId: Number(ds.pdpRailId),
                    cacheMissRailId: Number(ds.cacheMissRailId),
                    cdnRailId: Number(ds.cdnRailId),
                    payer: ds.payer,
                    payee: ds.payee,
                    serviceProvider: ds.serviceProvider,
                    commissionBps: Number(ds.commissionBps),
                    clientDataSetId: ds.clientDataSetId,
                    pdpEndEpoch: Number(ds.pdpEndEpoch),
                    providerId: Number(ds.providerId)
                }));
        } catch (error) {
            throw new Error(`Failed to get client data sets: ${error instanceof Error ? error.message : String(error)}`);
        }
    }
    async getClientDataSetsWithDetails(client, onlyManaged = false) {
        const pdpVerifier = this._getPDPVerifier();
        const viewContract = this._getWarmStorageViewContract();
        const ids = await viewContract.clientDataSets(client);
        if (ids.length === 0) return [];
        const enhancedDataSetsPromises = ids.map(async (idBigInt)=>{
            const pdpVerifierDataSetId = Number(idBigInt);
            try {
                const base = await this.getDataSet(pdpVerifierDataSetId);
                const [isLive, listenerResult, metadata] = await Promise.all([
                    pdpVerifier.dataSetLive(pdpVerifierDataSetId),
                    pdpVerifier.getDataSetListener(pdpVerifierDataSetId).catch(()=>null),
                    this.getDataSetMetadata(pdpVerifierDataSetId).catch(()=>Object.create(null))
                ]);
                const isManaged = listenerResult != null && listenerResult.toLowerCase() === this._warmStorageAddress.toLowerCase();
                if (onlyManaged && !isManaged) {
                    return null;
                }
                const nextPieceId = isLive ? await pdpVerifier.getNextPieceId(pdpVerifierDataSetId) : 0n;
                return {
                    ...base,
                    pdpVerifierDataSetId,
                    nextPieceId: Number(nextPieceId),
                    currentPieceCount: Number(nextPieceId),
                    isLive,
                    isManaged,
                    withCDN: base.cdnRailId > 0,
                    metadata
                };
            } catch (error) {
                throw new Error(`Failed to get details for data set ${pdpVerifierDataSetId}: ${error instanceof Error ? error.message : String(error)}`);
            }
        });
        const results = await Promise.all(enhancedDataSetsPromises);
        return results.filter((result)=>result !== null);
    }
    async validateDataSet(dataSetId) {
        const pdpVerifier = this._getPDPVerifier();
        const [isLive, listener] = await Promise.all([
            pdpVerifier.dataSetLive(Number(dataSetId)),
            pdpVerifier.getDataSetListener(Number(dataSetId))
        ]);
        if (!isLive) {
            throw new Error(`Data set ${dataSetId} does not exist or is not live`);
        }
        if (listener.toLowerCase() !== this._warmStorageAddress.toLowerCase()) {
            throw new Error(`Data set ${dataSetId} is not managed by this WarmStorage contract (${this._warmStorageAddress}), managed by ${String(listener)}`);
        }
    }
    async verifyDataSetCreation(txHashOrTransaction) {
        try {
            const txHash = typeof txHashOrTransaction === 'string' ? txHashOrTransaction : txHashOrTransaction.hash;
            let receipt;
            if (typeof txHashOrTransaction === 'string') {
                receipt = await this._provider.getTransactionReceipt(txHash);
            } else {
                receipt = await txHashOrTransaction.wait(__TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["TIMING_CONSTANTS"].TRANSACTION_CONFIRMATIONS);
            }
            if (receipt == null) {
                return {
                    transactionMined: false,
                    transactionSuccess: false,
                    dataSetLive: false
                };
            }
            const transactionSuccess = receipt.status === 1;
            if (!transactionSuccess) {
                return {
                    transactionMined: true,
                    transactionSuccess: false,
                    dataSetLive: false,
                    blockNumber: receipt.blockNumber,
                    gasUsed: receipt.gasUsed,
                    error: 'Transaction failed'
                };
            }
            const pdpVerifier = this._getPDPVerifier();
            const dataSetId = await pdpVerifier.extractDataSetIdFromReceipt(receipt);
            if (dataSetId == null) {
                return {
                    transactionMined: true,
                    transactionSuccess: true,
                    dataSetLive: false,
                    blockNumber: receipt.blockNumber,
                    gasUsed: receipt.gasUsed,
                    error: 'Could not find DataSetCreated event in transaction'
                };
            }
            const isLive = await pdpVerifier.dataSetLive(dataSetId);
            return {
                transactionMined: true,
                transactionSuccess: true,
                dataSetId,
                dataSetLive: isLive,
                blockNumber: receipt.blockNumber,
                gasUsed: receipt.gasUsed
            };
        } catch (error) {
            return {
                transactionMined: false,
                transactionSuccess: false,
                dataSetLive: false,
                error: error instanceof Error ? error.message : 'Unknown error'
            };
        }
    }
    async getComprehensiveDataSetStatus(txHashOrTransaction, pdpServer) {
        const txHash = typeof txHashOrTransaction === 'string' ? txHashOrTransaction : txHashOrTransaction.hash;
        let serverStatus = null;
        if (pdpServer != null) {
            try {
                performance.mark('synapse:pdpServer.getDataSetCreationStatus-start');
                serverStatus = await pdpServer.getDataSetCreationStatus(txHash);
                performance.mark('synapse:pdpServer.getDataSetCreationStatus-end');
                performance.measure('synapse:pdpServer.getDataSetCreationStatus', 'synapse:pdpServer.getDataSetCreationStatus-start', 'synapse:pdpServer.getDataSetCreationStatus-end');
            } catch  {
                performance.mark('synapse:pdpServer.getDataSetCreationStatus-end');
                performance.measure('synapse:pdpServer.getDataSetCreationStatus', 'synapse:pdpServer.getDataSetCreationStatus-start', 'synapse:pdpServer.getDataSetCreationStatus-end');
            }
        }
        performance.mark('synapse:verifyDataSetCreation-start');
        const chainStatus = await this.verifyDataSetCreation(txHashOrTransaction);
        performance.mark('synapse:verifyDataSetCreation-end');
        performance.measure('synapse:verifyDataSetCreation', 'synapse:verifyDataSetCreation-start', 'synapse:verifyDataSetCreation-end');
        const isComplete = chainStatus.transactionMined && chainStatus.transactionSuccess && chainStatus.dataSetId != null && chainStatus.dataSetLive && serverStatus != null && serverStatus.ok === true && serverStatus.dataSetCreated;
        const dataSetId = serverStatus?.dataSetId ?? chainStatus.dataSetId ?? null;
        let error = chainStatus.error ?? null;
        if (serverStatus != null && serverStatus.ok === false) {
            error = `Server reported transaction failed (status: ${serverStatus.txStatus})`;
        }
        return {
            txHash,
            serverStatus,
            chainStatus,
            summary: {
                isComplete,
                isLive: chainStatus.dataSetLive,
                dataSetId,
                error
            }
        };
    }
    async waitForDataSetCreationWithStatus(txHashOrTransaction, pdpServer, maxWaitTime = __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["TIMING_CONSTANTS"].DATA_SET_CREATION_TIMEOUT_MS, pollInterval = __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["TIMING_CONSTANTS"].DATA_SET_CREATION_POLL_INTERVAL_MS, onProgress) {
        const startTime = Date.now();
        while(Date.now() - startTime < maxWaitTime){
            const status = await this.getComprehensiveDataSetStatus(txHashOrTransaction, pdpServer);
            const elapsedMs = Date.now() - startTime;
            if (onProgress != null) {
                try {
                    await onProgress(status, elapsedMs);
                } catch (error) {
                    console.error('Error in progress callback:', error);
                }
            }
            if (status.summary.isComplete) {
                return status;
            }
            if (status.summary.error != null && status.chainStatus.transactionMined) {
                throw new Error(status.summary.error);
            }
            await new Promise((resolve)=>setTimeout(resolve, pollInterval));
        }
        throw new Error(`Data set creation timed out after ${maxWaitTime / 1000} seconds`);
    }
    async getDataSetMetadata(dataSetId) {
        const viewContract = this._getWarmStorageViewContract();
        const [keys, values] = await viewContract.getAllDataSetMetadata(dataSetId);
        const metadata = Object.create(null);
        for(let i = 0; i < keys.length; i++){
            metadata[keys[i]] = values[i];
        }
        return metadata;
    }
    async getDataSetMetadataByKey(dataSetId, key) {
        const viewContract = this._getWarmStorageViewContract();
        const [exists, value] = await viewContract.getDataSetMetadata(dataSetId, key);
        return exists ? value : null;
    }
    async getPieceMetadata(dataSetId, pieceId) {
        const viewContract = this._getWarmStorageViewContract();
        const [keys, values] = await viewContract.getAllPieceMetadata(dataSetId, pieceId);
        const metadata = Object.create(null);
        for(let i = 0; i < keys.length; i++){
            metadata[keys[i]] = values[i];
        }
        return metadata;
    }
    async getPieceMetadataByKey(dataSetId, pieceId, key) {
        const viewContract = this._getWarmStorageViewContract();
        const [exists, value] = await viewContract.getPieceMetadata(dataSetId, pieceId, key);
        return exists ? value : null;
    }
    async getServicePrice() {
        const contract = this._getWarmStorageContract();
        const pricing = await contract.getServicePrice();
        return {
            pricePerTiBPerMonthNoCDN: pricing.pricePerTiBPerMonthNoCDN,
            pricePerTiBCdnEgress: pricing.pricePerTiBCdnEgress,
            pricePerTiBCacheMissEgress: pricing.pricePerTiBCacheMissEgress,
            tokenAddress: pricing.tokenAddress,
            epochsPerMonth: pricing.epochsPerMonth,
            minimumPricePerMonth: pricing.minimumPricePerMonth
        };
    }
    async calculateStorageCost(sizeInBytes) {
        const servicePriceInfo = await this.getServicePrice();
        const sizeInBytesBigint = BigInt(sizeInBytes);
        const pricePerEpoch = servicePriceInfo.pricePerTiBPerMonthNoCDN * sizeInBytesBigint / (__TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["SIZE_CONSTANTS"].TiB * servicePriceInfo.epochsPerMonth);
        const costs = {
            perEpoch: pricePerEpoch,
            perDay: pricePerEpoch * BigInt(__TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["TIME_CONSTANTS"].EPOCHS_PER_DAY),
            perMonth: pricePerEpoch * servicePriceInfo.epochsPerMonth
        };
        return {
            ...costs,
            withCDN: costs
        };
    }
    async checkAllowanceForStorage(sizeInBytes, withCDN, paymentsService, lockupDays) {
        const [approval, costs] = await Promise.all([
            paymentsService.serviceApproval(this._warmStorageAddress, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["TOKENS"].USDFC),
            this.calculateStorageCost(sizeInBytes)
        ]);
        const selectedCosts = withCDN ? costs.withCDN : costs;
        const rateNeeded = selectedCosts.perEpoch;
        const lockupPeriod = BigInt(lockupDays ?? Number(__TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["TIME_CONSTANTS"].DEFAULT_LOCKUP_DAYS)) * BigInt(__TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["TIME_CONSTANTS"].EPOCHS_PER_DAY);
        const lockupNeeded = rateNeeded * lockupPeriod;
        const totalRateNeeded = BigInt(approval.rateUsed) + rateNeeded;
        const totalLockupNeeded = BigInt(approval.lockupUsed) + lockupNeeded;
        const sufficient = approval.rateAllowance >= totalRateNeeded && approval.lockupAllowance >= totalLockupNeeded;
        const rateAllowanceNeeded = totalRateNeeded > approval.rateAllowance ? totalRateNeeded - approval.rateAllowance : 0n;
        const lockupAllowanceNeeded = totalLockupNeeded > approval.lockupAllowance ? totalLockupNeeded - approval.lockupAllowance : 0n;
        let message;
        if (!sufficient) {
            const needsRate = rateAllowanceNeeded > 0n;
            const needsLockup = lockupAllowanceNeeded > 0n;
            if (needsRate && needsLockup) {
                message = 'Insufficient rate and lockup allowances';
            } else if (needsRate) {
                message = 'Insufficient rate allowance';
            } else if (needsLockup) {
                message = 'Insufficient lockup allowance';
            }
        }
        return {
            rateAllowanceNeeded,
            lockupAllowanceNeeded,
            currentRateAllowance: approval.rateAllowance,
            currentLockupAllowance: approval.lockupAllowance,
            currentRateUsed: approval.rateUsed,
            currentLockupUsed: approval.lockupUsed,
            sufficient,
            message,
            costs: selectedCosts,
            depositAmountNeeded: lockupNeeded
        };
    }
    async prepareStorageUpload(options, paymentsService) {
        const [costs, allowanceCheck] = await Promise.all([
            this.calculateStorageCost(options.dataSize),
            this.checkAllowanceForStorage(options.dataSize, options.withCDN ?? false, paymentsService)
        ]);
        const selectedCosts = options.withCDN ?? false ? costs.withCDN : costs;
        const actions = [];
        const accountInfo = await paymentsService.accountInfo(__TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["TOKENS"].USDFC);
        const requiredBalance = selectedCosts.perMonth;
        if (accountInfo.availableFunds < requiredBalance) {
            const depositAmount = requiredBalance - accountInfo.availableFunds;
            actions.push({
                type: 'deposit',
                description: `Deposit ${depositAmount} USDFC to payments contract`,
                execute: async ()=>await paymentsService.deposit(depositAmount, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["TOKENS"].USDFC)
            });
        }
        if (!allowanceCheck.sufficient) {
            actions.push({
                type: 'approveService',
                description: `Approve service with rate allowance ${allowanceCheck.rateAllowanceNeeded} and lockup allowance ${allowanceCheck.lockupAllowanceNeeded}`,
                execute: async ()=>await paymentsService.approveService(this._warmStorageAddress, allowanceCheck.rateAllowanceNeeded, allowanceCheck.lockupAllowanceNeeded, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["TIME_CONSTANTS"].EPOCHS_PER_MONTH, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["TOKENS"].USDFC)
            });
        }
        return {
            estimatedCost: {
                perEpoch: selectedCosts.perEpoch,
                perDay: selectedCosts.perDay,
                perMonth: selectedCosts.perMonth
            },
            allowanceCheck: {
                sufficient: allowanceCheck.sufficient,
                message: allowanceCheck.sufficient ? undefined : `Insufficient allowances: rate needed ${allowanceCheck.rateAllowanceNeeded}, lockup needed ${allowanceCheck.lockupAllowanceNeeded}`
            },
            actions
        };
    }
    async terminateDataSet(signer, dataSetId) {
        const contract = this._getWarmStorageContract();
        const contractWithSigner = contract.connect(signer);
        return await contractWithSigner.terminateService(dataSetId);
    }
    async addApprovedProvider(signer, providerId) {
        const contract = this._getWarmStorageContract();
        const contractWithSigner = contract.connect(signer);
        return await contractWithSigner.addApprovedProvider(providerId);
    }
    async removeApprovedProvider(signer, providerId) {
        const contract = this._getWarmStorageContract();
        const contractWithSigner = contract.connect(signer);
        const viewContract = this._getWarmStorageViewContract();
        const approvedIds = await viewContract.getApprovedProviders(0n, 0n);
        const index = approvedIds.findIndex((id)=>Number(id) === providerId);
        if (index === -1) {
            throw new Error(`Provider ${providerId} is not in the approved list`);
        }
        return await contractWithSigner.removeApprovedProvider(providerId, index);
    }
    async getApprovedProviderIds() {
        const viewContract = this._getWarmStorageViewContract();
        const providerIds = await viewContract.getApprovedProviders(0n, 0n);
        return providerIds.map((id)=>Number(id));
    }
    async isProviderIdApproved(providerId) {
        const viewContract = this._getWarmStorageViewContract();
        return await viewContract.isProviderApproved(providerId);
    }
    async getOwner() {
        const contract = this._getWarmStorageContract();
        return await contract.owner();
    }
    async isOwner(signer) {
        const signerAddress = await signer.getAddress();
        const ownerAddress = await this.getOwner();
        return signerAddress.toLowerCase() === ownerAddress.toLowerCase();
    }
    async getMaxProvingPeriod() {
        const viewContract = this._getWarmStorageViewContract();
        const maxPeriod = await viewContract.getMaxProvingPeriod();
        return Number(maxPeriod);
    }
    async getChallengeWindow() {
        const viewContract = this._getWarmStorageViewContract();
        const window = await viewContract.challengeWindow();
        return Number(window);
    }
    async topUpCDNPaymentRails(signer, dataSetId, cdnAmountToAdd, cacheMissAmountToAdd) {
        if (cdnAmountToAdd < 0n || cacheMissAmountToAdd < 0n) {
            throw new Error('Top up amounts must be positive');
        }
        if (cdnAmountToAdd === 0n && cacheMissAmountToAdd === 0n) {
            throw new Error('At least one top up amount must be >0');
        }
        const contract = this._getWarmStorageContract();
        const contractWithSigner = contract.connect(signer);
        return await contractWithSigner.topUpCDNPaymentRails(dataSetId, cdnAmountToAdd, cacheMissAmountToAdd);
    }
} //# sourceMappingURL=service.js.map
}),
"[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/warm-storage/index.js [app-route] (ecmascript) <locals>", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([]);
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$warm$2d$storage$2f$service$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/warm-storage/service.js [app-route] (ecmascript)"); //# sourceMappingURL=index.js.map
;
}),
"[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/synapse.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "Synapse",
    ()=>Synapse
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f$ethers$2f$lib$2e$esm$2f$ethers$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__ethers$3e$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/ethers/lib.esm/ethers.js [app-route] (ecmascript) <export * as ethers>");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$payments$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/payments/index.js [app-route] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$payments$2f$service$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/payments/service.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$retriever$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/retriever/index.js [app-route] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$retriever$2f$chain$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/retriever/chain.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$retriever$2f$filbeam$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/retriever/filbeam.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$retriever$2f$subgraph$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/retriever/subgraph.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$session$2f$key$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/session/key.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$sp$2d$registry$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/sp-registry/index.js [app-route] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$sp$2d$registry$2f$service$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/sp-registry/service.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$storage$2f$manager$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/storage/manager.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$subgraph$2f$service$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/subgraph/service.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$telemetry$2f$singleton$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/telemetry/singleton.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/utils/index.js [app-route] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/utils/constants.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$network$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/utils/network.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$warm$2d$storage$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/warm-storage/index.js [app-route] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$warm$2d$storage$2f$service$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/warm-storage/service.js [app-route] (ecmascript)");
;
;
;
;
;
;
;
;
;
;
class Synapse {
    _signer;
    _network;
    _withCDN;
    _payments;
    _provider;
    _warmStorageAddress;
    _warmStorageService;
    _pieceRetriever;
    _storageManager;
    _session = null;
    static async create(options) {
        const providedOptions = [
            options.privateKey,
            options.provider,
            options.signer
        ].filter(Boolean).length;
        if (providedOptions !== 1) {
            throw new Error('Must provide exactly one of: privateKey, provider, or signer');
        }
        let network;
        let signer;
        let provider;
        if (options.privateKey != null) {
            const rpcURL = options.rpcURL ?? options.rpcURL;
            if (rpcURL == null) {
                throw new Error('rpcURL is required when using privateKey');
            }
            let privateKey = options.privateKey;
            if (!privateKey.startsWith('0x')) {
                privateKey = `0x${privateKey}`;
            }
            if (/^ws(s)?:\/\//i.test(rpcURL)) {
                provider = new __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f$ethers$2f$lib$2e$esm$2f$ethers$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__ethers$3e$__["ethers"].WebSocketProvider(rpcURL);
            } else {
                provider = new __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f$ethers$2f$lib$2e$esm$2f$ethers$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__ethers$3e$__["ethers"].JsonRpcProvider(rpcURL);
            }
            network = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$network$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getFilecoinNetworkType"])(provider);
            const wallet = new __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f$ethers$2f$lib$2e$esm$2f$ethers$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__ethers$3e$__["ethers"].Wallet(privateKey, provider);
            signer = options.disableNonceManager === true ? wallet : new __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f$ethers$2f$lib$2e$esm$2f$ethers$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__ethers$3e$__["ethers"].NonceManager(wallet);
        } else if (options.provider != null) {
            provider = options.provider;
            network = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$network$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getFilecoinNetworkType"])(provider);
            if ('getSigner' in provider && typeof provider.getSigner === 'function') {
                const baseSigner = await provider.getSigner(0);
                signer = options.disableNonceManager === true ? baseSigner : new __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f$ethers$2f$lib$2e$esm$2f$ethers$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__ethers$3e$__["ethers"].NonceManager(baseSigner);
            } else {
                throw new Error('Provider does not support signing operations');
            }
        } else if (options.signer != null) {
            signer = options.signer;
            if (options.disableNonceManager !== true && !(signer instanceof __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f$ethers$2f$lib$2e$esm$2f$ethers$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__ethers$3e$__["ethers"].NonceManager)) {
                signer = new __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f$ethers$2f$lib$2e$esm$2f$ethers$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__ethers$3e$__["ethers"].NonceManager(signer);
            }
            if (signer.provider == null) {
                throw new Error('Signer must have a provider');
            }
            provider = signer.provider;
            network = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$network$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getFilecoinNetworkType"])(provider);
        } else {
            throw new Error('No valid authentication method provided');
        }
        if (network !== 'mainnet' && network !== 'calibration') {
            throw new Error(`Invalid network: ${String(network)}. Only 'mainnet' and 'calibration' are supported.`);
        }
        const warmStorageAddress = options.warmStorageAddress ?? __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["CONTRACT_ADDRESSES"].WARM_STORAGE[network];
        if (!warmStorageAddress) {
            throw new Error(`No Warm Storage address configured for network: ${network}`);
        }
        const warmStorageService = await __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$warm$2d$storage$2f$service$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["WarmStorageService"].create(provider, warmStorageAddress);
        const paymentsAddress = warmStorageService.getPaymentsAddress();
        const usdfcAddress = warmStorageService.getUSDFCTokenAddress();
        const payments = new __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$payments$2f$service$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["PaymentsService"](provider, signer, paymentsAddress, usdfcAddress, options.disableNonceManager === true);
        const registryAddress = warmStorageService.getServiceProviderRegistryAddress();
        const spRegistry = new __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$sp$2d$registry$2f$service$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["SPRegistryService"](provider, registryAddress);
        let pieceRetriever;
        if (options.pieceRetriever != null) {
            pieceRetriever = options.pieceRetriever;
        } else {
            const chainRetriever = new __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$retriever$2f$chain$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["ChainRetriever"](warmStorageService, spRegistry);
            let baseRetriever = chainRetriever;
            if (options.subgraphConfig != null || options.subgraphService != null) {
                const subgraphService = options.subgraphService != null ? options.subgraphService : new __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$subgraph$2f$service$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["SubgraphService"](options.subgraphConfig);
                baseRetriever = new __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$retriever$2f$subgraph$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["SubgraphRetriever"](subgraphService);
            }
            pieceRetriever = new __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$retriever$2f$filbeam$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["FilBeamRetriever"](baseRetriever, network);
        }
        await (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$telemetry$2f$singleton$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["initGlobalTelemetry"])(options.telemetry || {}, {
            filecoinNetwork: network
        });
        return new Synapse(signer, provider, network, payments, options.withCDN === true, warmStorageAddress, warmStorageService, pieceRetriever, options.dev === false, options.withIpni);
    }
    constructor(signer, provider, network, payments, withCDN, warmStorageAddress, warmStorageService, pieceRetriever, dev, withIpni){
        this._signer = signer;
        this._provider = provider;
        this._network = network;
        this._payments = payments;
        this._withCDN = withCDN;
        this._warmStorageService = warmStorageService;
        this._pieceRetriever = pieceRetriever;
        this._warmStorageAddress = warmStorageAddress;
        this._session = null;
        this._storageManager = new __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$storage$2f$manager$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["StorageManager"](this, this._warmStorageService, this._pieceRetriever, this._withCDN, dev, withIpni);
    }
    getNetwork() {
        return this._network;
    }
    get telemetry() {
        return (0, __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$telemetry$2f$singleton$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["getGlobalTelemetry"])();
    }
    getSigner() {
        if (this._session == null) {
            return this._signer;
        } else {
            return this._session.getSigner();
        }
    }
    getClient() {
        return this._signer;
    }
    createSessionKey(sessionKeySigner) {
        return new __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$session$2f$key$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["SessionKey"](this._provider, this._warmStorageService.getSessionKeyRegistryAddress(), sessionKeySigner, this._signer);
    }
    setSession(sessionKey) {
        this._session = sessionKey;
    }
    getProvider() {
        return this._provider;
    }
    getChainId() {
        return this._network === 'mainnet' ? __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["CHAIN_IDS"].mainnet : __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$constants$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["CHAIN_IDS"].calibration;
    }
    getWarmStorageAddress() {
        return this._warmStorageAddress;
    }
    getPaymentsAddress() {
        return this._warmStorageService.getPaymentsAddress();
    }
    getPDPVerifierAddress() {
        return this._warmStorageService.getPDPVerifierAddress();
    }
    get payments() {
        return this._payments;
    }
    get storage() {
        return this._storageManager;
    }
    async createStorage(options = {}) {
        return await this._storageManager.createContext(options);
    }
    async download(pieceCid, options) {
        console.warn('synapse.download() is deprecated. Use synapse.storage.download() instead.');
        return await this._storageManager.download(pieceCid, options);
    }
    async getProviderInfo(providerAddress) {
        try {
            if (typeof providerAddress === 'string') {
                try {
                    __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f$ethers$2f$lib$2e$esm$2f$ethers$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$export__$2a$__as__ethers$3e$__["ethers"].getAddress(providerAddress);
                } catch  {
                    throw new Error(`Invalid provider address: ${providerAddress}`);
                }
            }
            const registryAddress = this._warmStorageService.getServiceProviderRegistryAddress();
            const spRegistry = new __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$sp$2d$registry$2f$service$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["SPRegistryService"](this._provider, registryAddress);
            let providerInfo;
            if (typeof providerAddress === 'string') {
                providerInfo = await spRegistry.getProviderByAddress(providerAddress);
            } else {
                providerInfo = await spRegistry.getProvider(providerAddress);
            }
            if (providerInfo == null) {
                throw new Error(`Provider ${providerAddress} not found in registry`);
            }
            return providerInfo;
        } catch (error) {
            if (error instanceof Error && error.message.includes('Invalid provider address')) {
                throw error;
            }
            if (error instanceof Error && error.message.includes('not found')) {
                throw error;
            }
            throw new Error(`Failed to get provider info: ${error instanceof Error ? error.message : String(error)}`);
        }
    }
    async getStorageInfo() {
        console.warn('synapse.getStorageInfo() is deprecated. Use synapse.storage.getStorageInfo() instead.');
        return await this._storageManager.getStorageInfo();
    }
} //# sourceMappingURL=synapse.js.map
}),
"[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/telemetry/index.js [app-route] (ecmascript) <locals>", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([]);
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$telemetry$2f$service$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/telemetry/service.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$telemetry$2f$singleton$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/telemetry/singleton.js [app-route] (ecmascript)"); //# sourceMappingURL=index.js.map
;
;
}),
"[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/types.js [app-route] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([]);
;
 //# sourceMappingURL=types.js.map
}),
"[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/index.js [app-route] (ecmascript) <locals>", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([]);
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$payments$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/payments/index.js [app-route] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$pdp$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/pdp/index.js [app-route] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$session$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/session/index.js [app-route] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$storage$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/storage/index.js [app-route] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$subgraph$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/subgraph/index.js [app-route] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$synapse$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/synapse.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$telemetry$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/telemetry/index.js [app-route] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$types$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/types.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$utils$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/utils/index.js [app-route] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$ETHGlobalBuenosAires$2f$node_modules$2f40$filoz$2f$synapse$2d$sdk$2f$dist$2f$src$2f$warm$2d$storage$2f$index$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/ETHGlobalBuenosAires/node_modules/@filoz/synapse-sdk/dist/src/warm-storage/index.js [app-route] (ecmascript) <locals>"); //# sourceMappingURL=index.js.map
;
;
;
;
;
;
;
;
;
;
}),
];

//# sourceMappingURL=a6501_%40filoz_synapse-sdk_dist_7d9e3b3c._.js.map