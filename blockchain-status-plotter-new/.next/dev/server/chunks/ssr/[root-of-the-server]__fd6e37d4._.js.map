{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 80, "column": 0}, "map": {"version":3,"sources":["file:///Users/crischimiadao/ETHGlobalBuenosAires/blockchain-status-plotter-new/lib/web3-service.ts"],"sourcesContent":["import { ethers } from 'ethers';\n\n// Contract addresses from deployment\nconst REGISTRY_ADDRESS = '0xA6Fa61924F06DB9A84B92182B69F5C08F3176554';\nconst RPC_URL = 'https://api.calibration.node.glif.io/rpc/v1';\n\n// Minimal ABI - just the functions we need\nconst REGISTRY_ABI = [\n  'function totalExperiments() view returns (uint256)',\n  'function getExperiment(uint256) view returns (uint256 id, address submitter, string cid, bytes32 dataHash, bytes32 metricsHash, uint256 difficulty, int256 initialRV, uint64 submittedAt)',\n];\n\nexport type OnChainExperiment = {\n  id: number;\n  submitter: string;\n  cid: string;\n  dataHash: string;\n  metricsHash: string;\n  difficulty: number;\n  initialRV: number;\n  submittedAt: number;\n  blockExplorer: string;\n};\n\nlet provider: ethers.JsonRpcProvider | null = null;\nlet registry: ethers.Contract | null = null;\n\nfunction getContract() {\n  if (!provider) {\n    provider = new ethers.JsonRpcProvider(RPC_URL);\n  }\n  if (!registry) {\n    registry = new ethers.Contract(REGISTRY_ADDRESS, REGISTRY_ABI, provider);\n  }\n  return registry;\n}\n\nexport async function fetchTotalExperiments(): Promise<number> {\n  try {\n    const contract = getContract();\n    const total = await contract.totalExperiments();\n    return Number(total);\n  } catch (error) {\n    console.error('Failed to fetch total experiments:', error);\n    return 0;\n  }\n}\n\nexport async function fetchExperiment(id: number): Promise<OnChainExperiment | null> {\n  try {\n    const contract = getContract();\n    const [\n      expId,\n      submitter,\n      cid,\n      dataHash,\n      metricsHash,\n      difficulty,\n      initialRV,\n      submittedAt,\n    ] = await contract.getExperiment(id);\n\n    return {\n      id: Number(expId),\n      submitter,\n      cid,\n      dataHash,\n      metricsHash,\n      difficulty: Number(difficulty),\n      initialRV: Number(initialRV),\n      submittedAt: Number(submittedAt),\n      blockExplorer: `https://calibration.filscan.io/address/${REGISTRY_ADDRESS}`,\n    };\n  } catch (error) {\n    console.error(`Failed to fetch experiment ${id}:`, error);\n    return null;\n  }\n}\n\nexport async function fetchAllExperiments(): Promise<OnChainExperiment[]> {\n  try {\n    const total = await fetchTotalExperiments();\n    if (total === 0) return [];\n\n    const promises = [];\n    for (let i = 0; i < total; i++) {\n      promises.push(fetchExperiment(i));\n    }\n\n    const results = await Promise.all(promises);\n    return results.filter((exp): exp is OnChainExperiment => exp !== null);\n  } catch (error) {\n    console.error('Failed to fetch all experiments:', error);\n    return [];\n  }\n}\n\nexport async function fetchLatestExperiments(count: number = 5): Promise<OnChainExperiment[]> {\n  try {\n    const total = await fetchTotalExperiments();\n    if (total === 0) return [];\n\n    const startId = Math.max(0, total - count);\n    const promises = [];\n    \n    for (let i = total - 1; i >= startId; i--) {\n      promises.push(fetchExperiment(i));\n    }\n\n    const results = await Promise.all(promises);\n    return results.filter((exp): exp is OnChainExperiment => exp !== null);\n  } catch (error) {\n    console.error('Failed to fetch latest experiments:', error);\n    return [];\n  }\n}\n\n/**\n * Fetch experiment data from IPFS gateway using CID\n * Note: Filecoin piece CIDs (bafkzcibd...) may take time to propagate to IPFS\n */\nexport async function fetchExperimentData(cid: string): Promise<any> {\n  // Skip IPFS fetch for now - Filecoin piece CIDs need special handling\n  // For demo, we'll show on-chain metadata only\n  // TODO: Implement Synapse SDK download for full data retrieval\n  \n  console.log(`[IPFS] Skipping fetch for Filecoin piece CID: ${cid.slice(0, 24)}...`);\n  return null;\n  \n  // Future implementation:\n  // const synapse = await Synapse.create({ signer: wallet });\n  // const data = await synapse.storage.download(cid);\n  // return JSON.parse(new TextDecoder().decode(data));\n}\n"],"names":[],"mappings":";;;;;;;;;;;;AAAA;;AAEA,qCAAqC;AACrC,MAAM,mBAAmB;AACzB,MAAM,UAAU;AAEhB,2CAA2C;AAC3C,MAAM,eAAe;IACnB;IACA;CACD;AAcD,IAAI,WAA0C;AAC9C,IAAI,WAAmC;AAEvC,SAAS;IACP,IAAI,CAAC,UAAU;QACb,WAAW,IAAI,4PAAM,CAAC,eAAe,CAAC;IACxC;IACA,IAAI,CAAC,UAAU;QACb,WAAW,IAAI,4PAAM,CAAC,QAAQ,CAAC,kBAAkB,cAAc;IACjE;IACA,OAAO;AACT;AAEO,eAAe;IACpB,IAAI;QACF,MAAM,WAAW;QACjB,MAAM,QAAQ,MAAM,SAAS,gBAAgB;QAC7C,OAAO,OAAO;IAChB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,sCAAsC;QACpD,OAAO;IACT;AACF;AAEO,eAAe,gBAAgB,EAAU;IAC9C,IAAI;QACF,MAAM,WAAW;QACjB,MAAM,CACJ,OACA,WACA,KACA,UACA,aACA,YACA,WACA,YACD,GAAG,MAAM,SAAS,aAAa,CAAC;QAEjC,OAAO;YACL,IAAI,OAAO;YACX;YACA;YACA;YACA;YACA,YAAY,OAAO;YACnB,WAAW,OAAO;YAClB,aAAa,OAAO;YACpB,eAAe,CAAC,uCAAuC,EAAE,kBAAkB;QAC7E;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,CAAC,2BAA2B,EAAE,GAAG,CAAC,CAAC,EAAE;QACnD,OAAO;IACT;AACF;AAEO,eAAe;IACpB,IAAI;QACF,MAAM,QAAQ,MAAM;QACpB,IAAI,UAAU,GAAG,OAAO,EAAE;QAE1B,MAAM,WAAW,EAAE;QACnB,IAAK,IAAI,IAAI,GAAG,IAAI,OAAO,IAAK;YAC9B,SAAS,IAAI,CAAC,gBAAgB;QAChC;QAEA,MAAM,UAAU,MAAM,QAAQ,GAAG,CAAC;QAClC,OAAO,QAAQ,MAAM,CAAC,CAAC,MAAkC,QAAQ;IACnE,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,oCAAoC;QAClD,OAAO,EAAE;IACX;AACF;AAEO,eAAe,uBAAuB,QAAgB,CAAC;IAC5D,IAAI;QACF,MAAM,QAAQ,MAAM;QACpB,IAAI,UAAU,GAAG,OAAO,EAAE;QAE1B,MAAM,UAAU,KAAK,GAAG,CAAC,GAAG,QAAQ;QACpC,MAAM,WAAW,EAAE;QAEnB,IAAK,IAAI,IAAI,QAAQ,GAAG,KAAK,SAAS,IAAK;YACzC,SAAS,IAAI,CAAC,gBAAgB;QAChC;QAEA,MAAM,UAAU,MAAM,QAAQ,GAAG,CAAC;QAClC,OAAO,QAAQ,MAAM,CAAC,CAAC,MAAkC,QAAQ;IACnE,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,uCAAuC;QACrD,OAAO,EAAE;IACX;AACF;AAMO,eAAe,oBAAoB,GAAW;IACnD,sEAAsE;IACtE,8CAA8C;IAC9C,+DAA+D;IAE/D,QAAQ,GAAG,CAAC,CAAC,8CAA8C,EAAE,IAAI,KAAK,CAAC,GAAG,IAAI,GAAG,CAAC;IAClF,OAAO;AAEP,yBAAyB;AACzB,4DAA4D;AAC5D,oDAAoD;AACpD,qDAAqD;AACvD"}},
    {"offset": {"line": 189, "column": 0}, "map": {"version":3,"sources":["file:///Users/crischimiadao/ETHGlobalBuenosAires/blockchain-status-plotter-new/lib/filecoin-storage.ts"],"sourcesContent":["/**\n * Filecoin Storage Integration\n * Downloads experiment data from Filecoin using Synapse SDK\n */\n\nimport { Synapse } from '@filoz/synapse-sdk';\nimport { ethers } from 'ethers';\nimport { CID } from 'multiformats/cid';\n\n// Cache to avoid re-downloading\nconst dataCache = new Map<string, any>();\n\n/**\n * Download experiment data from Filecoin using piece CID\n * Uses Synapse SDK for reliable retrieval\n */\nexport async function downloadFromFilecoin(pieceCid: string): Promise<any> {\n  // Check cache first\n  if (dataCache.has(pieceCid)) {\n    console.log(`[Filecoin] Cache hit for ${pieceCid.slice(0, 20)}...`);\n    return dataCache.get(pieceCid);\n  }\n\n  try {\n    console.log(`[Filecoin] Downloading ${pieceCid.slice(0, 20)}...`);\n\n    // Read-only mode - no private key needed for downloads\n    // We'll use a public RPC endpoint\n    const rpcUrl = process.env.FILECOIN_CLOUD_RPC || 'https://api.calibration.node.glif.io/rpc/v1';\n    const provider = new ethers.JsonRpcProvider(rpcUrl);\n\n    // For server-side downloads, we can use a dummy signer\n    // Synapse downloads are public and don't require signatures\n    const dummyWallet = ethers.Wallet.createRandom().connect(provider);\n\n    const synapse = await Synapse.create({ \n      signer: dummyWallet,\n      // Add timeout to prevent hanging\n      timeout: 30000,\n    });\n\n    // Download data using piece CID\n    const dataBytes = await synapse.storage.download(pieceCid);\n\n    // Convert bytes to JSON\n    const dataStr = new TextDecoder().decode(dataBytes);\n    const data = JSON.parse(dataStr);\n\n    // Cache for future requests\n    dataCache.set(pieceCid, data);\n\n    console.log(`[Filecoin] Successfully downloaded ${pieceCid.slice(0, 20)}... (${dataBytes.length} bytes)`);\n    return data;\n\n  } catch (error: any) {\n    console.error(`[Filecoin] Download failed for ${pieceCid}:`, error.message);\n    \n    // Fallback: Try IPFS gateways (may not work for fresh uploads)\n    try {\n      console.log(`[Filecoin] Attempting IPFS gateway fallback...`);\n      const response = await fetch(`https://ipfs.io/ipfs/${pieceCid}`, {\n        signal: AbortSignal.timeout(10000),\n      });\n\n      if (!response.ok) {\n        throw new Error(`Gateway returned ${response.status}`);\n      }\n\n      const data = await response.json();\n      dataCache.set(pieceCid, data);\n      console.log(`[Filecoin] Gateway fallback successful`);\n      return data;\n\n    } catch (fallbackError: any) {\n      console.error(`[Filecoin] Gateway fallback also failed:`, fallbackError.message);\n      throw new Error(`Could not retrieve data from Filecoin or IPFS: ${error.message}`);\n    }\n  }\n}\n\n/**\n * Batch download multiple experiments\n * Returns map of CID -> data (null for failures)\n */\nexport async function batchDownloadFromFilecoin(\n  cids: string[]\n): Promise<Map<string, any | null>> {\n  const results = new Map<string, any | null>();\n\n  // Download in parallel with concurrency limit\n  const BATCH_SIZE = 5;\n  for (let i = 0; i < cids.length; i += BATCH_SIZE) {\n    const batch = cids.slice(i, i + BATCH_SIZE);\n    \n    const promises = batch.map(async (cid) => {\n      try {\n        const data = await downloadFromFilecoin(cid);\n        return { cid, data };\n      } catch (error) {\n        console.warn(`[Filecoin] Failed to download ${cid}:`, error);\n        return { cid, data: null };\n      }\n    });\n\n    const batchResults = await Promise.all(promises);\n    batchResults.forEach(({ cid, data }) => {\n      results.set(cid, data);\n    });\n  }\n\n  return results;\n}\n\n/**\n * Check if data is available in cache\n */\nexport function isDataCached(cid: string): boolean {\n  return dataCache.has(cid);\n}\n\n/**\n * Clear cache (useful for testing)\n */\nexport function clearCache(): void {\n  dataCache.clear();\n  console.log('[Filecoin] Cache cleared');\n}\n\n/**\n * Get cache statistics\n */\nexport function getCacheStats() {\n  return {\n    size: dataCache.size,\n    cids: Array.from(dataCache.keys()).map(cid => cid.slice(0, 20) + '...'),\n  };\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 306, "column": 0}, "map": {"version":3,"sources":["file:///Users/crischimiadao/ETHGlobalBuenosAires/blockchain-status-plotter-new/lib/experiment-service.ts"],"sourcesContent":["/**\n * Unified Experiment Data Service\n * Handles both HPLC and Air Quality experiments from Filecoin\n */\n\nimport { fetchAllExperiments, OnChainExperiment } from './web3-service';\nimport { downloadFromFilecoin } from './filecoin-storage';\nimport type { AirQualityData, HplcData } from './types';\n\nexport type UnifiedExperiment = {\n  id: number;\n  type: 'HPLC' | 'AIR_QUALITY' | 'NMR';\n  sampleId: string;\n  cid: string;\n  difficulty: number;\n  submitter: string;\n  submittedAt: number;\n  data?: AirQualityData | HplcData | null;\n  loading?: boolean;\n};\n\n/**\n * Detect experiment type from difficulty score pattern\n * NMR experiments: difficulty 25-70 (peak complexity based)\n * Air quality experiments: difficulty 15-25 (AQI-based)\n * HPLC experiments: difficulty 7-14 (peak-based)\n */\nfunction detectExperimentType(difficulty: number, id: number): 'HPLC' | 'AIR_QUALITY' | 'NMR' {\n  // NMR experiments have highest difficulty (25-70)\n  if (difficulty >= 25) {\n    return 'NMR';\n  }\n  // Air quality: difficulty 15-24\n  if (difficulty >= 15) {\n    return 'AIR_QUALITY';\n  }\n  // HPLC: difficulty < 15\n  return 'HPLC';\n}\n\n/**\n * Fetch all experiments from chain and enrich with IPFS data\n */\nexport async function fetchUnifiedExperiments(includeData: boolean = false): Promise<UnifiedExperiment[]> {\n  try {\n    // Get all on-chain experiments\n    const onChainExperiments = await fetchAllExperiments();\n    \n    // Enrich with type detection and sample ID\n    const enriched = await Promise.all(onChainExperiments.map(async (exp) => {\n      const type = detectExperimentType(exp.difficulty, exp.id);\n      \n      let sampleId;\n      if (type === 'AIR_QUALITY') {\n        sampleId = `AIR-${exp.submittedAt}`;\n      } else if (type === 'NMR') {\n        sampleId = `NMR-${String(exp.id + 1).padStart(6, '0')}`;\n      } else {\n        sampleId = `HPLC-${String(exp.id + 1).padStart(4, '0')}`;\n      }\n      \n      // Optionally fetch full data from Filecoin\n      let data = null;\n      if (includeData && exp.cid) {\n        try {\n          data = await downloadFromFilecoin(exp.cid);\n        } catch (error) {\n          console.warn(`Failed to fetch data for experiment ${exp.id}:`, error);\n          data = null;\n        }\n      }\n      \n      return {\n        id: exp.id,\n        type,\n        sampleId,\n        cid: exp.cid,\n        difficulty: exp.difficulty,\n        submitter: exp.submitter,\n        submittedAt: exp.submittedAt,\n        data,\n      };\n    }));\n    \n    return enriched;\n  } catch (error) {\n    console.error('Failed to fetch unified experiments:', error);\n    return [];\n  }\n}\n\n/**\n * Fetch just air quality experiments\n */\nexport async function fetchAirQualityExperiments(): Promise<UnifiedExperiment[]> {\n  const all = await fetchUnifiedExperiments();\n  return all.filter(exp => exp.type === 'AIR_QUALITY');\n}\n\n/**\n * Fetch just HPLC experiments\n */\nexport async function fetchHplcExperiments(): Promise<UnifiedExperiment[]> {\n  const all = await fetchUnifiedExperiments();\n  return all.filter(exp => exp.type === 'HPLC');\n}\n\n/**\n * Get the latest experiment of any type\n */\nexport async function fetchLatestExperiment(): Promise<UnifiedExperiment | null> {\n  const all = await fetchUnifiedExperiments();\n  if (all.length === 0) return null;\n  \n  // Sort by ID descending (most recent first)\n  all.sort((a, b) => b.id - a.id);\n  return all[0];\n}\n\n/**\n * Format air quality data for dashboard display\n */\nexport function formatAirQualityForDisplay(data: AirQualityData) {\n  const aqiColor = getAQIColor(data.metrics.air_quality_index);\n  const aqiLabel = data.scenario.replace('_', ' ').toUpperCase();\n  \n  return {\n    title: `Air Quality - ${data.sampleId}`,\n    subtitle: `${data.location} • ${data.device}`,\n    primaryMetric: {\n      label: 'AQI',\n      value: data.metrics.air_quality_index.toFixed(1),\n      color: aqiColor,\n      status: aqiLabel,\n    },\n    sensors: data.sensors,\n    metrics: [\n      {\n        label: 'Formaldehyde',\n        value: `${data.metrics.avg_formaldehyde_ppb.toFixed(1)} ppb`,\n        max: `${data.metrics.max_formaldehyde_ppb.toFixed(1)} ppb`,\n      },\n      {\n        label: 'PM2.5',\n        value: `${data.metrics.avg_pm2_5_ugm3.toFixed(1)} μg/m³`,\n        max: `${data.metrics.max_pm2_5_ugm3.toFixed(1)} μg/m³`,\n      },\n      {\n        label: 'Temperature',\n        value: `${data.metrics.temperature_c.toFixed(1)}°C`,\n      },\n      {\n        label: 'Humidity',\n        value: `${data.metrics.humidity_rh.toFixed(1)}%`,\n      },\n    ],\n    chartData: data.dataPoints.map(point => ({\n      time: point.time,\n      formaldehyde: point.formaldehyde,\n      pm2_5: point.pm2_5,\n      light: point.light,\n    })),\n  };\n}\n\nfunction getAQIColor(aqi: number): string {\n  if (aqi < 50) return 'green';\n  if (aqi < 100) return 'yellow';\n  if (aqi < 150) return 'orange';\n  if (aqi < 200) return 'red';\n  return 'purple';\n}\n\n/**\n * Get real-time stats for dashboard header\n */\nexport async function fetchDashboardStats() {\n  try {\n    const experiments = await fetchUnifiedExperiments();\n    \n    const hplcCount = experiments.filter(e => e.type === 'HPLC').length;\n    const airQualityCount = experiments.filter(e => e.type === 'AIR_QUALITY').length;\n    const nmrCount = experiments.filter(e => e.type === 'NMR').length;\n    \n    // Get most recent upload\n    experiments.sort((a, b) => b.submittedAt - a.submittedAt);\n    const lastSync = experiments.length > 0 \n      ? new Date(experiments[0].submittedAt * 1000).toLocaleTimeString()\n      : 'Never';\n    \n    return {\n      totalExperiments: experiments.length,\n      hplcCount,\n      airQualityCount,\n      nmrCount,\n      lastSync,\n      isLive: true,\n    };\n  } catch (error) {\n    console.error('Failed to fetch dashboard stats:', error);\n    return {\n      totalExperiments: 0,\n      hplcCount: 0,\n      airQualityCount: 0,\n      nmrCount: 0,\n      lastSync: 'Error',\n      isLive: false,\n    };\n  }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 482, "column": 0}, "map": {"version":3,"sources":["file:///Users/crischimiadao/ETHGlobalBuenosAires/blockchain-status-plotter-new/components/dashboard/pox-experiments.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const PoXExperiments = registerClientReference(\n    function() { throw new Error(\"Attempted to call PoXExperiments() from the server but PoXExperiments is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/ETHGlobalBuenosAires/blockchain-status-plotter-new/components/dashboard/pox-experiments.tsx <module evaluation>\",\n    \"PoXExperiments\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,iBAAiB,IAAA,0UAAuB,EACjD;IAAa,MAAM,IAAI,MAAM;AAA4O,GACzQ,6HACA","ignoreList":[0]}},
    {"offset": {"line": 496, "column": 0}, "map": {"version":3,"sources":["file:///Users/crischimiadao/ETHGlobalBuenosAires/blockchain-status-plotter-new/components/dashboard/pox-experiments.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const PoXExperiments = registerClientReference(\n    function() { throw new Error(\"Attempted to call PoXExperiments() from the server but PoXExperiments is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/ETHGlobalBuenosAires/blockchain-status-plotter-new/components/dashboard/pox-experiments.tsx\",\n    \"PoXExperiments\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;AACO,MAAM,iBAAiB,IAAA,0UAAuB,EACjD;IAAa,MAAM,IAAI,MAAM;AAA4O,GACzQ,yGACA","ignoreList":[0]}},
    {"offset": {"line": 510, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 518, "column": 0}, "map": {"version":3,"sources":["file:///Users/crischimiadao/ETHGlobalBuenosAires/blockchain-status-plotter-new/app/experiments/page.tsx"],"sourcesContent":["import { fetchUnifiedExperiments, fetchDashboardStats } from '@/lib/experiment-service';\nimport { PoXExperiments } from '@/components/dashboard/pox-experiments';\nimport { Monitor } from 'lucide-react';\n\nexport const revalidate = 10; // Revalidate every 10 seconds\n\nexport default async function ExperimentsPage() {\n  const [experiments, stats] = await Promise.all([\n    fetchUnifiedExperiments(),\n    fetchDashboardStats(),\n  ]);\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      {/* Header */}\n      <header className=\"border-b bg-card/50 backdrop-blur\">\n        <div className=\"container mx-auto px-4 py-4\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center gap-3\">\n              <div className=\"h-10 w-10 bg-primary rounded-lg flex items-center justify-center text-primary-foreground\">\n                <Monitor className=\"h-5 w-5\" />\n              </div>\n              <div>\n                <h1 className=\"text-2xl font-bold tracking-tight\">\n                  PoX Network\n                </h1>\n                <p className=\"text-sm text-muted-foreground font-mono\">\n                  Proof-of-Experiment • Filecoin Cloud • Live\n                </p>\n              </div>\n            </div>\n\n            <div className=\"flex items-center gap-6 text-sm font-mono\">\n              <div>\n                <div className=\"text-xs text-muted-foreground\">Total Experiments</div>\n                <div className=\"text-2xl font-bold\">{stats.totalExperiments}</div>\n              </div>\n              \n              <div className=\"text-orange-600 dark:text-orange-400\">\n                <div className=\"text-xs\">HPLC</div>\n                <div className=\"text-2xl font-bold\">{stats.hplcCount}</div>\n              </div>\n              \n              <div className=\"text-green-600 dark:text-green-400\">\n                <div className=\"text-xs\">Air Quality</div>\n                <div className=\"text-2xl font-bold\">{stats.airQualityCount}</div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </header>\n\n      {/* Main Content */}\n      <main className=\"container mx-auto px-4 py-6\">\n        <div className=\"h-[calc(100vh-180px)]\">\n          <PoXExperiments \n            initialExperiments={experiments} \n            initialStats={stats} \n          />\n        </div>\n      </main>\n\n      {/* Footer */}\n      <footer className=\"border-t bg-card/50 backdrop-blur\">\n        <div className=\"container mx-auto px-4 py-3\">\n          <div className=\"flex items-center justify-between text-xs font-mono text-muted-foreground\">\n            <div>\n              ETH Global Buenos Aires • {new Date().getFullYear()}\n            </div>\n            \n            <div className=\"flex items-center gap-4\">\n              <span className=\"flex items-center gap-2\">\n                <span className=\"h-2 w-2 rounded-full bg-green-500 animate-pulse\"></span>\n                SYSTEM ONLINE\n              </span>\n              \n              <span className=\"opacity-50\">|</span>\n              \n              <span>\n                Auto-refresh: 30s\n              </span>\n              \n              <span className=\"opacity-50\">|</span>\n              \n              <a \n                href=\"https://calibration.filscan.io/address/0xA6Fa61924F06DB9A84B92182B69F5C08F3176554\"\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                className=\"hover:text-foreground transition-colors\"\n              >\n                View on Explorer ↗\n              </a>\n            </div>\n          </div>\n        </div>\n      </footer>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;;;;;AAEO,MAAM,aAAa,IAAI,8BAA8B;AAE7C,eAAe;IAC5B,MAAM,CAAC,aAAa,MAAM,GAAG,MAAM,QAAQ,GAAG,CAAC;QAC7C,IAAA,yNAAuB;QACvB,IAAA,qNAAmB;KACpB;IAED,qBACE,gTAAC;QAAI,WAAU;;0BAEb,gTAAC;gBAAO,WAAU;0BAChB,cAAA,gTAAC;oBAAI,WAAU;8BACb,cAAA,gTAAC;wBAAI,WAAU;;0CACb,gTAAC;gCAAI,WAAU;;kDACb,gTAAC;wCAAI,WAAU;kDACb,cAAA,gTAAC,qRAAO;4CAAC,WAAU;;;;;;;;;;;kDAErB,gTAAC;;0DACC,gTAAC;gDAAG,WAAU;0DAAoC;;;;;;0DAGlD,gTAAC;gDAAE,WAAU;0DAA0C;;;;;;;;;;;;;;;;;;0CAM3D,gTAAC;gCAAI,WAAU;;kDACb,gTAAC;;0DACC,gTAAC;gDAAI,WAAU;0DAAgC;;;;;;0DAC/C,gTAAC;gDAAI,WAAU;0DAAsB,MAAM,gBAAgB;;;;;;;;;;;;kDAG7D,gTAAC;wCAAI,WAAU;;0DACb,gTAAC;gDAAI,WAAU;0DAAU;;;;;;0DACzB,gTAAC;gDAAI,WAAU;0DAAsB,MAAM,SAAS;;;;;;;;;;;;kDAGtD,gTAAC;wCAAI,WAAU;;0DACb,gTAAC;gDAAI,WAAU;0DAAU;;;;;;0DACzB,gTAAC;gDAAI,WAAU;0DAAsB,MAAM,eAAe;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;0BAQpE,gTAAC;gBAAK,WAAU;0BACd,cAAA,gTAAC;oBAAI,WAAU;8BACb,cAAA,gTAAC,kOAAc;wBACb,oBAAoB;wBACpB,cAAc;;;;;;;;;;;;;;;;0BAMpB,gTAAC;gBAAO,WAAU;0BAChB,cAAA,gTAAC;oBAAI,WAAU;8BACb,cAAA,gTAAC;wBAAI,WAAU;;0CACb,gTAAC;;oCAAI;oCACwB,IAAI,OAAO,WAAW;;;;;;;0CAGnD,gTAAC;gCAAI,WAAU;;kDACb,gTAAC;wCAAK,WAAU;;0DACd,gTAAC;gDAAK,WAAU;;;;;;4CAAyD;;;;;;;kDAI3E,gTAAC;wCAAK,WAAU;kDAAa;;;;;;kDAE7B,gTAAC;kDAAK;;;;;;kDAIN,gTAAC;wCAAK,WAAU;kDAAa;;;;;;kDAE7B,gTAAC;wCACC,MAAK;wCACL,QAAO;wCACP,KAAI;wCACJ,WAAU;kDACX;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASf"}}]
}